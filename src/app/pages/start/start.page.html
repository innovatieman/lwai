<app-header [page]="'start'"></app-header>
<main class="selectMain">
    <div *ngIf="!auth.userInfo.isConfirmed&&auth.userInfo.email">
        <ion-card style="font-size:18px" basicPadding>
            Momenteel is je account nog niet bevestigd. De toegang tot deze tool is beperkt en je krijgt alleen toegang als je account door de administrator is bevestigd. Nog even geduld a.u.b.
        </ion-card>
    </div>
    <ion-toolbar *ngIf="auth.userInfo.isConfirmed&&auth.userInfo.email && showAll && media.smallDevice" class="buttonBar">
        <ion-row *ngIf="showAll">
            <ion-col size="4">
                <ion-card pointer noMargin basicPadding center (click)="showAll=''" [ngStyle]="{'background': !showAll ? 'var(--ion-color-primary)' : 'white','color': !showAll ? 'white' : 'var(--ion-color-primary)'}">
                    <ion-card-title>
                        <fa-icon [icon]="icon.get('faChevronLeft')" style="margin-right:20px;"></fa-icon>
                        <span>Terug</span>
                    </ion-card-title>
                </ion-card>
            </ion-col>
            <ion-col size="4">
                <ion-card pointer noMargin basicPadding center (click)="showAll='modules'" [ngStyle]="{'background': showAll=='modules' ? 'var(--ion-color-primary)' : 'white','color': showAll=='modules' ? 'var(--ion-color-primary-contrast)' : 'var(--ion-color-primary)'}">
                    <ion-card-title>Modules</ion-card-title>
                </ion-card>
            </ion-col>
            <ion-col size="4">
                <ion-card pointer noMargin basicPadding center (click)="showAll='cases'" [ngStyle]="{'background': showAll=='cases' ? 'var(--ion-color-primary)' : 'white','color': showAll=='cases' ? 'var(--ion-color-primary-constrast)' : 'var(--ion-color-primary)'}">
                    <ion-card-title>Cases</ion-card-title>
                </ion-card>
            </ion-col>
        </ion-row>
        <div flex fullwidth center-ver style="padding:5px 10px">
            <ion-searchbar [(ngModel)]="searchTerm" placeholder="Zoeken" fullwidth [ngStyle]="{'background' : media.smallDevice ? 'white' : 'initial'}"></ion-searchbar>
            <ion-icon titleIcon name="close" style="min-width:30px" font-20 pointer (click)="clearFilter()" *ngIf="!filterIsEmpty"></ion-icon>
            <ion-icon titleIcon name="filter" style="min-width:30px;margin-right:10px" font-20 pointer (click)="showFilterSmall = !showFilterSmall"></ion-icon>
            
            
        </div>
    </ion-toolbar>

    <ion-toolbar *ngIf="auth.userInfo.isConfirmed&&auth.userInfo.email && showAll && !media.smallDevice" class="buttonBar">
        <div style="width:100%" center-hor flex>
            <div style="max-width: 1350px;width:100%;padding:5px 15px 0px 15px">
                <ion-row *ngIf="showAll">
                    <ion-col size="3" noPadding></ion-col>
                    <ion-col size="2" noPadding>
                        <ion-card pointer center class="topButton" (click)="showAll=''" [ngStyle]="{'background': !showAll ? 'var(--ion-color-primary)' : 'white','color': !showAll ? 'white' : 'var(--ion-color-primary)'}">
                            <ion-card-title>
                                <fa-icon [icon]="icon.get('faChevronLeft')" style="margin-right:20px;"></fa-icon>
                                <span>Terug</span>
                            </ion-card-title>
                        </ion-card>
                    </ion-col>
                    <ion-col size="2" noPadding>
                        <ion-card pointer center class="topButton" (click)="showAll='modules'" [ngStyle]="{'background': showAll=='modules' ? 'var(--ion-color-primary)' : 'white','color': showAll=='modules' ? 'var(--ion-color-primary-contrast)' : 'var(--ion-color-primary)'}">
                            <ion-card-title>Modules</ion-card-title>
                        </ion-card>
                    </ion-col>
                    <ion-col size="2" noPadding>
                        <ion-card pointer center class="topButton" (click)="showAll='cases'" [ngStyle]="{'background': showAll=='cases' ? 'var(--ion-color-primary)' : 'white','color': showAll=='cases' ? 'var(--ion-color-primary-contrast)' : 'var(--ion-color-primary)'}">
                            <ion-card-title>Cases</ion-card-title>
                        </ion-card>
                    </ion-col>
                    <ion-col size="3" noPadding>
                        <div flex fullwidth center-ver style="padding:10px">
                            <ion-searchbar [(ngModel)]="searchTerm" placeholder="Zoeken" fullwidth noMargin noPadding></ion-searchbar>
                        </div>
                    </ion-col>
                </ion-row>
            </div>
        </div>
    </ion-toolbar>

    <div *ngIf="showFilterSmall" class="filterSmall">
        <div *ngFor="let type of infoService.conversation_types">
            <ion-item lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="type.selected = !type.selected">
                <ion-checkbox slot="start" [(ngModel)]="type.selected" noPointerEvents></ion-checkbox>
                <ion-label>{{ type[translate.currentLang] }}</ion-label>
            </ion-item>
            <div class="innerSelectCase" [ngStyle]="{'max-height': type.selected ? (type.showFull ? '800px' :'300px') : '0px','padding-bottom': type.selected && type.showFull ? '50px' : '0px'}">
                <ion-item lines="none" font-18 weight400 noMargin class="selectCaseItem innerSelectCaseItem" *ngFor="let subject of type.subjects" (click)="subject.selected = !subject.selected">
                    <ion-checkbox slot="start" [(ngModel)]="subject.selected" noPointerEvents></ion-checkbox>
                    <ion-label>{{ subject[translate.currentLang] }}</ion-label>
                </ion-item>
                <ion-item lines="none" button font-18 weight400 noMargin fullwidth class="selectCaseItem innerSelectCaseItem innerSelectMoreToggle" *ngIf="type.subjects.length>5" (click)="type.showFull = !type.showFull" [ngStyle]="{'top': !type.showFull ? '220px' : 'calc(100% - 50px)'}">
                    <!-- <ion-checkbox slot="start" noPointerEvents></ion-checkbox> -->
                    <ion-label style="margin-left:30px;opacity:0.5" italic text-medium>{{ type.showFull ? 'Toon minder' : 'Toon alles' }}</ion-label>
                    <!-- <fa-icon slot="end" [icon]="icon.get('faChevronDown')" [ngStyle]="{'transform': type.showFull ? 'rotate(180deg)' : 'none'}"></fa-icon> -->
                </ion-item>
            </div>
        </div>
    </div>

    <ion-grid class="mainGrid">
        <ion-row *ngIf="!showAll">        
            <ion-col size="12" class="selectColumn" [ngStyle]="{'max-height':'calc((var(--vh, 1vh) * 100) - 51px)'}">
                <ion-row *ngIf="auth.activeCourses?.length">
                    <ion-col [size]="!media.smallDevice ? 6 : 12"  >
                        <ion-card align-left nobackground font-16 noMargin>
                            <ion-card-header>
                                <ion-card-title uppercase weight700>
                                    <span>Jouw modules</span>
                                </ion-card-title>
                            </ion-card-header>
                        </ion-card>
                    </ion-col>
                </ion-row>

               <ion-row marginBottom *ngIf="auth.activeCourses?.length">
                    <ng-container *ngIf="!media.smallDevice">
                        <ion-col [size]="helper.cardSize" *ngFor="let course of auth.activeCourses">
            
                            <ion-card noPadding pointer (click)="nav.go('course/'+course.id)" fullheight style="border:solid 3px var(--ion-color-primary)">
                                <ion-card-content noPadding fullHeight>
                                    <div backgroundImage class="avatarImage" *ngIf="course.photo" [ngStyle]="{'background-image': 'url(' + course.photo + ')'}"></div>
                                    <div backgroundImage class="avatarImage" *ngIf="!course.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <!-- <div flex center center-ver center-hor style="height:calc(100% - 200px)">
                                        <ion-card-header>
                                            <ion-card-title font-18 weight600>{{course.title}}</ion-card-title>
                                        </ion-card-header>
                                    </div> -->
                                    <div flex center center-ver center-hor style="height:calc(100% - 200px)">
                                        <ion-card-header>
                                            <ion-card-title font-18 weight600>
                                                <div class="continueCaseText">
                                                    Ga verder met je module
                                                </div>
                                                <div>
                                                    {{course.title}}        
                                                </div>
                                            </ion-card-title>
                                        </ion-card-header>
                                    </div>
                                </ion-card-content>
                            </ion-card>
            
                            <!-- <ion-card (click)="nav.go('course/'+course.id)" pointer font16 weight700 tab basicPadding>{{course.title}}</ion-card>    -->
                        </ion-col>
                    </ng-container>

                    <ng-container *ngIf="media.smallDevice">
                        <ion-col  [size]="helper.cardSize" *ngFor="let course of auth.activeCourses">
                            <ion-card noMargin basicPadding pointer flex align-top style="border-radius:16px;width:calc(100% - 10px);border:solid 3px var(--ion-color-primary)" (click)="subscribeCourse(course)">
                                <div style="width:100px;">
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="course.photo" [ngStyle]="{'background-image': 'url(' + course.photo + ')'}"></div>
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="!course.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    
                                </div>
                                
                                <div flex flex-column fullwidth style="height: 135px;">
                                    <ion-card-header style="padding:0px 10px;flex-direction:column" >
                                        <ion-card-title font-18 weight600>
                                            <div class="continueCaseText">
                                                Ga verder met je module
                                            </div>
                                            <div font-16>
                                                {{course.title}}        
                                            </div>
                                            <div style="font-size:14px;font-style:italic;font-weight:400;margin-top:10px">
                                                Gestart op {{helper.showLocalDate(course.startdate,'',0)}}
                                            </div>
                                        </ion-card-title>
                                    </ion-card-header>
                                    <span class="spacer"></span>
                                    <div flex center-ver fullwidth class="arrowDiv">
                                        <span class="spacer"></span>
                                        <span font-18 text-secondary weight600 relative style="top:-2px">Ga verder</span>
                                        <fa-icon titleIcon font-24 [icon]="icon.get('faArrowRight')"></fa-icon>
                                    </div>
                                </div>

                            </ion-card>

                        </ion-col>
                    </ng-container>

                </ion-row>
        
                <ion-row  *ngIf="auth.publicCourses?.length && (auth.publicCourses | filterKey : '!id' : auth.userInfo.activeCourseIds).length">
                    <ion-col [size]="!media.smallDevice ? 6 : 12" >
                        <ion-card align-left nobackground font-16 noMargin>
                            <ion-card-header>
                                <ion-card-title uppercase weight700>
                                    <span>Interessante modules voor jou</span>
                                </ion-card-title>
                            </ion-card-header>
                        </ion-card>
                    </ion-col>
                </ion-row> 

                <ion-row marginBottom *ngIf="auth.publicCourses?.length">

                    <ng-container *ngIf="!media.smallDevice">
                        <ion-col  [size]="helper.cardSize" *ngFor="let course of auth.publicCourses | filterKey : '!id' : auth.userInfo.activeCourseIds | maxLength : 3">
                        
                            <ion-card noPadding pointer fullheight>
                                <ion-card-content noPadding fullHeight>
                                    <div backgroundImage class="avatarImage" *ngIf="course.photo" [ngStyle]="{'background-image': 'url(' + course.photo + ')'}"></div>
                                    <div backgroundImage class="avatarImage" *ngIf="!course.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <div flex center center-ver center-hor style="height:calc(100% - 275px)">
                                        <ion-card-header>
                                            <ion-card-title font-18 weight600>{{course.title}}</ion-card-title>
                                            <ion-card-subtitle font-14 weight400>{{course.user_info | maxLength : 60 : true}}</ion-card-subtitle>
                                        </ion-card-header>
                                    </div>
                                    <div center flex center-ver center-hor>
                                
                                        <div class="cardPrice">{{helper.currencyChar('EUR (â‚¬)')}} {{course.price | number : '1.2-2'}}</div>
                                        <span class="spacer"></span>
                                        <ion-button class="saveButton cardButton" fill="outline" size="small" (click)="subscribeCourse(course)">Lees meer</ion-button>
                                    </div>
                                </ion-card-content>
                            </ion-card>
                        </ion-col>
                    </ng-container>

                    <ng-container *ngIf="media.smallDevice">
                        <ion-col  [size]="helper.cardSize" *ngFor="let course of auth.publicCourses | filterKey : '!id' : auth.userInfo.activeCourseIds | maxLength : 3">
                            <ion-card noMargin basicPadding pointer flex align-top style="border-radius:16px;width:calc(100% - 10px)" (click)="subscribeCourse(course)">
                                <div style="width:100px;">
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="course.photo" [ngStyle]="{'background-image': 'url(' + course.photo + ')'}"></div>
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="!course.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating>
                                    
                                </div>
                                
                                <div flex flex-column fullwidth style="height: 135px;">
                                    <ion-card-header style="padding:0px 10px;flex-direction:column" >
                                        <ion-card-title font-18 weight700>{{course.title}}</ion-card-title>
                                        <ion-card-subtitle style="text-transform:none;" font-14 weight400>{{course.description | maxLength : 80 : true}}</ion-card-subtitle>
                                    </ion-card-header>
                                    <span class="spacer"></span>
                                    <div flex center-ver fullwidth class="arrowDiv">
                                        <span class="spacer"></span>
                                        <span font-18 text-secondary weight600 relative style="top:-2px">Lees meer</span>
                                        <fa-icon titleIcon font-24 [icon]="icon.get('faArrowRight')"></fa-icon>
                                    </div>
                                </div>
                            </ion-card>

                        </ion-col>
                    </ng-container>

                    <ion-col *ngIf="((auth.publicCourses | filterKey : '!id' : auth.userInfo.activeCourseIds).length>0)&&!media.smallDevice">
                        <ion-card style="background:none;" flex fullheight center-ver pointer (click)="showAll='courses'" [ngStyle]="{'justify-content': media.smallDevice ? 'center' : 'initial'}">
                            <fa-icon [icon]="icon.get('faChevronRight')" style="font-size:64px"[ngStyle]="{'transform': media.smallDevice ? 'rotate(90deg)' : 'none'}"></fa-icon>
                        </ion-card>
                    </ion-col>

                    <ion-col *ngIf="((auth.publicCourses | filterKey : '!id' : auth.userInfo.activeCourseIds).length>3)&&media.smallDevice">
                        <ion-card noBackground style="margin-top:10px;" flex fullheight center-ver pointer (click)="showAll='courses'" [ngStyle]="{'justify-content': media.smallDevice ? 'center' : 'initial'}">
                            <span font-16 >Bekijk alles</span>     
                            <fa-icon titleIcon font-16 [icon]="icon.get('faArrowRight')"></fa-icon>
                        </ion-card>
                    </ion-col>

                </ion-row>

                <ion-row *ngIf="activeConversations.length||cases.all?.length">
                    <ion-col [size]="!media.smallDevice ? 6 : 12" >
                        <ion-card align-left nobackground font-16 noMargin>
                            <ion-card-header>
                                <ion-card-title uppercase weight600>
                                    <span>Cases voor jou</span>
                                </ion-card-title>
                            </ion-card-header>
                        </ion-card>
                    </ion-col>
                </ion-row>

                <ion-row marginBottom *ngIf="activeConversations.length||cases.all?.length"> 

                    <ng-container *ngIf="!media.smallDevice">
                        <ion-col [size]="helper.cardSize" *ngFor="let activeConversation of activeConversations">
                            <ion-card pointer fullheight style="border:solid 3px var(--ion-color-primary)">
                                <ion-card-content noPadding>
                                    <fa-icon removeIcon [icon]="icon.get('faTrashAlt')" font-18 trash (click)="removeActiveConversation($event,activeConversation)"></fa-icon>
            
                                    <div backgroundImage class="avatarImage" *ngIf="activeConversation.photo" [ngStyle]="{'background-image': 'url(' + activeConversation.photo + ')'}"></div>
                                    <div backgroundImage class="avatarImage" *ngIf="!activeConversation.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <div flex center center-ver center-hor style="height:calc(100% - 200px)">
                                        <ion-card-header>
                                            <ion-card-title font-18 weight600>
                                                <div class="continueCaseText">
                                                    Ga verder met je gesprek met
                                                </div>
                                                <div>
                                                    {{activeConversation.title}}        
                                                </div>
                                            </ion-card-title>
                                        </ion-card-header>
                                    </div>
                                    <div center flex center-ver center-hor style="margin-top: -10px;">
                                        <ion-button class="saveButton cardButton" fill="outline" size="small" (click)="continueConversation(activeConversation)">Ga verder</ion-button>
                                    </div>
                                    <div style="font-size:14px;font-style:italic;font-weight:400;margin-top:10px;text-align:center">
                                        Gestart op {{helper.showLocalDate(activeConversation.timestamp,'',0,true)}}
                                    </div>
                                </ion-card-content>
                            </ion-card>
                        </ion-col>
                    </ng-container>

                    <ng-container *ngIf="media.smallDevice">
                        <ion-col [size]="helper.cardSize" *ngFor="let activeConversation of activeConversations">
                            <ion-card noMargin basicPadding pointer flex align-top style="border-radius:16px;width:calc(100% - 10px);border:solid 3px var(--ion-color-primary)" (click)="continueConversation(activeConversation)">
                                <div style="width:100px;">
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="activeConversation.photo" [ngStyle]="{'background-image': 'url(' + activeConversation.photo + ')'}"></div>
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="!activeConversation.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <!-- <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating> -->
                                    
                                </div>
                                
                                <div flex flex-column fullwidth style="height: 135px;">
                                    <ion-card-header style="padding:0px 10px;flex-direction:column" >
                                        <ion-card-title font-18 weight600>
                                            <div class="continueCaseText">
                                                Ga verder met je gesprek met
                                            </div>
                                            <div>
                                                {{activeConversation.title}}        
                                            </div>
                                            <div style="font-size:14px;font-style:italic;font-weight:400;margin-top:10px">
                                                Gestart op {{helper.showLocalDate(activeConversation.timestamp,'',0,true)}}
                                            </div>
                                        </ion-card-title>
                                    </ion-card-header>
                                    <span class="spacer"></span>
                                    <div flex center-ver fullwidth class="arrowDiv">
                                        <fa-icon titleIcon [icon]="icon.get('faTrashAlt')" font-24 trash (click)="removeActiveConversation($event,activeConversation)"></fa-icon>
                                        <span class="spacer"></span>
                                        <span font-18 text-secondary weight600 relative style="top:-2px">Ga verder</span>
                                        <fa-icon titleIcon font-24 [icon]="icon.get('faArrowRight')"></fa-icon>
                                    </div>
                                </div>
                            </ion-card>
                        </ion-col>
                    </ng-container>

                    <ng-container *ngIf="!media.smallDevice">
                        <ion-col [size]="helper.cardSize"  *ngFor="let caseItem of cases.all | filterKey : '!id' : activeConversationsCaseIds | maxLength : (3 - activeConversationsCaseIds.length)">
                            <ion-card noPadding pointer fullheight>
                                <ion-card-content noPadding fullHeight flex flex-column>
                                    <div backgroundImage class="avatarImage" *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}"></div>
                                    <div backgroundImage class="avatarImage" *ngIf="!caseItem.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <div flex center center-ver center-hor>
                                        <ion-card-header>
                                            <ion-card-title font-18 weight600>{{caseItem.title}}</ion-card-title>
                                            <ion-card-subtitle font-14 weight400>{{caseItem.user_info | maxLength : 60 : true}}</ion-card-subtitle>
                                        </ion-card-header>
                                    </div>
                                    <span class="spacer"></span>
                                    <div center flex center-ver center-hor style="margin-top: -20px;">
                                        <ion-button class="saveButton cardButton" fill="outline" size="small" (click)="startConversation(caseItem)">Start gesprek</ion-button>
                                    </div>
                                    <div style="padding: 5px 20%;">
                                        <app-star-rating style="padding:0;" [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating>
                                    </div>
                                </ion-card-content>
                            </ion-card>
                        </ion-col>
                    </ng-container>

                    <ng-container *ngIf="media.smallDevice">
                        <ion-col [size]="12" *ngFor="let caseItem of cases.all | filterKey : '!id' : activeConversationsCaseIds | maxLength : (3 - activeConversationsCaseIds.length)">
                            <ion-card noMargin basicPadding pointer flex align-top style="border-radius:16px;width:calc(100% - 10px)" (click)="startConversation(caseItem)">
                                <div style="width:100px;">
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}"></div>
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="!caseItem.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating>
                                    
                                </div>
                                
                                <div flex flex-column fullwidth style="height: 135px;">
                                    <ion-card-header style="padding:0px 10px;flex-direction:column" >
                                        <ion-card-title font-18 weight600>{{caseItem.title}}</ion-card-title>
                                        <ion-card-subtitle style="text-transform:none" font-14 weight500>{{caseItem.user_info | maxLength : 80 : true}}</ion-card-subtitle>
                                    </ion-card-header>
                                    <span class="spacer"></span>
                                    <div flex center-ver fullwidth class="arrowDiv">
                                        <span class="spacer"></span>
                                        <span font-18 text-secondary weight600 relative style="top:-2px">Start gesprek</span>
                                        <fa-icon font-24 titleIcon [icon]="icon.get('faArrowRight')"></fa-icon>
                                    </div>
                                </div>
                            </ion-card>
                        </ion-col>

                    </ng-container>

                    <ion-col *ngIf="(activeConversations.length + cases.all.length>3)&&!media.smallDevice">
                        <ion-card style="background:none;" flex fullheight center-ver pointer (click)="showAll='cases'" [ngStyle]="{'justify-content': media.smallDevice ? 'center' : 'initial'}">
                            <fa-icon [icon]="icon.get('faChevronRight')" style="font-size:64px"[ngStyle]="{'transform': media.smallDevice ? 'rotate(90deg)' : 'none'}"></fa-icon>
                        </ion-card>
                    </ion-col>

                    <ion-col *ngIf="(activeConversations.length + cases.all.length>3)&&media.smallDevice">
                        <ion-card noBackground style="margin-top:10px;" flex fullheight center-ver pointer (click)="showAll='cases'" [ngStyle]="{'justify-content': media.smallDevice ? 'center' : 'initial'}">
                            <span font-16 >Bekijk alles</span>     
                            <fa-icon titleIcon font-16 [icon]="icon.get('faArrowRight')"></fa-icon>
                        </ion-card>
                    </ion-col>

                </ion-row>

            </ion-col>
        </ion-row>

        <ion-row *ngIf="showAll=='cases'" [ngStyle]="{'margin-top': media.smallDevice ? '106px' : '60px'}">
            
            <ion-col [size]="media.smallDevice ? 12 : 3" class="selectColumn" *ngIf="!media.smallDevice" style="margin-top:15px">

                <div style="background:white;padding:10px 0px;border-radius:16px" marginBottom>
                    <div basicPadding>
                        <ion-card-title uppercase weight700 font-20 text-secondary flex center-ver>
                            <span>Filter</span>
                            <span class="spacer"></span>
                            <ion-icon titleIcon name="close" style="min-width:30px" font-20 pointer (click)="clearFilter()" *ngIf="!filterIsEmpty"></ion-icon>
                            <ion-icon titleIcon name="filter" style="min-width:30px" font-20 pointer *ngIf="filterIsEmpty"></ion-icon>
                            
                        </ion-card-title>
                    </div>
                    <div *ngFor="let type of infoService.conversation_types">
                        <ion-item lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="type.selected = !type.selected">
                            <ion-checkbox slot="start" [(ngModel)]="type.selected" noPointerEvents></ion-checkbox>
                            <ion-label>{{ type[translate.currentLang] }}</ion-label>
                        </ion-item>
                        <div class="innerSelectCase" [ngStyle]="{'max-height': type.selected ? (type.showFull ? '800px' :'300px') : '0px','padding-bottom': type.selected && type.showFull ? '50px' : '0px'}">
                            <ion-item lines="none" font-18 weight400 noMargin class="selectCaseItem innerSelectCaseItem" *ngFor="let subject of type.subjects" (click)="subject.selected = !subject.selected">
                                <ion-checkbox slot="start" [(ngModel)]="subject.selected" noPointerEvents></ion-checkbox>
                                <ion-label>{{ subject[translate.currentLang] }}</ion-label>
                            </ion-item>
                            <ion-item lines="none" button font-18 weight400 noMargin fullwidth class="selectCaseItem innerSelectCaseItem innerSelectMoreToggle" *ngIf="type.subjects.length>5" (click)="type.showFull = !type.showFull" [ngStyle]="{'top': !type.showFull ? '240px' : 'calc(100% - 50px)'}">
                                <!-- <ion-checkbox slot="start" noPointerEvents></ion-checkbox> -->
                                <ion-label style="margin-left:30px;opacity:0.5" italic text-medium>{{ type.showFull ? 'Toon minder' : 'Toon alles' }}</ion-label>
                                <!-- <fa-icon slot="end" [icon]="icon.get('faChevronDown')" [ngStyle]="{'transform': type.showFull ? 'rotate(180deg)' : 'none'}"></fa-icon> -->
                            </ion-item>
                        </div>
                    </div>
                </div>

                

            </ion-col>


            <ion-col [size]="media.smallDevice ? 12 : 9"  class="detailColumn">

                <ion-row *ngIf="activeConversations?.length">
                    <ng-container *ngIf="!media.smallDevice">

                        <ion-col [size]="helper.cardSizeSmall" *ngFor="let activeConversation of activeConversations">
                            <ion-card basicPadding pointer fullheight (click)="continueConversation(activeConversation)" style="border:solid 3px var(--ion-color-primary)">
                                <ion-card-content noPadding>
                                    <fa-icon removeIcon [icon]="icon.get('faTrashAlt')" font-18 trash (click)="removeActiveConversation($event,activeConversation)"></fa-icon>
            
                                    <div backgroundImage class="avatarImage" *ngIf="activeConversation.photo" [ngStyle]="{'background-image': 'url(' + activeConversation.photo + ')'}"></div>
                                    <div backgroundImage class="avatarImage" *ngIf="!activeConversation.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <div flex center center-ver center-hor style="height:calc(100% - 200px)">
                                        <ion-card-header>
                                            <ion-card-title font-18 weight600>
                                                <div class="continueCaseText">
                                                    Ga verder met je gesprek met
                                                </div>
                                                <div>
                                                    {{activeConversation.title}}        
                                                </div>
                                            </ion-card-title>
                                        </ion-card-header>
                                    </div>
                                </ion-card-content>
                            </ion-card>
                        </ion-col>
                    </ng-container>

                    <ng-container *ngIf="media.smallDevice">
                        <ion-col [size]="helper.cardSize" *ngFor="let activeConversation of activeConversations">
                            <ion-card noMargin basicPadding pointer flex align-top style="border-radius:16px;width:calc(100% - 10px);border:solid 3px var(--ion-color-primary)" (click)="continueConversation(activeConversation)">
                                <div style="width:100px;">
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="activeConversation.photo" [ngStyle]="{'background-image': 'url(' + activeConversation.photo + ')'}"></div>
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="!activeConversation.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <!-- <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating> -->
                                    
                                </div>
                                
                                <div flex flex-column fullwidth style="height: 135px;">
                                    <ion-card-header style="padding:0px 10px;flex-direction:column" >
                                        <ion-card-title font-18 weight600>
                                            <div class="continueCaseText">
                                                Ga verder met je gesprek met
                                            </div>
                                            <div>
                                                {{activeConversation.title}}        
                                            </div>
                                            <div style="font-size:14px;font-style:italic;font-weight:400;margin-top:10px;text-transform:none;">
                                                Gestart op {{helper.showLocalDate(activeConversation.timestamp,'',0,true)}}
                                            </div>
                                        </ion-card-title>
                                    </ion-card-header>
                                    <span class="spacer"></span>
                                    <div flex center-ver fullwidth class="arrowDiv">
                                        <fa-icon titleIcon [icon]="icon.get('faTrashAlt')" font-24 trash (click)="removeActiveConversation($event,activeConversation)"></fa-icon>
                                        <span class="spacer"></span>
                                        <span font-18 text-secondary weight600 relative style="top:-2px">Ga verder</span>
                                        <fa-icon titleIcon font-24 [icon]="icon.get('faArrowRight')"></fa-icon>
                                    </div>
                                </div>
                            </ion-card>
                        </ion-col>
                    </ng-container>

                </ion-row>
                
                
                <ion-row>

                    <ion-col [size]="helper.cardSizeSmall" *ngIf="!(cases.all | caseFilter: currentFilterTypes.types : currentFilterTypes.subjectTypes : extraFilters.open_to_user | filterSearch : searchTerm : false : ['title']).length && !activeConversations?.length">
                        <ion-card noPadding pointer fullheight>
                            <ion-card-content noPadding fullHeight flex center-hor>
                                <div flex center center-ver center-hor>
                                    <ion-card-header>
                                        <ion-card-title font-18 weight600>Geen resultaten</ion-card-title>
                                    </ion-card-header>
                                </div>
                            </ion-card-content>
                        </ion-card>
                    </ion-col>

                    <ng-container *ngIf="!media.smallDevice">
                        <ion-col [size]="helper.cardSizeSmall" *ngFor="let caseItem of cases.all | caseFilter: currentFilterTypes.types : currentFilterTypes.subjectTypes : extraFilters.open_to_user | filterSearch : searchTerm : false : ['title'] ">
                            <ion-card noPadding pointer fullheight>
                                <ion-card-content noPadding fullHeight>
                                    <div backgroundImage class="avatarImage" *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}"></div>
                                    <div backgroundImage class="avatarImage" *ngIf="!caseItem.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <div flex center center-ver center-hor style="height:calc(100% - 275px)">
                                        <ion-card-header>
                                            <ion-card-title font-18 weight600>{{caseItem.title}}</ion-card-title>
                                            <ion-card-subtitle font-14 weight400>{{caseItem.user_info | maxLength : 60 : true}}</ion-card-subtitle>
                                        </ion-card-header>
                                    </div>
                                    <div center flex center-ver center-hor>
                                        <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating>

                                        <ion-button class="saveButton cardButton" fill="outline" size="small" (click)="startConversation(caseItem)">Start gesprek</ion-button>
                                    </div>
                                </ion-card-content>
                            </ion-card>

                        </ion-col>
                    
                    </ng-container>

                    <ng-container *ngIf="media.smallDevice">
                        <ion-col [size]="12" *ngFor="let caseItem of cases.all | caseFilter: currentFilterTypes.types : currentFilterTypes.subjectTypes : extraFilters.open_to_user | filterSearch : searchTerm : false : ['title']">
                            <ion-card noMargin basicPadding pointer flex align-top style="border-radius:16px;width:calc(100% - 10px)" (click)="startConversation(caseItem)">
                                <div style="width:100px;">
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}"></div>
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="!caseItem.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating>
                                    
                                </div>
                                
                                <div flex flex-column fullwidth style="height: 135px;">
                                    <ion-card-header style="padding:0px 10px;flex-direction:column" >
                                        <ion-card-title font-18 weight600>{{caseItem.title}}</ion-card-title>
                                        <ion-card-subtitle style="text-transform:none" font-14 weight500>{{caseItem.user_info | maxLength : 80 : true}}</ion-card-subtitle>
                                    </ion-card-header>
                                    <span class="spacer"></span>
                                    <div flex center-ver fullwidth class="arrowDiv">
                                        <span class="spacer"></span>
                                        <span font-18 text-secondary weight600 relative style="top:-2px">Start gesprek</span>
                                        <fa-icon font-24 titleIcon [icon]="icon.get('faArrowRight')"></fa-icon>
                                    </div>
                                </div>
                            </ion-card>
                        </ion-col>
    
                    </ng-container>

                </ion-row>


            </ion-col>




            <ion-col size="12" class="selectColumn" hidden>
                <ion-row>
                    <ion-col [size]="!media.smallDevice ? 6 : 12">
                        <ion-card align-left style="background:none;">
                            <ion-card-header>
                                <ion-card-title uppercase weight700 font-24 pointer (click)="showAll=''">
                                    <fa-icon [icon]="icon.get('faChevronLeft')" style="margin-right:20px;"></fa-icon>
                                    <span>Cases</span>
                                </ion-card-title>
                            </ion-card-header>
                        </ion-card>
                    </ion-col>
                </ion-row>
            </ion-col>

            
            <ion-col hidden [size]="helper.cardSize" class="selectColumn" *ngFor="let activeConversation of activeConversations">
                <ion-card basicPadding pointer (click)="continueConversation(activeConversation)" style="border:solid 3px var(--ion-color-primary)">
                    <ion-card-content noPadding>
                        <fa-icon removeIcon [icon]="icon.get('faTrashAlt')" font-18 trash (click)="removeActiveConversation($event,activeConversation)"></fa-icon>

                        <div backgroundImage class="avatarImage" *ngIf="activeConversation.photo" [ngStyle]="{'background-image': 'url(' + activeConversation.photo + ')'}"></div>
                        <div backgroundImage class="avatarImage" *ngIf="!activeConversation.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                        <div flex center center-ver center-hor style="height:calc(100% - 200px)">
                            <ion-card-header>
                                <ion-card-title font-18 weight600>
                                    <div class="continueCaseText">
                                        Ga verder met je gesprek met
                                    </div>
                                    <div>
                                        {{activeConversation.title}}        
                                    </div>
                                </ion-card-title>
                            </ion-card-header>
                        </div>
                    </ion-card-content>
                </ion-card>
            </ion-col>


            <ion-col hidden size="12" class="selectColumn" >

                <ion-row> 
                    <ion-col size="12" class="selectColumn" *ngIf="activeCategory">
                        <div *ngFor="let theme of activeThemes(activeCategory)">
                            <ion-row *ngIf="theme&&themeInPreferences(theme.id)">
                                <ion-col [size]="!media.smallDevice ? 6 : 12"  *ngIf="theme">
                                    <ion-card align-left nobackground font-16 noMargin>
                                        <ion-card-header>
                                            <ion-card-title weight700>
                                                <fa-icon [icon]="icon.get(theme.icon)" ></fa-icon>
                                                <span> {{theme.title | uppercase}}</span>
                                            </ion-card-title>
                                        </ion-card-header>
                                    </ion-card>
                                </ion-col>
                            </ion-row>
                            <ion-row *ngIf="theme&&themeInPreferences(theme.id)" marginBottom>
                                <ion-col [size]="helper.cardSize"  *ngFor="let caseItem of cases.all | filterKey : 'theme' : theme.id | filterKey : 'conversation' : activeCategory">
                                    <ion-card noPadding pointer fullheight>
                                        <ion-card-content noPadding fullHeight>
                                            <div backgroundImage class="avatarImage" *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}"></div>
                                            <div backgroundImage class="avatarImage" *ngIf="!caseItem.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                            <div flex center center-ver center-hor style="height:calc(100% - 275px)">
                                                <ion-card-header>
                                                    <ion-card-title font-18 weight600>{{caseItem.title}}</ion-card-title>
                                                    <ion-card-subtitle font-14 weight400>{{caseItem.user_info | maxLength : 60 : true}}</ion-card-subtitle>
                                                </ion-card-header>
                                            </div>
                                            <div center flex center-ver center-hor>
                                                <ion-button class="saveButton creditButton" fill="outline" size="small">
                                                    <div>
                                                        <div>{{caseItem.credits}}</div>
                                                        <div font-12 text-medium>Credits</div>
                                                    </div>
                                                </ion-button>
                                                <ion-button class="saveButton cardButton" fill="outline" size="small" (click)="startConversation(caseItem)">Start gesprek</ion-button>
                                            </div>
                                        </ion-card-content>
                                    </ion-card>
                                </ion-col>
                            </ion-row>
                        </div>
                    </ion-col>
                </ion-row>


            </ion-col>
        </ion-row>
    
        <ion-row *ngIf="showAll=='courses'" [ngStyle]="{'margin-top': media.smallDevice ? '106px' : '60px'}">

            <ion-col [size]="media.smallDevice ? 12 : 3" class="selectColumn" *ngIf="!media.smallDevice" style="margin-top:15px">

                <div style="background:white;padding:10px 0px;border-radius:16px" marginBottom>
                    <div basicPadding>
                        <ion-card-title uppercase weight700 font-20 text-secondary flex center-ver>
                            <span>Filter</span>
                            <span class="spacer"></span>
                            <ion-icon titleIcon name="close" style="min-width:30px" font-20 pointer (click)="clearFilter()" *ngIf="!filterIsEmpty"></ion-icon>
                            <ion-icon titleIcon name="filter" style="min-width:30px" font-20 pointer *ngIf="filterIsEmpty"></ion-icon>
                            
                        </ion-card-title>
                    </div>
                    <div *ngFor="let type of infoService.conversation_types">
                        <ion-item lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="type.selected = !type.selected">
                            <ion-checkbox slot="start" [(ngModel)]="type.selected" noPointerEvents></ion-checkbox>
                            <ion-label>{{ type[translate.currentLang] }}</ion-label>
                        </ion-item>
                        <div class="innerSelectCase" [ngStyle]="{'max-height': type.selected ? (type.showFull ? '800px' :'300px') : '0px','padding-bottom': type.selected && type.showFull ? '50px' : '0px'}">
                            <ion-item lines="none" font-18 weight400 noMargin class="selectCaseItem innerSelectCaseItem" *ngFor="let subject of type.subjects" (click)="subject.selected = !subject.selected">
                                <ion-checkbox slot="start" [(ngModel)]="subject.selected" noPointerEvents></ion-checkbox>
                                <ion-label>{{ subject[translate.currentLang] }}</ion-label>
                            </ion-item>
                            <ion-item lines="none" button font-18 weight400 noMargin fullwidth class="selectCaseItem innerSelectCaseItem innerSelectMoreToggle" *ngIf="type.subjects.length>5" (click)="type.showFull = !type.showFull" [ngStyle]="{'top': !type.showFull ? '240px' : 'calc(100% - 50px)'}">
                                <ion-label style="margin-left:30px;opacity:0.5" italic text-medium>{{ type.showFull ? 'Toon minder' : 'Toon alles' }}</ion-label>
                            </ion-item>
                        </div>
                    </div>
                </div>

                

            </ion-col>

            <ion-col [size]="media.smallDevice ? 12 : 9"  class="detailColumn">
                <ion-row marginBottom *ngIf="auth.activeCourses?.length">
                    <ng-container *ngIf="!media.smallDevice">
                        <ion-col [size]="helper.cardSizeSmall" *ngFor="let course of auth.activeCourses">
            
                            <ion-card noPadding pointer (click)="nav.go('course/'+course.id)" fullheight style="border:solid 3px var(--ion-color-primary)">
                                <ion-card-content noPadding fullHeight>
                                    <div backgroundImage class="avatarImage" *ngIf="course.photo" [ngStyle]="{'background-image': 'url(' + course.photo + ')'}"></div>
                                    <div backgroundImage class="avatarImage" *ngIf="!course.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <!-- <div flex center center-ver center-hor style="height:calc(100% - 200px)">
                                        <ion-card-header>
                                            <ion-card-title font-18 weight600>{{course.title}}</ion-card-title>
                                        </ion-card-header>
                                    </div> -->
                                    <div flex center center-ver center-hor style="height:calc(100% - 200px)">
                                        <ion-card-header>
                                            <ion-card-title font-18 weight600>
                                                <div class="continueCaseText">
                                                    Ga verder met je module
                                                </div>
                                                <div>
                                                    {{course.title}}        
                                                </div>
                                            </ion-card-title>
                                        </ion-card-header>
                                    </div>
                                </ion-card-content>
                            </ion-card>
            
                            <!-- <ion-card (click)="nav.go('course/'+course.id)" pointer font16 weight700 tab basicPadding>{{course.title}}</ion-card>    -->
                        </ion-col>
                    </ng-container>
    
                    <ng-container *ngIf="media.smallDevice">
                        <ion-col  [size]="helper.cardSize" *ngFor="let course of auth.activeCourses">
                            <ion-card noMargin basicPadding pointer flex align-top style="border-radius:16px;width:calc(100% - 10px);border:solid 3px var(--ion-color-primary)" (click)="subscribeCourse(course)">
                                <div style="width:100px;">
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="course.photo" [ngStyle]="{'background-image': 'url(' + course.photo + ')'}"></div>
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="!course.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    
                                </div>
                                
                                <div flex flex-column fullwidth style="height: 135px;">
                                    <ion-card-header style="padding:0px 10px;flex-direction:column" >
                                        <ion-card-title font-18 weight600>
                                            <div class="continueCaseText">
                                                Ga verder met je module
                                            </div>
                                            <div>
                                                {{course.title}}        
                                            </div>
                                            <div style="font-size:14px;font-style:italic;font-weight:400;margin-top:10px">
                                                Gestart op {{helper.showLocalDate(course.startdate,'',0)}}
                                            </div>
                                        </ion-card-title>
                                    </ion-card-header>
                                    <span class="spacer"></span>
                                    <div flex center-ver fullwidth class="arrowDiv">
                                        <span class="spacer"></span>
                                        <span font-18 text-secondary weight600 relative style="top:-2px">Ga verder</span>
                                        <fa-icon titleIcon font-24 [icon]="icon.get('faArrowRight')"></fa-icon>
                                    </div>
                                </div>
    
                            </ion-card>
    
                        </ion-col>
                    </ng-container>
    
                </ion-row>
        
                <ion-row marginBottom *ngIf="auth.publicCourses?.length">
    
                    <ng-container *ngIf="!media.smallDevice">
                        <ion-col  [size]="helper.cardSizeSmall" *ngFor="let course of auth.publicCourses | filterKey : '!id' : auth.userInfo.activeCourseIds | caseFilter: currentFilterTypes.types : currentFilterTypes.subjectTypes : [] | filterSearch : searchTerm : false : ['title']">
                        
                            <ion-card noPadding pointer fullheight>
                                <ion-card-content noPadding fullHeight>
                                    <div backgroundImage class="avatarImage" *ngIf="course.photo" [ngStyle]="{'background-image': 'url(' + course.photo + ')'}"></div>
                                    <div backgroundImage class="avatarImage" *ngIf="!course.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <div flex center center-ver center-hor style="height:calc(100% - 275px)">
                                        <ion-card-header>
                                            <ion-card-title font-18 weight600>{{course.title}}</ion-card-title>
                                            <ion-card-subtitle font-14 weight400>{{course.user_info | maxLength : 60 : true}}</ion-card-subtitle>
                                        </ion-card-header>
                                    </div>
                                    <div center flex center-ver center-hor>
                                
                                        <div class="cardPrice">{{helper.currencyChar('EUR (â‚¬)')}} {{course.price | number : '1.2-2'}}</div>
                                        <span class="spacer"></span>
                                        <ion-button class="saveButton cardButton" fill="outline" size="small" (click)="subscribeCourse(course)">Lees meer</ion-button>
                                    </div>
                                </ion-card-content>
                            </ion-card>
                        </ion-col>
                    </ng-container>
    
                    <ng-container *ngIf="media.smallDevice">
                        <ion-col  [size]="helper.cardSize" *ngFor="let course of auth.publicCourses | filterKey : '!id' : auth.userInfo.activeCourseIds">
                            <ion-card noMargin basicPadding pointer flex align-top style="border-radius:16px;width:calc(100% - 10px)" (click)="subscribeCourse(course)">
                                <div style="width:100px;">
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="course.photo" [ngStyle]="{'background-image': 'url(' + course.photo + ')'}"></div>
                                    <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="!course.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating>
                                    
                                </div>
                                
                                <div flex flex-column fullwidth style="height: 135px;">
                                    <ion-card-header style="padding:0px 10px;flex-direction:column" >
                                        <ion-card-title font-18 weight500>{{course.title}}</ion-card-title>
                                        <ion-card-subtitle style="text-transform:none;" font-14 weight400>{{course.description | maxLength : 80 : true}}</ion-card-subtitle>
                                    </ion-card-header>
                                    <span class="spacer"></span>
                                    <div flex center-ver fullwidth class="arrowDiv">
                                        <span class="spacer"></span>
                                        <span font-18 text-secondary weight600 relative style="top:-2px">Lees meer</span>
                                        <fa-icon titleIcon font-24 [icon]="icon.get('faArrowRight')"></fa-icon>
                                    </div>
                                </div>
                            </ion-card>
    
                        </ion-col>
                    </ng-container>
    
    
                </ion-row>

            </ion-col>


        </ion-row>
    </ion-grid>
</main>