<app-header page="admin"></app-header>
<!-- <main>
    <ion-textarea rows="10" [(ngModel)]="newObj" style="text-align:left" placeholder="Voeg een object toe"></ion-textarea>
    <ion-button (click)="addCase()" [disabled]="uploading">Opslaan</ion-button>
</main> -->

<main [ngClass]="{'backupGrid':showBackups}">
    <!-- <ion-toolbar class="buttonBar">
        <ion-searchbar [(ngModel)]="searchTerm" placeholder="Zoeken"></ion-searchbar>
        
        <ion-buttons slot="end">

        <ion-button fill="outline" color="secondary" class="saveButton" (click)="openAdd()" *ngIf="backupService.activebackups!='cases'">Nieuw</ion-button>
        <ion-button fill="outline" color="secondary" class="saveButton" (click)="getBackups('cases','cases')" *ngIf="backupService.activebackups!='cases'">Laad Backups</ion-button>
        <ion-button fill="outline" color="secondary" class="saveButton" (click)="hideBackups()" *ngIf="backupService.activebackups=='cases'">Verberg Backup</ion-button>
        <ion-button fill="outline" color="secondary" class="saveButton" (click)="firestore.backup('cases','cases',cases)" *ngIf="backupService.activebackups!='cases'">Maak Backup</ion-button>
        </ion-buttons>
    </ion-toolbar> -->
    <!-- <div class="buttonBarMargin"></div> -->
    <ion-grid class="mainGrid">
        <ion-row style="height:calc(100% - 75px)">

            <ion-col [size]="media.smallDevice ? 12 : 3" class="selectColumn">

                <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px">
                    <!-- <ion-item detail="false" lines="none" button (click)="getCaseCsv()" class="itemButton" *ngIf="!caseItem?.id">
                      <div font-20 weight700>Laad cases van CSV</div>
                      <fa-icon font-24 slot="end" [icon]="icon.get('faArrowRight')"></fa-icon>
                    </ion-item>
                    <ion-item detail="false" lines="none" button (click)="importCases()" class="itemButton" *ngIf="!caseItem?.id" style="margin-bottom:50px;">
                        <div font-20 weight700>Verwerk cases van CSV</div>
                        <fa-icon font-24 slot="end" [icon]="icon.get('faArrowRight')"></fa-icon>
                      </ion-item> -->
                    <ion-item detail="false" lines="none" button (click)="view='list';maxCases=2000" class="itemButton" *ngIf="view=='cards'&&!caseItem?.id">
                        <div font-20 weight700>{{'cases.show_as_list' | translate}}</div>
                        <fa-icon font-24 slot="end" [icon]="icon.get('faList')"></fa-icon>
                    </ion-item>
                    <ion-item detail="false" lines="none" button (click)="view='cards';maxCases=15" class="itemButton" *ngIf="view=='list'&&!caseItem?.id">
                        <div font-20 weight700>{{'cases.show_as_cards' | translate}} ({{filteredCases.length}})</div>
                        <fa-icon font-24 slot="end" [icon]="icon.get('faAddressCard')"></fa-icon>
                    </ion-item>
                    <ion-item detail="false" lines="none" button (click)="addCase()" class="itemButton" *ngIf="!caseItem?.id">
                        <div font-20 weight700>{{'cases.new_case' | translate}}</div>
                        <fa-icon font-24 slot="end" [icon]="icon.get('faArrowRight')"></fa-icon>
                    </ion-item>

                    <ion-item detail="false" lines="none" button (click)="importClick()" class="itemButton" *ngIf="!caseItem?.id" >
                        <div font-20 weight700>{{'cases.import_case' | translate}}</div>
                        <fa-icon font-24 slot="end" [icon]="icon.get('faFileImport')"></fa-icon>
                    </ion-item>
                    <input hidden #import_item type="file" accept=".alicialabs" (change)="selectImportFile($event)"/>
                    
                    <ion-item detail="false" lines="none" button (click)="getBackups('cases','cases')" class="itemButton" *ngIf="!caseItem?.id">
                        <div font-20 weight700>{{'cases.load_backups' | translate}}</div>
                        <fa-icon font-24 slot="end" [icon]="icon.get('faCloudUploadAlt')"></fa-icon>
                    </ion-item>
                    <ion-item detail="false" lines="none" button (click)="firestore.backup('cases','cases',cases)" *ngIf="backupService.activebackups!='cases'&&!caseItem?.id" class="itemButton">
                        <div font-20 weight700>{{'cases.create_backups' | translate}}</div>
                        <fa-icon font-24 slot="end" [icon]="icon.get('faCloudDownloadAlt')"></fa-icon>
                    </ion-item>
                    <ion-item detail="false" lines="none" button (click)="returnBackup(caseItem)" *ngIf="showBackups&&caseItem?.id" class="itemButton">
                        <div font-20 weight700 text-warning>{{'restore_case' | translate}}</div>
                        <fa-icon font-24 slot="end" text-warning [icon]="icon.get('faRedoAlt')"></fa-icon>
                    </ion-item>
                    <ion-item detail="false" lines="none" button (click)="hideBackups()" *ngIf="backupService.activebackups=='cases'&&!caseItem?.id" class="itemButton">
                        <div font-20 weight700>{{'cases.hide_backups' | translate}}</div>
                        <fa-icon font-24 slot="end" [icon]="icon.get('faTimes')"></fa-icon>
                    </ion-item>
                    <ion-item detail="false" lines="none" button (click)="exportCases()" *ngIf="!caseItem?.id" class="itemButton">
                        <div font-20 weight700>{{'cases.export_csv' | translate}}</div>
                        <fa-icon font-24 slot="end" [icon]="icon.get('faDownload')"></fa-icon>
                    </ion-item>
                    <ion-item detail="false" lines="none" button (click)="caseItem = {}" class="itemButton" *ngIf="caseItem?.id">
                      <div font-20 weight700>{{'buttons.back' | translate}}</div>
                      <fa-icon font-24 slot="end" [icon]="icon.get('faArrowLeft')"></fa-icon>
                    </ion-item>
                    <!-- <ion-item detail="false" lines="none" button (click)="editCase(caseItem,true)" class="itemButton" *ngIf="caseItem?.id">
                      <div font-20 weight700>Bewerk uitgebreid</div>
                      <fa-icon font-24 slot="end" [icon]="icon.get('faPen')"></fa-icon>
                    </ion-item> -->

                    <ion-item detail="false" lines="none" button (click)="copyCase()" class="itemButton" *ngIf="caseItem?.id" noMargin>
                        <div font-20 weight700>{{'cases.copy_case' | translate}}</div>
                        <fa-icon font-24 slot="end" [icon]="icon.get('faCopy')"></fa-icon>
                    </ion-item>

                    <ion-item detail="false" [disabled]="caseNotReady()" lines="none" button (click)="practice()" class="itemButton" *ngIf="caseItem?.id" noMargin>
                        <div font-20 weight700>{{'cases.practice' | translate}}</div>
                        <fa-icon font-24 slot="end" [icon]="icon.get('faComments')"></fa-icon>
                    </ion-item>

                    <ion-item detail="false" lines="none" button (click)="exportItem(caseItem)" class="itemButton" *ngIf="caseItem?.id" noMargin >
                        <div font-20 weight700>{{'cases.export_case' | translate}}</div>
                        <fa-icon font-24 slot="end" [icon]="icon.get('faFileExport')"></fa-icon>
                    </ion-item>

                    <ion-item detail="false" lines="none" button (click)="deleteCase()" class="itemButton" *ngIf="caseItem?.id">
                      <div font-20 weight700 text-danger>{{'cases.remove_case' | translate}}</div>
                      <fa-icon font-24 slot="end" text-danger [icon]="icon.get('faTrashAlt')"></fa-icon>
                    </ion-item>
                </div>

                  <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" *ngIf="!caseItem?.id">
                    <ion-searchbar [(ngModel)]="searchTerm" (ionClear)="onSearchChanged()" placeholder="Zoeken" (ionInput)="onSearchChanged()"></ion-searchbar>
                </div>

                <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" marginBottom *ngIf="!caseItem?.id">
                    <div *ngFor="let type of infoService.conversation_types | sortBy: -1 : 'order'">
                        <ion-item detail="false" lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="type.selected = !type.selected;onFiltersChanged();">
                            <ion-checkbox slot="start" [(ngModel)]="type.selected" noPointerEvents></ion-checkbox>
                            <ion-label>{{ type[translate.currentLang] }}</ion-label>
                        </ion-item>
                        <div *ngIf="type.selected" class="innerSelectCase">
                            <ion-item detail="false" lines="none" font-18 weight400 noMargin class="selectCaseItem innerSelectCaseItem" *ngFor="let subject of type.subjects" (click)="subject.selected = !subject.selected;onFiltersChanged()">
                                <ion-checkbox slot="start" [(ngModel)]="subject.selected" noPointerEvents></ion-checkbox>
                                <ion-label>{{ subject[translate.currentLang] }}</ion-label>
                            </ion-item>
                        </div>
                    </div>
                </div>

                <div style="background:white;padding:10px 0px;border-radius:16px" *ngIf="!caseItem?.id" marginBottom>
                    <ion-item detail="false" lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="toggleFilter('open_to_user',true);onFiltersChanged()">
                        <ion-checkbox slot="start" [checked]="filterActive('open_to_user',true)" noPointerEvents (click)="check($event)"></ion-checkbox>
                        <ion-label>{{'cases.open_for_users' | translate}}</ion-label>
                    </ion-item>
                    <ion-item detail="false" lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="toggleFilter('open_to_user',false);onFiltersChanged()">
                        <ion-checkbox slot="start" [checked]="filterActive('open_to_user',false)" noPointerEvents (click)="check($event)"></ion-checkbox>
                        <ion-label>{{'cases.closed_for_users' | translate}}</ion-label>
                    </ion-item>
                </div>

                <div style="background:white;padding:10px 0px;border-radius:16px" *ngIf="!caseItem?.id" marginBottom>
                    <ion-item detail="false" lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="toggleFilter('create_self',true);onFiltersChanged()">
                        <ion-checkbox slot="start" [checked]="filterActive('create_self',true)" noPointerEvents (click)="check($event)"></ion-checkbox>
                        <ion-label>{{'cases.self_create_case' | translate}}</ion-label>
                    </ion-item>
                    <ion-item detail="false" lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="toggleFilter('create_self',false);onFiltersChanged()">
                        <ion-checkbox slot="start" [checked]="filterActive('create_self',false)" noPointerEvents (click)="check($event)"></ion-checkbox>
                        <ion-label>{{'cases.no_self_create_case' | translate}}</ion-label>
                    </ion-item>
                </div>


                <!-- <div style="background:white;padding:10px 0px;border-radius:16px" *ngIf="!caseItem?.id" marginBottom>
                    <ion-item detail="false" lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="toggleFilter('photo','notEmpty');onFiltersChanged()">
                        <ion-checkbox slot="start" [checked]="filterActive('photo','notEmpty')" noPointerEvents (click)="check($event)"></ion-checkbox>
                        <ion-label>Heeft een foto</ion-label>
                    </ion-item>
                    <ion-item detail="false" lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="toggleFilter('photo','empty');onFiltersChanged()">
                        <ion-checkbox slot="start" [checked]="filterActive('photo','empty')" noPointerEvents (click)="check($event)"></ion-checkbox>
                        <ion-label>Heeft geen foto</ion-label>
                    </ion-item>
                </div> -->

                <!-- <div style="background:white;padding:10px 0px;border-radius:16px" *ngIf="!caseItem?.id" marginBottom>
                    <ion-item detail="false" lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="toggleFilter('free_question','notEmpty');onFiltersChanged()">
                        <ion-checkbox slot="start" [checked]="filterActive('free_question','notEmpty')" noPointerEvents (click)="check($event)"></ion-checkbox>
                        <ion-label>Heeft een open vraag</ion-label>
                    </ion-item>
                    <ion-item detail="false" lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="toggleFilter('free_question','empty');onFiltersChanged()">
                        <ion-checkbox slot="start" [checked]="filterActive('free_question','empty')" noPointerEvents (click)="check($event)"></ion-checkbox>
                        <ion-label>Heeft geen open vraag</ion-label>
                    </ion-item>
                </div> -->

            </ion-col>

            <ion-content style="--background:none;">
                <ion-col [size]="media.smallDevice ? 12 : 9"  class="detailColumn">
                    <div *ngIf="!caseItem?.id && view=='cards'" >
                        <ion-row>
                            <!-- <ion-col [size]="helpers.cardSizeSmall" *ngFor="let caseItem of cases | caseFilter: currentFilterTypes.types : currentFilterTypes.subjectTypes : extraFilters.open_to_user | filterSearch : searchTerm : false : ['title']"> -->
                            <ion-col [size]="helpers.cardSizeSmall" *ngFor="let caseItem of visibleCases" (contextmenu)="onRightClick($event,caseItem)">
                                <ion-card noPadding pointer fullheight>
                                    <ion-card-content noPadding fullHeight>
                                        <div backgroundImage class="avatarImage" *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}"></div>
                                        <div backgroundImage class="avatarImage" *ngIf="!caseItem.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                        <div *ngIf="caseItem.avatarName" class="videoAvatarBadge">{{'cases.video' | translate}}</div>
                                        <div class="orderRatingBadge" (click)="toggleOrderRating(caseItem)">{{caseItem.order_rating}}</div>
                                        <!-- <div *ngIf="!caseItem.avatarName" class="videoAvatarBadge" (click)="createPhoto(caseItem)">Genereer photo</div> -->
                                        <fa-icon class="translateBadge" *ngIf="!caseItem.translate" [icon]="icon.get('faGlobe')" (click)="startTranslation(caseItem)"></fa-icon>
                                        <fa-icon class="translateBadge" *ngIf="caseItem.translate" [icon]="icon.get('faCheck')" (click)="startTranslation(caseItem)"></fa-icon>
                                        <fa-icon class="freeQuestionBadge" *ngIf="caseItem.free_question" [icon]="icon.get('faQuestion')"></fa-icon>
                                        
                                        <div flex center center-ver center-hor style="height:calc(100% - 275px)">
                                            <ion-card-header>
                                                <ion-card-title font-18 weight600>{{caseItem.title}}</ion-card-title>
                                                <ion-card-subtitle font-14 weight400>{{caseItem.user_info | maxLength : 60 : true}}</ion-card-subtitle>
                                            </ion-card-header>
                                        </div>
                                        <div center flex center-ver center-hor>
                                            <ion-button class="saveButton creditButton" style="border-radius:100%" [ngStyle]="{'background':levelService.levelColor(caseItem.level)}" fill="outline" size="small">
                                                <div>
                                                    <div [ngStyle]="{'color':levelService.levelColorText(caseItem.level)}">{{caseItem.level}}</div>
                                                    <div font-12 [ngStyle]="{'color':levelService.levelColorTextLevel(caseItem.level)}">{{'standards.level' | translate}}</div>
                                                </div>
                                            </ion-button>
                                            <ion-button class="saveButton cardButton" fill="outline" size="small" (click)="selectCasus(caseItem)">{{'cases.edit_case' | translate}}</ion-button>
                                        </div>
                                    </ion-card-content>
                                </ion-card>

                                <!-- <ion-card class="headerCard">
                                    <ion-card-header>
                                        <ion-card-title *ngIf="categoryInfo(conversationType.key)">{{ categoryInfo(conversationType.key).title }}</ion-card-title>
                                    </ion-card-header>
                                </ion-card>
                                <ion-card basicPadding pointer font16 weight700 tab *ngFor="let casus of conversationType.value;let i = index" [ngClass]="{'activeTab':caseItem.id==casus.id}" (click)="selectCasus(casus)">
                                    {{casus.title | capitalize}}
                                </ion-card> -->
                            </ion-col>
                            <ion-col [size]="helpers.cardSizeSmall" *ngIf="!(cases | caseFilter: currentFilterTypes.types : currentFilterTypes.subjectTypes : extraFilters.open_to_user | filterSearch : searchTerm : false : ['title','role','user_info','tags']).length">
                                <ion-card noPadding pointer fullheight>
                                    <ion-card-content noPadding fullHeight flex center-hor>
                                        <div flex center center-ver center-hor>
                                            <ion-card-header>
                                                <ion-card-title font-18 weight600>{{'cases.no_results' | translate}}</ion-card-title>
                                            </ion-card-header>
                                        </div>
                                    </ion-card-content>
                                </ion-card>
                            </ion-col>
                        </ion-row>
                    </div>


                    <div *ngIf="!caseItem?.id && view=='list'" >

                        <table class="table">
                            <thead>
                                <tr>
                                    <th (dblclick)="toggleSortList('conversation')">Type <fa-icon [icon]="icon.get('faSort')" *ngIf="listSortBy=='conversation'"></fa-icon></th>
                                    <th (dblclick)="toggleSortList('title')">Titel <fa-icon [icon]="icon.get('faSort')" *ngIf="listSortBy=='title'"></fa-icon></th>
                                    <!-- <th (dblclick)="toggleSortList('role')">Role <fa-icon [icon]="icon.get('faSort')" *ngIf="listSortBy=='role'"></fa-icon></th> -->
                                    <th (dblclick)="toggleSortList('user_info')">Beschrijving <fa-icon [icon]="icon.get('faSort')" *ngIf="listSortBy=='user_info'"></fa-icon></th>
                                    <th (dblclick)="toggleSortList('open_to_users')">Open voor Users <fa-icon [icon]="icon.get('faSort')" *ngIf="listSortBy=='open_to_users'"></fa-icon></th>
                                    <th (dblclick)="toggleSortList('openingMessage')">Opening Message <fa-icon [icon]="icon.get('faSort')" *ngIf="listSortBy=='openingMessage'"></fa-icon></th>
                                    <th (dblclick)="toggleSortList('translate')">Vertaald <fa-icon [icon]="icon.get('faSort')" *ngIf="listSortBy=='translate'"></fa-icon></th>
                                    <th (dblclick)="toggleSortList('free_question')">Vrije vraag <fa-icon [icon]="icon.get('faSort')" *ngIf="listSortBy=='free_question'"></fa-icon></th>
                                    <th (dblclick)="toggleSortList('photo')">Foto <fa-icon [icon]="icon.get('faSort')" *ngIf="listSortBy=='photo'"></fa-icon></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let caseItem of visibleCases | sortBy: listOrder : listSortBy" >
                                    <td>{{caseItem.conversation}}</td>
                                    <td pointer (dblclick)="editInput(caseItem,'title')">{{caseItem.title}}</td>
                                    <td>{{caseItem.user_info}}</td>
                                    <!-- <td pointer (dblclick)="editInput(caseItem,'role')">{{caseItem.role}}</td> -->
                                    <td>
                                        <ion-toggle color="primary" [(ngModel)]="caseItem.open_to_user" (ionChange)="update('open_to_user',false,caseItem)"></ion-toggle>
                                    </td>
                                    <td (dblclick)="editOpeningMessage(caseItem)">{{caseItem.openingMessage}}</td>
                                    <td (click)="caseItem.translate ? doNothing() : startTranslation(caseItem)">
                                        <fa-icon pointer [icon]="icon.get('faCheck')" *ngIf="caseItem.translate" text-success font-20></fa-icon>
                                        <fa-icon pointer [icon]="icon.get('faGlobeEurope')" *ngIf="!caseItem.translate" text-secondary font-20></fa-icon>
                                    </td>
                                    <td pointer (dblclick)="editInput(caseItem,'free_question')">{{caseItem.free_question}}</td>
                                    <td>
                                        <fa-icon pointer [icon]="icon.get('faCheck')" *ngIf="caseItem.photo" text-success font-20></fa-icon>
                                        <fa-icon pointer [icon]="icon.get('faTimes')" *ngIf="!caseItem.photo" text-danger font-20></fa-icon>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <ion-row noPadding *ngIf="caseItem?.id">
                        <ion-col [size]="media.smallDevice ? 12 : 7" noPadding>
                            <ion-card basicPadding *ngIf="caseItem?.id" [ngStyle]="{'outline':caseReady('title') ? 'solid 2px var(--ion-color-primary)' : 'solid 2px var(--ion-color-warning)'}">
                                <ion-card-header>
                                    <ion-card-title flex center-ver>
                                        <span weight600 titleIcon>{{'cases.title_and_info' | translate}}</span>
                                        <span class="spacer"></span>
                                        <fa-icon pointer titleIcon *ngIf="caseReady('title')" text-success font-24 [icon]="icon.get('faCheck')"></fa-icon>
                                        <fa-icon pointer titleIcon *ngIf="!caseReady('title')" text-warning font-24 [icon]="icon.get('faExclamationTriangle')"></fa-icon>
                                    </ion-card-title>
                                </ion-card-header>
                                <ion-card-content>
                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-label position="floating">{{'cases.title' | translate}}</ion-label>
                                        <ion-input style="margin-left:10px" weight700 type="text" (ionChange)="update('title')" [(ngModel)]="caseItem.title"></ion-input>
                                    </ion-item>
                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.user_info" (ionChange)="update('user_info')">
                                        <div slot="label">{{'cases.short_info' | translate}}</div>
                                        </ion-textarea>
                                    </ion-item>         
                                </ion-card-content>
                            </ion-card>
                        </ion-col>

                        <ion-col [size]="media.smallDevice ? 12 : 5" noPadding>
                            <ion-card basicPadding [ngStyle]="{'outline':caseReady('settings') ? 'solid 2px var(--ion-color-primary)' : 'solid 2px var(--ion-color-warning)'}">
                                <ion-card-header>
                                    <ion-card-title flex center-ver>
                                        <span weight600>{{'cases.settings' | translate}}</span>
                                        <div class="spacer"></div>
                                        <span style="color:rgba(0,0,0,0.4);text-transform:none" font-14>({{caseItem.id}})</span>
                                        <fa-icon pointer titleIcon *ngIf="caseReady('settings')" text-success font-24 [icon]="icon.get('faCheck')"></fa-icon>
                                        <fa-icon pointer titleIcon *ngIf="!caseReady('settings')" text-warning font-24 [icon]="icon.get('faExclamationTriangle')"></fa-icon>
                                    </ion-card-title>
                                </ion-card-header>
                                <ion-card-content>
                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-toggle color="primary" [disabled]="true" [(ngModel)]="caseItem.translate">
                                            {{'cases.translated' | translate}}
                                        </ion-toggle>
                                        <fa-icon slot="end" pointer titleIcon font-24 [icon]="icon.get('faGlobe')" (click)="startTranslation()"></fa-icon>
                                    </ion-item>

                                    <ion-item detail="false" [disabled]="showBackups || (caseNotReady() && !caseItem.open_to_user)" lines="none" listCard>
                                        <ion-toggle color="primary" [(ngModel)]="caseItem.open_to_user" (ionChange)="update('open_to_user')">
                                            {{'cases.open_for_users' | translate}}
                                        </ion-toggle>
                                    </ion-item>

                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-toggle color="primary" [(ngModel)]="caseItem.create_self" (ionChange)="update('create_self')">
                                            {{'cases.self_create_case' | translate}}
                                        </ion-toggle>
                                    </ion-item>

                                </ion-card-content>
                            </ion-card>
                        </ion-col>
                    </ion-row>

                    <ion-row noPadding *ngIf="caseItem?.id">
                        <ion-col [size]="media.smallDevice ? 12 : 7" noPadding>
                            <ion-card basicPadding [ngStyle]="{'outline':caseReady('basics') ? 'solid 2px var(--ion-color-primary)' : 'solid 2px var(--ion-color-warning)'}">
                                <ion-card-header (click)="showBasics=!showBasics">
                                    <ion-card-title flex center-ver>
                                        <span weight600>{{'cases.basics' | translate}}</span>
                                        <span class="spacer"></span>
                                        <fa-icon pointer titleIcon *ngIf="caseReady('basics')" text-success font-24 [icon]="icon.get('faCheck')"></fa-icon>
                                        <fa-icon pointer titleIcon *ngIf="!caseReady('basics')" text-warning font-24 [icon]="icon.get('faExclamationTriangle')"></fa-icon>
                                        <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')" [ngStyle]="{'transform': showBasics ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>
                                    </ion-card-title>
                                </ion-card-header>
                                <ion-card-content *ngIf="showBasics">
                                    <ion-row>
                                        <ion-col size="8">
                                            <ion-item detail="false" lines="none" listCard>
                                                <ion-label position="stacked">{{'cases.conversation_technique' | translate}}</ion-label>
                                                <ion-select interface="popover" [disabled]="showBackups" [(ngModel)]="caseItem.conversation" (ionChange)="update('conversation');changeCategory()">
                                                    <ion-select-option *ngFor="let cat of categories" [value]="cat.id">{{cat.title}}</ion-select-option>
                                                </ion-select>
                                            </ion-item>
                                        </ion-col>
                                        <ion-col size="4">
                                            <ion-item detail="false" lines="none" listCard>
                                                <ion-label position="stacked">{{'cases.order_rating' | translate}}</ion-label>
                                                <ion-input type="number" min="1" max="10" [(ngModel)]="caseItem.order_rating" (ionChange)="update('order_rating')"></ion-input>
                                            </ion-item>
                                        </ion-col>
                                    </ion-row>

                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label position="stacked">{{'cases.role' | translate}}</ion-label>
                                        <ion-input [disabled]="showBackups" [(ngModel)]="caseItem.role" (ionChange)="update('role')"></ion-input>
                                    </ion-item>

                                    <ion-item detail="false" lines="none" listCard (click)="selectTypes(caseItem.types)" class="ionItemTypes">
                                        <ion-label position="stacked">{{'cases.filter_types' | translate}}</ion-label>
                                        <div>
                                            <span *ngFor="let type of caseItem.types;let i = index">
                                                <div class="typeItem" center-ver center-hor>
                                                    <span>{{infoService.getConversationType('',type)[translate.currentLang]}}</span>
                                                </div>
                                            </span>
                                        </div>
                                        <!-- <ion-row fullwidth>
                                            <ion-col size="4" *ngFor="let type of caseItem.types">
                                                <div class="typeItem">{{infoService.getConversationType('',type)[translate.currentLang]}}</div>
                                            </ion-col>
                                        </ion-row> -->
                                    </ion-item>
                        
                                    <ion-item detail="false" pointer lines="none" listCard class="ionItemTypes">
                                        <ion-label position="stacked">{{'tags' | translate}}</ion-label>
                                        <ion-input [(ngModel)]="caseItem.tag" (keydown.enter)="addTag()" (ionChange)="addTag()">
                                        <ion-button fill="solid" slot="end" [disabled]="!caseItem.tag" (click)="addTag()">
                                            <fa-icon [icon]="icon.get('faPlus')"></fa-icon>
                                        </ion-button>
                                        </ion-input>
                                        <div>
                                            <span *ngFor="let tag of caseItem.tags;let i = index">
                                                <div class="typeItem" center-ver center-hor>
                                                    <span>{{tag | uppercase}}</span>
                                                    <fa-icon [icon]="icon.get('faTimes')" trash titleIcon (click)="removeTag(i)"></fa-icon>
                                                </div>
                                            </span>
                                        </div>
                                    </ion-item>

                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label position="stacked">{{'standards.level' | translate}}</ion-label>
                                        <ion-select interface="popover" [disabled]="showBackups" [(ngModel)]="caseItem.level" (ionChange)="update('level')">
                                            <ion-select-option *ngFor="let level of [1,2,3,4,5]" [value]="level">{{level}}</ion-select-option>
                                        </ion-select>
                                    </ion-item>

                                    <ion-row>
                                        <ion-col [size]="media.smallDevice ? 12 : 12">
                                            <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                                <ion-range [min]="1" [max]="100" [pin]="true"  color="primary" [(ngModel)]="caseItem.attitude" (ionChange)="update('attitude')">
                                                    <ion-label style="font-size:14px" slot="start">{{'cases.attitude' | translate}}</ion-label>
                                                    <ion-label style="font-size:18px" slot="end">{{caseItem.attitude}}</ion-label>
                                                </ion-range>
                                            </ion-item>
                                        </ion-col>
                                        <ion-col [size]="media.smallDevice ? 12 : 12">
                                            <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                                <ion-range [min]="1" [max]="99" [pin]="true"  color="primary" [(ngModel)]="caseItem.steadfastness" (ionChange)="update('steadfastness')">
                                                    <ion-label style="font-size:14px" slot="start">{{'cases.steadfastness' | translate}}</ion-label>
                                                    <ion-label style="font-size:18px" slot="end">{{caseItem.steadfastness}}</ion-label>
                                                </ion-range>
                                            </ion-item>
                                        </ion-col> 
                                            
                                    </ion-row>
                                </ion-card-content>
                            </ion-card>
                        </ion-col>

                        <ion-col [size]="media.smallDevice ? 12 : 5" noPadding>
                            <ion-card basicPadding [ngStyle]="{'outline':caseReady('looks') ? 'solid 2px var(--ion-color-primary)' : 'solid 2px var(--ion-color-warning)'}">
                                <ion-card-header (click)="showBasics=!showBasics">
                                    <ion-card-title flex center-ver>
                                        <span weight600>{{'cases.looks' | translate}}</span>
                                        <span class="spacer"></span>
                                        <fa-icon pointer titleIcon *ngIf="caseReady('looks')" text-success font-24 [icon]="icon.get('faCheck')"></fa-icon>
                                        <fa-icon pointer titleIcon *ngIf="!caseReady('looks')" text-warning font-24 [icon]="icon.get('faExclamationTriangle')"></fa-icon>

                                        <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')" [ngStyle]="{'transform': showBasics ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>

                                    </ion-card-title>
                                </ion-card-header>
                                <ion-card-content *ngIf="showBasics">
                                    <ion-card pointer class="caseAvatar" style="height:300px" (click)="selectAvatar($event)">
                                        <ion-card-content backgroundImage noPadding *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}">
                                        </ion-card-content>
                                        <!-- <ion-card-content *ngIf="!caseItem.photo" flex center-ver center-hor>
                                            <fa-icon [icon]="icon.get('faImage')" size="10x"></fa-icon>
                                        </ion-card-content> -->
                                        <div fullwidth center-ver center-hor class="btnImgChange">
                                            <ion-button fill="solid" color="light" class="saveButton" noPointerEvents>
                                                <span text-dark>
                                                    <fa-icon [icon]="icon.get('faImage')"></fa-icon>
                                                    {{'cases.photo' | translate}}
                                                </span>
                                            </ion-button>
                                            <ion-button fill="solid" color="light" class="saveButton" (click)="selectStreamingAvatar($event)">
                                                <span text-dark>
                                                    <fa-icon [icon]="icon.get('faVideo')"></fa-icon>
                                                    {{'cases.video' | translate}}
                                                </span>
                                            </ion-button>
                                        </div>
                                    </ion-card>
                                    <ion-item detail="false" lines="none" listCard marginTop>
                                        <ion-label position="stacked"> {{'cases.photo' | translate}}</ion-label>
                                        <ion-input [(ngModel)]="caseItem.photo"></ion-input>
                                    </ion-item>

                                    <ion-row noPadding>
                                        <ion-col [size]="media.smallDevice ? 12 : 6" style="padding:0 5px 0 0">
                                            <ion-item detail="false" lines="none" listCard>
                                                <ion-label position="stacked">{{'cases.age' | translate}}</ion-label>
                                                <ion-input [(ngModel)]="caseItem.age"></ion-input>
                                            </ion-item>
                                        </ion-col>
                                        <ion-col [size]="media.smallDevice ? 12 : 6" style="padding:0 0 0 5px">
                                            <ion-item detail="false" lines="none" listCard>
                                                <ion-label position="stacked">{{'cases.gender' | translate}}</ion-label>
                                                <ion-input [(ngModel)]="caseItem.gender"></ion-input>
                                            </ion-item>
                                        </ion-col>
                                    </ion-row>
                                    
                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label position="stacked">{{'cases.ethnicity' | translate}}</ion-label>
                                        <ion-input [(ngModel)]="caseItem.ethnicity"></ion-input>
                                    </ion-item>

                                </ion-card-content>
                            </ion-card>
                        </ion-col>

                    </ion-row>

                    <ion-row noPadding *ngIf="caseItem?.id" >
                        <ion-col size="12">
                            <ion-card basicPadding [ngStyle]="{'outline': 'solid 2px var(--ion-color-primary)' }">
                                <ion-card-header (click)="showCasus=!showCasus">
                                    <ion-card-title flex center-ver>
                                        <span weight600>{{'cases.case_content' | translate}}</span>
                                        <span class="spacer"></span>
                                        <ion-button class="saveButton" *ngIf="showCasus" color="warning" (click)="generateCasus($event,caseItem)" fill="outline" titleIcon>{{'cases.generate' | translate}}</ion-button>
                                        <ion-button class="saveButton" *ngIf="showCasus" fill="outline" (click)="editCasus($event)" titleIcon>{{'cases.write_yourself' | translate}}</ion-button>
                                        <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')"  [ngStyle]="{'transform': showCasus ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>
                                    </ion-card-title>
                                </ion-card-header>
                                <ion-card-content *ngIf="showCasus">
                                    <!-- <div marginBottom>
                                        Hier een kort uitleg over hoe de casus werkt. 
                                    </div>  -->
                                    <div basicPadding borderRadius24 backgroundGlobal [innerHTML]="caseItem.casus ? (caseItem.casus | sanitizeHtml) : (translate.instant('cases.no_case_yet') | sanitizeHtml)"></div> 
    
                                </ion-card-content>
                            </ion-card>
                        </ion-col>
                    </ion-row>
                    
                    <ion-row noPadding *ngIf="caseItem?.id">
                        <ion-col size="12">
                            <ion-card basicPadding [ngStyle]="{'outline':'solid 2px var(--ion-color-primary)'}">
                                <ion-card-header (click)="showUserOptions=!showUserOptions">
                                    <ion-card-title flex center-ver>
                                        <span weight600>{{'cases.user_options' | translate}}</span>
                                        <span class="spacer"></span>
                                        <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')"  [ngStyle]="{'transform': showUserOptions ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>
                                    </ion-card-title>
                                </ion-card-header>
                                <ion-card-content *ngIf="showUserOptions">
                                    
                                    <ion-card-title flex center-ver marginTop marginBottom>
                                        <span weight600>{{'cases.input' | translate}}</span>
                                        <span class="spacer"></span>
                                    </ion-card-title>

                                    <ion-item detail="false" lines="none" listCard fullwidth>
                                        <ion-label position="stacked" ></ion-label>
                                        <ion-toggle noMargin fullwidth [(ngModel)]="caseItem.editable_by_user.openingMessage" (ionChange)="update('editable_by_user')" color="primary" weight600>{{'case_options.editable_openingMessage' | translate}}</ion-toggle>
                                        <ion-toggle noMargin fullwidth [(ngModel)]="caseItem.editable_by_user.free_answer" (ionChange)="update('editable_by_user')" color="primary" weight600>{{'case_options.editable_free_answer' | translate}}</ion-toggle>
                                        <ion-toggle noMargin fullwidth [(ngModel)]="caseItem.editable_by_user.goals.free" (ionChange)="update('editable_by_user')" color="primary" weight600>{{'conversation.goal' | translate}}</ion-toggle>
                                    </ion-item>

                                    
                                    <ion-card-title flex center-ver marginTop marginBottom>
                                        <span weight600>{{'cases.user_help' | translate}}</span>
                                        <span class="spacer"></span>
                                    </ion-card-title>
                                
                                    <ion-item detail="false" lines="none" listCard fullwidth>
                                        <ion-label position="stacked" ></ion-label>
                                        <ion-toggle noMargin fullwidth [(ngModel)]="caseItem.editable_by_user.agents.choices"(ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_choices' | translate}}</ion-toggle>
                                        <ion-toggle noMargin fullwidth [(ngModel)]="caseItem.editable_by_user.agents.facts"(ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_facts' | translate}}</ion-toggle>
                                        <ion-toggle noMargin fullwidth [(ngModel)]="caseItem.editable_by_user.agents.background"(ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_background' | translate}}</ion-toggle>
                                        <ion-toggle noMargin fullwidth [(ngModel)]="caseItem.editable_by_user.agents.undo"(ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_undo' | translate}}</ion-toggle>
                                    </ion-item>
                                </ion-card-content>
                            </ion-card>
                        </ion-col>
                    </ion-row>

                    <ion-row noPadding *ngIf="caseItem?.id">
                        <ion-col size="12">
                        <ion-card basicPadding [ngStyle]="{'outline':caseReady('input') ? 'solid 2px var(--ion-color-primary)' : 'solid 2px var(--ion-color-warning)'}">
                                <ion-card-header (click)="showUserInput=!showUserInput">
                                    <ion-card-title flex center-ver>
                                        <span weight600>{{'cases.user_input' | translate}}</span>
                                        <span class="spacer"></span>
                                        <fa-icon pointer titleIcon *ngIf="caseReady('input')" text-success font-24 [icon]="icon.get('faCheck')"></fa-icon>
                                        <fa-icon pointer titleIcon *ngIf="!caseReady('input')" text-warning font-24 [icon]="icon.get('faExclamationTriangle')"></fa-icon>
                                        <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')"  [ngStyle]="{'transform': showUserInput ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>

                                    </ion-card-title>
                                </ion-card-header>
                                <ion-card-content *ngIf="showUserInput">
    
                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.openingMessage" (ionChange)="update('openingMessage')">
                                        <div slot="label">{{'cases.opening_message' | translate}}</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.goalsItems.free" (ionChange)="update('goalsItems')">
                                        <div slot="label">{{'cases.goal_conversation' | translate}}</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-card-title *ngIf="caseItem.editable_by_user.free_answer" flex center-ver marginTop marginBottom (click)="showUserInputMore=!showUserInputMore">
                                        <span weight600>{{'cases.free_questions' | translate}}</span>
                                        <span class="spacer"></span>
                                        <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')" [ngStyle]="{'transform': showUserInputMore ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>
                                    </ion-card-title>

                                    <div *ngIf="showUserInputMore && caseItem.editable_by_user.free_answer">
                                        <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                            <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.free_question" (ionChange)="update('free_question')">
                                            <div slot="label">{{'cases.free_question' | translate}}</div>
                                            </ion-textarea>
                                        </ion-item>  
        
                                        <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                            <ion-textarea rows="1" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.free_question2" (ionChange)="update('free_question2')">
                                            <div slot="label">{{'cases.free_question' | translate}} 2</div>
                                            </ion-textarea>
                                        </ion-item>  
        
                                        <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                            <ion-textarea rows="1" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.free_question3" (ionChange)="update('free_question3')">
                                            <div slot="label">{{'cases.free_question' | translate}} 3</div>
                                            </ion-textarea>
                                        </ion-item>  
        
                                        <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                            <ion-textarea rows="1" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.free_question4" (ionChange)="update('free_question4')">
                                            <div slot="label">{{'cases.free_question' | translate}} 4</div>
                                            </ion-textarea>
                                        </ion-item>  
                                    </div>
    
                                    
                                </ion-card-content>
                        </ion-card>
                        </ion-col>
                    </ion-row>

                    
                    <!-- <ion-card basicPadding *ngIf="caseItem?.id">
                        <ion-card-header>
                            <ion-card-title flex center-ver>
                                <ion-input style="font-size:1.25rem" weight700 type="text" (ionChange)="update('title')" [(ngModel)]="caseItem.title"></ion-input>
                                <span class="spacer"></span>
                                <span style="color:rgba(0,0,0,0.4);text-transform:none">({{caseItem.id}})</span>
                                <fa-icon pointer titleIcon font-24 [icon]="icon.get('faGlobe')" (click)="startTranslation()"></fa-icon>
                            </ion-card-title>
                        </ion-card-header>
                        <ion-card-content>
                            <ion-row>
                                <ion-col [size]="media.smallDevice ? 12 : 8">
                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label position="stacked">Gespreks techniek</ion-label>
                                        <ion-select interface="popover" [disabled]="showBackups" [(ngModel)]="caseItem.conversation" (ionChange)="update('conversation')">
                                            <ion-select-option *ngFor="let cat of categories" [value]="cat.id">{{cat.title}}</ion-select-option>
                                        </ion-select>
                                    </ion-item>

                                    <ion-item detail="false" lines="none" listCard (click)="selectTypes(caseItem.types)" class="ionItemTypes">
                                        <ion-label position="stacked">Typen</ion-label>
                                        <ion-row fullwidth>
                                            <ion-col size="4" *ngFor="let type of caseItem.types">
                                                <div class="typeItem">{{infoService.getConversationType('',type)[translate.currentLang]}}</div>
                                            </ion-col>
                                        </ion-row>
                                    </ion-item>
                        
                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label position="stacked">Rol</ion-label>
                                        <ion-input [disabled]="showBackups" [(ngModel)]="caseItem.role" (ionChange)="update('role')"></ion-input>
                                    </ion-item>

                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label position="stacked">photo</ion-label>
                                        <ion-input [disabled]="true" [(ngModel)]="caseItem.photo"></ion-input>
                                    </ion-item>
                                    
                                </ion-col>
                                <ion-col [size]="media.smallDevice ? 12 : 4">
                                    <ion-card pointer class="caseAvatar" (click)="selectAvatar($event)">
                                        <ion-card-content backgroundImage noPadding *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}">
                                        </ion-card-content>

                                        <div fullwidth center-ver center-hor class="btnImgChange">
                                            <ion-button fill="solid" color="light" class="saveButton" noPointerEvents>
                                                <span text-dark>
                                                    <fa-icon [icon]="icon.get('faImage')"></fa-icon>
                                                    Foto
                                                </span>
                                            </ion-button>
                                            <ion-button fill="solid" color="light" class="saveButton" (click)="selectStreamingAvatar($event)">
                                                <span text-dark>
                                                    <fa-icon [icon]="icon.get('faVideo')"></fa-icon>
                                                    Video
                                                </span>
                                            </ion-button>
                                        </div>
                                    </ion-card>
                                </ion-col>
                            </ion-row>
                            <ion-row>
                                <ion-col size="6">
                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-toggle color="primary" [(ngModel)]="caseItem.open_to_user" (ionChange)="update('open_to_user')">
                                            Open voor Users
                                        </ion-toggle>
                                    </ion-item>

                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-toggle color="primary" [(ngModel)]="caseItem.create_self" (ionChange)="update('create_self')">
                                            Zelf maak casus
                                        </ion-toggle>
                                    </ion-item>
                                    
                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label>
                                            Level 
                                            <span titleIcon *ngIf="caseItem.level">{{caseItem.level}}</span>
                                            <span titleIcon *ngIf="!caseItem.level">nog niet berekend</span>
                                        </ion-label>
                                        <ion-note slot="end" *ngIf="caseItem.analyzing_level" class="pulse-loader">Analyzing level...</ion-note>
                                        <fa-icon pointer slot="end" *ngIf="caseItem.level_explanation" [icon]="icon.get('faInfoCircle')" (click)="modalService.showText(caseItem.level_explanation,'Verklaring Level')"></fa-icon>
                                    </ion-item>

                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label position="stacked">age</ion-label>
                                        <ion-input [(ngModel)]="caseItem.age"></ion-input>
                                    </ion-item>

                                </ion-col>

                                <ion-col size="6">
                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-range [min]="1" [max]="100" [pin]="true"  color="primary" [(ngModel)]="caseItem.attitude" (ionChange)="update('attitude')">
                                            <ion-label style="font-size:14px" slot="start">Attitude</ion-label>
                                            <ion-label style="font-size:18px" slot="end">{{caseItem.attitude}}</ion-label>
                                        </ion-range>
                                    </ion-item>

                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-range [min]="1" [max]="99" [pin]="true"  color="primary" [(ngModel)]="caseItem.steadfastness" (ionChange)="update('steadfastness')">
                                            <ion-label style="font-size:14px" slot="start">Steadfastness</ion-label>
                                            <ion-label style="font-size:18px" slot="end">{{caseItem.steadfastness}}</ion-label>
                                        </ion-range>
                                    </ion-item>

                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label position="stacked">gender</ion-label>
                                        <ion-input [(ngModel)]="caseItem.gender"></ion-input>
                                    </ion-item>

                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label position="stacked">ethnicity</ion-label>
                                        <ion-input [(ngModel)]="caseItem.ethnicity"></ion-input>
                                    </ion-item>

                                </ion-col>

                                <ion-col size="6">
                                    <ion-item detail="false" pointer lines="none" listCard class="ionItemTypes">
                                        <ion-label position="stacked">Tags</ion-label>
                                        <ion-input [(ngModel)]="caseItem.tag" (keydown.enter)="addTag()" (ionChange)="addTag()">
                                        <ion-button fill="solid" slot="end" [disabled]="!caseItem.tag" (click)="addTag()">
                                            <fa-icon [icon]="icon.get('faPlus')"></fa-icon>
                                        </ion-button>
                                        </ion-input>
                                        <div>
                                            <span *ngFor="let tag of caseItem.tags;let i = index">
                                                <div class="typeItem" center-ver center-hor>
                                                    <span>{{tag | uppercase}}</span>
                                                    <fa-icon [icon]="icon.get('faTimes')" trash titleIcon (click)="removeTag(i)"></fa-icon>
                                                </div>
                                            </span>
                                        </div>
                                    </ion-item>
                                </ion-col>

                                <ion-col size="6">
                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label position="stacked">Hoe hoog op de lijst moet deze case staan</ion-label>
                                        <ion-input type="number" min="1" max="10" [(ngModel)]="caseItem.order_rating" (ionChange)="update('order_rating')"></ion-input>
                                    </ion-item>
                                </ion-col>

                                <ion-col size="12">
                                    

                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.user_info" (ionChange)="update('user_info')">
                                        <div slot="label">Korte informatie voor de gebruiker</div>
                                        </ion-textarea>
                                    </ion-item>         

                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.free_question" (ionChange)="update('free_question')">
                                        <div slot="label">Vrije vraag</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-textarea rows="1" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.free_question2" (ionChange)="update('free_question2')">
                                        <div slot="label">Vrije vraag 2</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-textarea rows="1" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.free_question3" (ionChange)="update('free_question3')">
                                        <div slot="label">Vrije vraag 3</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-textarea rows="1" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.free_question4" (ionChange)="update('free_question4')">
                                        <div slot="label">Vrije vraag 4</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.openingMessage" (ionChange)="update('openingMessage')">
                                        <div slot="label">Opening van gesprek</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-item detail="false" [disabled]="showBackups" lines="none" listCard>
                                        <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.casus" (ionChange)="update('casus')">
                                        <div slot="label">Casus</div>
                                        </ion-textarea>
                                    </ion-item>                      
                                    
                                </ion-col>
                                    
                            </ion-row>

                        </ion-card-content>
                    </ion-card> -->
                
                </ion-col>
                <ion-infinite-scroll *ngIf="filteredCases.length > visibleCases.length" (ionInfinite)="loadMore($event)">
                    <ion-infinite-scroll-content></ion-infinite-scroll-content>
                </ion-infinite-scroll>
            </ion-content>
        </ion-row>
    </ion-grid>

</main>