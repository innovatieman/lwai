<app-header page="trainer"></app-header>
<main>
    <!-- <ion-toolbar class="buttonBar">
        <ion-buttons slot="end">
          <ion-button fill="outline" color="light" (click)="add()">Nieuw</ion-button>
        </ion-buttons>
    </ion-toolbar> -->
    <!-- <div class="buttonBarMargin"></div> -->
    <ion-toolbar class="buttonBar">
      <div style="width:100%" center-hor flex>
          <div style="max-width: 1350px;width:100%;padding:5px 15px 0px 15px">
              <ion-row >
                <ion-col size="2" noPadding>
                  <ion-card pointer center class="topButton" (click)="nav.go('trainer/courses/dashboard')" [ngStyle]="{'background': activeTab=='dashboard' ? 'var(--ion-color-primary)' : 'white'}">
                      <ion-card-title [ngStyle]="{'color': activeTab=='dashboard' ? 'var(--ion-color-primary-contrast)' : 'var(--ion-color-primary)'}">Dashboard</ion-card-title>
                  </ion-card>
                </ion-col>
                <ion-col size="2" noPadding>
                    <ion-card pointer center class="topButton" (click)="nav.go('trainer/courses/active_courses')" [ngStyle]="{'background': activeTab=='active_courses' ? 'var(--ion-color-primary)' : 'white'}">
                        <ion-card-title [ngStyle]="{'color': activeTab=='active_courses' ? 'var(--ion-color-primary-contrast)' : 'var(--ion-color-primary)'}">Actief</ion-card-title>
                    </ion-card>
                </ion-col>
                <ion-col size="2" noPadding>
                  <ion-card pointer center class="topButton" (click)="nav.go('trainer/courses/cases')" [ngStyle]="{'background': activeTab=='cases' ? 'var(--ion-color-primary)' : 'white'}">
                      <ion-card-title [ngStyle]="{'color': activeTab=='cases' ? 'var(--ion-color-primary-contrast)' : 'var(--ion-color-primary)'}">Cases</ion-card-title>
                  </ion-card>
                </ion-col>
                <ion-col size="2" noPadding>
                  <ion-card pointer center class="topButton" (click)="nav.go('trainer/courses/infoItems')" [ngStyle]="{'background': activeTab=='infoItems' ? 'var(--ion-color-primary)' : 'white'}">
                      <ion-card-title [ngStyle]="{'color': activeTab=='infoItems' ? 'var(--ion-color-primary-contrast)' : 'var(--ion-color-primary)'}">Kennis</ion-card-title>
                  </ion-card>
                </ion-col>
                <ion-col size="2" noPadding>
                  <ion-card pointer center class="topButton" (click)="nav.go('trainer/courses/courses')" [ngStyle]="{'background': activeTab=='courses' ? 'var(--ion-color-primary)' : 'white'}">
                      <ion-card-title [ngStyle]="{'color': activeTab=='courses' ? 'var(--ion-color-primary-contrast)' : 'var(--ion-color-primary)'}">Modules</ion-card-title>
                  </ion-card>
                </ion-col>
                <ion-col size="2" noPadding *ngIf="!itemIsActive">
                  <div flex fullwidth center-ver style="padding:10px">
                      <ion-searchbar [(ngModel)]="searchTerm" placeholder="Zoeken" fullwidth noMargin noPadding></ion-searchbar>
                  </div>
                </ion-col>
              </ion-row>
          </div>
      </div>
    </ion-toolbar>

  <ion-grid>
    


    <ion-row style="height:calc(100% - 75px)" [ngStyle]="{'margin-top': media.smallDevice ? '106px' : '60px'}">

      <ion-col [size]="media.smallDevice ? 12 : 3" class="selectColumn">

        <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" *ngIf="activeTab=='active_courses'&&itemIsActive">

          <ion-item lines="none" button (click)="active_item = {}" class="itemButton" *ngIf="itemIsActive">
            <div font-20 weight700>Terug</div>
            <fa-icon font-24 slot="end" [icon]="icon.get('faArrowLeft')"></fa-icon>
          </ion-item>
          <ion-item lines="none" button (click)="deleteCourse()" class="itemButton" *ngIf="itemIsActive">
            <div font-20 weight700 text-danger>Archiveer module</div>
            <fa-icon font-24 slot="end" text-danger [icon]="icon.get('faTrashAlt')"></fa-icon>
          </ion-item>

        </div>

        <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" *ngIf="activeTab=='cases'">
          <ion-item lines="none" button (click)="newCase()" class="itemButton" *ngIf="!itemIsActive">
            <div font-20 weight700>Nieuwe casus</div>
            <fa-icon font-24 slot="end" [icon]="icon.get('faArrowRight')"></fa-icon>
          </ion-item>
          <ion-item lines="none" button (click)="caseItem = {}" class="itemButton" *ngIf="itemIsActive">
            <div font-20 weight700>Terug</div>
            <fa-icon font-24 slot="end" [icon]="icon.get('faArrowLeft')"></fa-icon>
          </ion-item>
          <ion-item lines="none" button (click)="editCaseAll()" class="itemButton" *ngIf="itemIsActive">
            <div font-20 weight700>Bewerk uitgebreid</div>
            <fa-icon font-24 slot="end" [icon]="icon.get('faPen')"></fa-icon>
          </ion-item>
          <ion-item lines="none" button (click)="deleteCase(caseItem)" class="itemButton" *ngIf="itemIsActive">
            <div font-20 weight700 text-danger>Verwijder casus</div>
            <fa-icon font-24 slot="end" text-danger [icon]="icon.get('faTrashAlt')"></fa-icon>
          </ion-item>
        </div>

        <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" *ngIf="activeTab=='infoItems'">
          <ion-item lines="none" button (click)="newInfoItem()" class="itemButton" *ngIf="!itemIsActive">
            <div font-20 weight700>Nieuw kennis item</div>
            <fa-icon font-24 slot="end" [icon]="icon.get('faArrowRight')"></fa-icon>
          </ion-item>

          <ion-item lines="none" button (click)="infoItem = {}" class="itemButton" *ngIf="itemIsActive">
            <div font-20 weight700>Terug</div>
            <fa-icon font-24 slot="end" [icon]="icon.get('faArrowLeft')"></fa-icon>
          </ion-item>

          <ion-item lines="none" button (click)="deleteInfoItem(infoItem)" class="itemButton" *ngIf="itemIsActive">
            <div font-20 weight700 text-danger>Verwijder kennis item</div>
            <fa-icon font-24 slot="end" text-danger [icon]="icon.get('faTrashAlt')"></fa-icon>
          </ion-item>

        </div>

        <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" *ngIf="activeTab=='infoItems'&&itemIsActive">
          <ion-item lines="none" button class="itemButton" *ngIf="itemIsActive" (click)="editInfoItemType()">
            <div font-20 weight700>Informatie type: {{infoItem.type}}</div>
            <fa-icon font-24 slot="end" [icon]="icon.get('faPen')"></fa-icon>
          </ion-item>

        </div>

        <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" *ngIf="activeTab=='courses'&&!itemIsActive">

          <ion-item lines="none" button (click)="addModule()" class="itemButton">
            <div font-20 weight700>Nieuwe module</div>
            <fa-icon font-24 slot="end" [icon]="icon.get('faPlus')"></fa-icon>
          </ion-item>

        </div>

        <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" *ngIf="activeTab=='courses'&&itemIsActive">

          <ion-item lines="none" button (click)="item = {}" class="itemButton" *ngIf="itemIsActive&&!inCourse">
            <div font-20 weight700>Terug</div>
            <fa-icon font-24 slot="end" [icon]="icon.get('faArrowLeft')"></fa-icon>
          </ion-item>
          <ion-item lines="none" button (click)="caseItem = {};infoItem = {};inCourse=false" class="itemButton" *ngIf="itemIsActive&&inCourse">
            <div font-20 weight700>Terug</div>
            <fa-icon font-24 slot="end" [icon]="icon.get('faArrowLeft')"></fa-icon>
          </ion-item>
          <ion-item lines="none" button (click)="activateCourse()" class="itemButton" *ngIf="itemIsActive&&!inCourse">
            <div font-20 weight700 text-success>Publiceer module</div>
            <fa-icon font-24 slot="end" text-success [icon]="icon.get('faCloudUploadAlt')"></fa-icon>
          </ion-item>
          <ion-item lines="none" button (click)="deleteCourse()" class="itemButton" *ngIf="itemIsActive&&!inCourse">
            <div font-20 weight700 text-danger>Verwijder module</div>
            <fa-icon font-24 slot="end" text-danger [icon]="icon.get('faTrashAlt')"></fa-icon>
          </ion-item>

        </div>

        <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" *ngIf="activeTab=='courses'&&itemIsActive">

          <ion-item lines="none" button (click)="addCourseItem()" class="itemButton" *ngIf="itemIsActive">
            <div font-20 weight700>Voeg onderdeel toe</div>
            <fa-icon font-24 slot="end" [icon]="icon.get('faPlus')"></fa-icon>
          </ion-item>

        </div>

        <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" marginBottom *ngIf="!itemIsActive&&activeTab!='dashboard'&&activeTab!='infoItems'">
            <div *ngFor="let type of infoService.conversation_types">
                <ion-item lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="type.selected = !type.selected">
                    <ion-checkbox slot="start" [(ngModel)]="type.selected" noPointerEvents></ion-checkbox>
                    <ion-label>{{ type[translate.currentLang] }}</ion-label>
                </ion-item>
                <div *ngIf="type.selected" class="innerSelectCase">
                    <ion-item lines="none" font-18 weight400 noMargin class="selectCaseItem innerSelectCaseItem" *ngFor="let subject of type.subjects" (click)="subject.selected = !subject.selected">
                        <ion-checkbox slot="start" [(ngModel)]="subject.selected" noPointerEvents></ion-checkbox>
                        <ion-label>{{ subject[translate.currentLang] }}</ion-label>
                    </ion-item>
                </div>
            </div>
        </div>
        <div style="background:white;padding:10px 0px;border-radius:16px" *ngIf="activeTab=='active_courses'&&!itemIsActive">
            <ion-item lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="toggleFilter('public',true)">
                <ion-checkbox slot="start" [checked]="filterActive('public',true)" noPointerEvents (click)="check($event)"></ion-checkbox>
                <ion-label>Zichtbaar voor publiek</ion-label>
            </ion-item>
            <ion-item lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="toggleFilter('public',false)">
                <ion-checkbox slot="start" [checked]="filterActive('public',false)" noPointerEvents (click)="check($event)"></ion-checkbox>
                <ion-label>Verborgen voor publiek</ion-label>
            </ion-item>

        </div>

      </ion-col>

      <ion-col [size]="media.smallDevice ? 12 : 9" class="detailColumn">

        <!-- active courses -->
        <ion-row marginBottom *ngIf="activeTab=='active_courses' && active_courses?.length && !itemIsActive">
    
          <ng-container *ngIf="!media.smallDevice">
              <ion-col  [size]="helper.cardSizeSmall" *ngFor="let course of active_courses | filterKey : 'status' : 'active' | caseFilter: currentFilterTypes.types : currentFilterTypes.subjectTypes : extraFilters.public | filterSearch : searchTerm : false : ['title','description','types']">
              
                  <ion-card noPadding pointer fullheight borderRadius24>
                      <ion-card-content noPadding fullHeight>
                          <div backgroundImage class="avatarImage" *ngIf="course.photo" [ngStyle]="{'background-image': 'url(' + course.photo + ')'}"></div>
                          <div backgroundImage class="avatarImage" *ngIf="!course.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                          <div flex center center-ver center-hor style="height:calc(100% - 275px)">
                              <ion-card-header>
                                  <ion-card-title font-18 weight600>{{course.title}}</ion-card-title>
                                  <ion-card-subtitle font-14 weight400>{{course.description | maxLength : 60 : true}}</ion-card-subtitle>
                              </ion-card-header>
                          </div>
                          <div center flex center-ver center-hor>
                      
                              <div class="cardPrice">{{helper.currencyChar('EUR (€)')}} {{course.price | number : '1.2-2'}}</div>
                              <span class="spacer"></span>
                              <ion-button class="saveButton cardButton" fill="outline" size="small" (click)="select('active_item',course)">Bekijken</ion-button>
                          </div>
                      </ion-card-content>
                  </ion-card>
              </ion-col>
          </ng-container>

          <ng-container *ngIf="media.smallDevice">
              <ion-col  [size]="helper.cardSize" *ngFor="let course of active_courses">
                  <ion-card noMargin basicPadding pointer flex align-top style="border-radius:16px;width:calc(100% - 10px)" (click)="select('active_item',course)">
                      <div style="width:100px;">
                          <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="course.photo" [ngStyle]="{'background-image': 'url(' + course.photo + ')'}"></div>
                          <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="!course.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                          <!-- <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating> -->
                          
                      </div>
                      
                      <div flex flex-column fullwidth style="height: 135px;">
                          <ion-card-header style="padding:0px 10px;flex-direction:column" >
                              <ion-card-title font-18 weight500>{{course.title}}</ion-card-title>
                              <ion-card-subtitle style="text-transform:none;" font-14 weight400>{{course.description | maxLength : 80 : true}}</ion-card-subtitle>
                          </ion-card-header>
                          <span class="spacer"></span>
                          <div flex center-ver fullwidth class="arrowDiv">
                              <span class="spacer"></span>
                              <span font-18 text-secondary weight600 relative style="top:-2px">Lees meer</span>
                              <fa-icon titleIcon font-24 [icon]="icon.get('faArrowRight')"></fa-icon>
                          </div>
                      </div>
                  </ion-card>

              </ion-col>
          </ng-container>


        </ion-row>

        <!-- cases -->
        <ion-row marginBottom *ngIf="activeTab=='cases' && cases?.length && !itemIsActive">

          <ng-container *ngIf="!media.smallDevice">
            <ion-col [size]="helper.cardSizeSmall" *ngFor="let caseItem of cases | filterKey : 'courseId' : 'empty' | caseFilter: currentFilterTypes.types : currentFilterTypes.subjectTypes : [] | filterKey : 'level' : currentFilterLevels | filterSearch : searchTerm : false : ['title','description'] ">
                <ion-card noPadding pointer fullheight>
                    <ion-card-content noPadding fullHeight>
                        <div backgroundImage class="avatarImage" *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}"></div>
                        <div backgroundImage class="avatarImage" *ngIf="!caseItem.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                        <div flex center center-ver center-hor style="height:calc(100% - 275px)">
                            <ion-card-header>
                                <ion-card-title font-18 weight600>{{caseItem.title}}</ion-card-title>
                                <ion-card-subtitle font-14 weight400>{{caseItem.description | maxLength : 60 : true}}</ion-card-subtitle>
                            </ion-card-header>
                        </div>
                        <div center flex center-ver center-hor>
                            <div style="width:50%;padding:0px 10px">

                                <div font-16 weight600 text-primary>Level {{caseItem.level}}</div>

                                <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating>
                            </div>

                            <ion-button class="saveButton cardButton" fill="outline" size="small" (click)="editCase(caseItem)">Bewerk</ion-button>
                        </div>
                    </ion-card-content>
                </ion-card>

            </ion-col>
        
          </ng-container>

          <ng-container *ngIf="media.smallDevice">
              <ion-col [size]="12" *ngFor="let caseItem of cases | filterKey : 'courseId' : 'empty' | caseFilter: currentFilterTypes.types : currentFilterTypes.subjectTypes : [] | filterSearch : searchTerm : false : ['title','description']">
                  <ion-card noMargin basicPadding pointer flex align-top style="border-radius:16px;width:calc(100% - 10px)" (click)="editCase(caseItem)">
                      <div style="width:100px;">
                          <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}"></div>
                          <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="!caseItem.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                          <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating>
                          
                      </div>
                      
                      <div flex flex-column fullwidth style="height: 135px;">
                          <ion-card-header style="padding:0px 10px;flex-direction:column" >
                              <ion-card-title font-18 weight600>{{caseItem.title}}</ion-card-title>
                              <ion-card-subtitle style="text-transform:none" font-14 weight500>{{caseItem.description | maxLength : 80 : true}}</ion-card-subtitle>
                          </ion-card-header>
                          <span class="spacer"></span>
                          <div flex center-ver fullwidth class="arrowDiv">
                              <span class="spacer"></span>
                              <span font-18 text-secondary weight600 relative style="top:-2px">Bewerk</span>
                              <fa-icon font-24 titleIcon [icon]="icon.get('faArrowRight')"></fa-icon>
                          </div>
                      </div>
                  </ion-card>
              </ion-col>

          </ng-container>
        </ion-row>

        <!-- info Items -->
        <ion-row marginBottom *ngIf="activeTab=='infoItems' && infoItems?.length && !itemIsActive">

          <ng-container *ngIf="!media.smallDevice">
            <ion-col [size]="helper.cardSizeSmall" *ngFor="let infoItem of infoItems | filterKey : 'courseId' : 'empty' | filterSearch : searchTerm : false : ['title','description','tags'] ">
                <ion-card noPadding pointer fullheight>
                    <ion-card-content noPadding fullHeight>
                        <div backgroundImage class="avatarImage" *ngIf="infoItem.photo&&!infoItem.video_url" [ngStyle]="{'background-image': 'url(' + infoItem.photo + ')'}"></div>
                        <div backgroundImage class="avatarImage" *ngIf="!infoItem.photo&&(!infoItem.video_url||infoItem.type!='video')" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                        <div backgroundImage class="avatarImage" *ngIf="infoItem.video_url" [ngStyle]="{'background-image': 'url(assets/img/default_video_image.webp)'}"></div>
                        <div *ngIf="tagsBadge(infoItem.tags)" class="videoAvatarBadge">{{tagsBadge(infoItem.tags) | maxLength : 40 : true}}</div>
                        <div flex center center-ver center-hor style="height:calc(100% - 275px)">
                            <ion-card-header>
                                <ion-card-title font-18 weight600>{{infoItem.title}}</ion-card-title>
                                <ion-card-subtitle font-14 weight400>{{infoItem.description | maxLength : 80 : true}}</ion-card-subtitle>
                            </ion-card-header>
                        </div>
                        <div center flex center-ver center-hor>
                            <div style="width:50%;padding:0px 10px">

                                <!-- <div font-16 weight600 text-primary>Level {{caseItem.level}}</div>

                                <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating> -->
                            </div>

                            <ion-button class="saveButton cardButton" fill="outline" size="small" (click)="editInfoItem(infoItem)">Bewerk</ion-button>
                        </div>
                    </ion-card-content>
                </ion-card>

            </ion-col>
        
          </ng-container>

          <ng-container *ngIf="media.smallDevice">
              <ion-col [size]="12" *ngFor="let caseItem of cases | filterKey : 'courseId' : 'empty' | caseFilter: currentFilterTypes.types : currentFilterTypes.subjectTypes : [] | filterSearch : searchTerm : false : ['title','description']">
                  <ion-card noMargin basicPadding pointer flex align-top style="border-radius:16px;width:calc(100% - 10px)" (click)="editCase(caseItem)">
                      <div style="width:100px;">
                          <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}"></div>
                          <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="!caseItem.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                          <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating>
                          
                      </div>
                      
                      <div flex flex-column fullwidth style="height: 135px;">
                          <ion-card-header style="padding:0px 10px;flex-direction:column" >
                              <ion-card-title font-18 weight600>{{caseItem.title}}</ion-card-title>
                              <ion-card-subtitle style="text-transform:none" font-14 weight500>{{caseItem.user_info | maxLength : 80 : true}}</ion-card-subtitle>
                          </ion-card-header>
                          <span class="spacer"></span>
                          <div flex center-ver fullwidth class="arrowDiv">
                              <span class="spacer"></span>
                              <span font-18 text-secondary weight600 relative style="top:-2px">Bewerk</span>
                              <fa-icon font-24 titleIcon [icon]="icon.get('faArrowRight')"></fa-icon>
                          </div>
                      </div>
                  </ion-card>
              </ion-col>

          </ng-container>
        </ion-row>

        <!-- courses -->
        <ion-row marginBottom *ngIf="activeTab=='courses' && courses?.length && !itemIsActive">
    
          <ng-container *ngIf="!media.smallDevice">
              <ion-col  [size]="helper.cardSizeSmall" *ngFor="let course of courses | caseFilter: currentFilterTypes.types : currentFilterTypes.subjectTypes : extraFilters.public | filterSearch : searchTerm : false : ['title','description','types']">
              
                  <ion-card noPadding pointer fullheight borderRadius24>
                      <ion-card-content noPadding fullHeight>
                          <div backgroundImage class="avatarImage" *ngIf="course.photo" [ngStyle]="{'background-image': 'url(' + course.photo + ')'}"></div>
                          <div backgroundImage class="avatarImage" *ngIf="!course.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                          <div flex center center-ver center-hor style="height:calc(100% - 275px)">
                              <ion-card-header>
                                  <ion-card-title font-18 weight600>{{course.title}}</ion-card-title>
                                  <ion-card-subtitle font-14 weight400>{{course.description | maxLength : 60 : true}}</ion-card-subtitle>
                              </ion-card-header>
                          </div>
                          <div center flex center-ver center-hor>
                      
                              <div class="cardPrice">{{helper.currencyChar('EUR (€)')}} {{course.price | number : '1.2-2'}}</div>
                              <span class="spacer"></span>
                              <ion-button class="saveButton cardButton" fill="outline" size="small" (click)="select('item',course)">Bekijken</ion-button>
                          </div>
                      </ion-card-content>
                  </ion-card>
              </ion-col>
          </ng-container>

          <ng-container *ngIf="media.smallDevice">
              <ion-col  [size]="helper.cardSize" *ngFor="let course of active_courses">
                  <ion-card noMargin basicPadding pointer flex align-top style="border-radius:16px;width:calc(100% - 10px)" (click)="select('item',course)">
                      <div style="width:100px;">
                          <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="course.photo" [ngStyle]="{'background-image': 'url(' + course.photo + ')'}"></div>
                          <div backgroundImage fullwidth fullheight class="avatarImage avatarSmall" *ngIf="!course.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                          <!-- <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="20" [rating]="4.3"></app-star-rating> -->
                          
                      </div>
                      
                      <div flex flex-column fullwidth style="height: 135px;">
                          <ion-card-header style="padding:0px 10px;flex-direction:column" >
                              <ion-card-title font-18 weight500>{{course.title}}</ion-card-title>
                              <ion-card-subtitle style="text-transform:none;" font-14 weight400>{{course.description | maxLength : 80 : true}}</ion-card-subtitle>
                          </ion-card-header>
                          <span class="spacer"></span>
                          <div flex center-ver fullwidth class="arrowDiv">
                              <span class="spacer"></span>
                              <span font-18 text-secondary weight600 relative style="top:-2px">Lees meer</span>
                              <fa-icon titleIcon font-24 [icon]="icon.get('faArrowRight')"></fa-icon>
                          </div>
                      </div>
                  </ion-card>

              </ion-col>
          </ng-container>


        </ion-row>


        <ion-row marginBottom *ngIf="activeTab!='dashboard' && itemIsActive">

          <!-- active course item -->
          <ion-card borderRadius24 fullwidth basicPadding *ngIf="itemIsSelected('active_item')">
            <ion-row>
              <ion-col size="3">
                <div class="courseImage">
                  <img [src]="active_item.photo" alt="">
                  <div class="coursePrice" fullwidth center basicPadding>
                    <span>{{helper.currencyChar(active_item.currency)}}</span> <span>{{active_item.price | number : '1.2-2'}}</span>
                  </div>
                  <div style="padding:0 15px;">
                    <app-star-rating [gridPadding]="0" [readOnlyItem]="true" [fontSize]="24" [rating]="4.3"></app-star-rating>
                  </div> 
                </div>
              </ion-col>
              <ion-col size="12">
                <div fullwidth basicPadding>
                  <ion-card-title flex center-ver>
                      <h3 pointer style="font-size:1.25rem" weight700 (click)="editActive(active_item,'title','text')">
                        {{active_item.title}}
                        <fa-icon [icon]="icon.get('faPen')" font-20 text-secondary></fa-icon>
                      </h3>
                      <span class="spacer"></span>
                  </ion-card-title>
                  <div fullwidth>
                    <p pointer font-16 weight600 marginBottom (click)="editActive(active_item,'description','textarea')">
                      {{active_item.description | maxLength : 200 : true}}
                      <fa-icon [icon]="icon.get('faPen')" font-20 weight700 text-secondary></fa-icon>
                    </p>
    
                    <ion-item pointer lines="none" listCard (click)="selectTypes('active_item',active_item.types)" class="ionItemTypes">
                      <ion-label position="stacked">Typen</ion-label>
                      <ion-row fullwidth>
                          <ion-col size="4" *ngFor="let type of active_item.types">
                              <div class="typeItem">{{infoService.getConversationType('',type)[translate.currentLang]}}</div>
                          </ion-col>
                      </ion-row>
                    </ion-item>
    
                    <ion-item pointer lines="none" listCard>
                      <ion-toggle color="primary" [(ngModel)]="active_item.public" (ionChange)="updateActiveCourse('public')">
                          Zichtbaar voor alle gebruikers
                      </ion-toggle>
                    </ion-item>
    
                  </div>
                   <span class="spacer"></span>
                   
                </div>
              </ion-col>
            </ion-row>
            <div flex>
            </div>
            <!-- <div flex>
              
              <span class="spacer"></span>
              <ion-button fill="outline" color="success" (click)="deleteCourse()">
                Afsluiten
              </ion-button>
           </div> -->
          </ion-card>
          <div *ngIf="itemIsSelected('active_item')" class="reOrderList" fullwidth>
            
            <div flex center-ver fullwidth marginBottom marginTop>
              <h3 noMargin>Module Onderdelen</h3>
              <div class="spacer"></div>
              <!-- <ion-card basicPadding button (click)="addCourseItem()">
                <ion-card-title><fa-icon [icon]="icon.get('faPlus')"></fa-icon> Voeg onderdeel toe</ion-card-title>
              </ion-card> -->
            </div>

            <ion-item *ngFor="let item of active_item.itemIds;let item_index=index" class="subItem" lines="none">
              <div fullwidth>
                <div flex center-ver fullwidth style="padding:10px 5px;">
                  <ion-thumbnail slot="start">
                    <img [src]="getItem(item.id,item.type).photo" *ngIf="getItem(item.id,item.type).type!='video'" />
                    <img src="assets/img/default_video_image.webp" *ngIf="getItem(item.id,item.type).type=='video'" />

                  </ion-thumbnail>
                  <div>
                    <ion-card-title>{{item_index+1}}. {{getItem(item.id,item.type).title}} </ion-card-title>
                    <ion-card-subtitle>{{item.type}}</ion-card-subtitle>
                  </div>
                  <div class="spacer"></div>

                </div>
                <div fullwidth>
                  <ion-row [ngStyle]="{'padding-bottom':item.caseIds?.length ? '20px' : '0px'}">
                    <ion-col size="4" *ngFor="let casus of item.caseIds;let casus_index=index;let first=first;let last=last">
                          <ion-card noPadding pointer fullheight>
                            <ion-card-content noPadding fullHeight>
                                <div backgroundImage class="avatarImage" *ngIf="getItem(casus.id,casus.type).photo" [ngStyle]="{'background-image': 'url(' + getItem(casus.id,casus.type).photo + ')'}"></div>
                                <div backgroundImage class="avatarImage" *ngIf="!getItem(casus.id,casus.type).photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                <div flex center center-ver center-hor style="height:calc(100% - 200px)">
                                    <ion-card-header noPadding>
                                        <ion-card-title font-18 weight600>{{getItem(casus.id,casus.type).title}}</ion-card-title>
                                        <ion-card-subtitle align-left>{{getItem(casus.id,casus.type).description | maxLength : 80 : true}}</ion-card-subtitle>
                                    </ion-card-header>
                                </div>
                            </ion-card-content>
                          </ion-card>
      
                    </ion-col>
                  </ion-row>

                </div>
              </div>
              <!-- </ion-card> -->
            </ion-item>
            
            
          </div>

          <!-- case item -->
          <ion-card basicPadding borderRadius24 fullwidth *ngIf="itemIsSelected('caseItem')">
            <ion-card-header>
              <ion-card-title flex center-ver>
                  <ion-input style="font-size:1.25rem" weight700 type="text" (ionChange)="update('cases','title')" [(ngModel)]="caseItem.title"></ion-input>
                  <span class="spacer"></span>
                  <!-- <fa-icon font-24 pointer titleIcon [icon]="icon.get('faPen')" (click)="editCaseAll()"></fa-icon>
                  <fa-icon font-24 pointer titleIcon [icon]="icon.get('faTimes')" (click)="closeCase()"></fa-icon> -->
              </ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <ion-row>
                  <ion-col size="8">
                      <ion-item lines="none" listCard>
                          <ion-label position="stacked">Conversation Type</ion-label>
                          <ion-select interface="popover" [(ngModel)]="caseItem.conversation" (ionChange)="update('cases','conversation')">
                              <ion-select-option *ngFor="let cat of categories" [value]="cat.id">{{cat.title}}</ion-select-option>
                          </ion-select>
                      </ion-item>
          
                      <ion-item lines="none" listCard>
                          <ion-label position="stacked">Rol</ion-label>
                          <ion-input [(ngModel)]="caseItem.role" (ionChange)="update('cases','role')"></ion-input>
                      </ion-item>
                      
                      <ion-item listCard lines="none">
                        <ion-range [snaps]="true" [min]="1" [max]="5" [pin]="false"  color="primary" [(ngModel)]="caseItem.level" (ionChange)="update('cases','level')">
                            <ion-label style="font-size:14px" slot="start">Level</ion-label>
                            <ion-label style="font-size:18px" slot="end">{{caseItem.level}}</ion-label>
                        </ion-range>
                      </ion-item>

                      <ion-item pointer lines="none" listCard (click)="selectTypes('caseItem',caseItem.types)" class="ionItemTypes">
                        <ion-label position="stacked">Typen</ion-label>
                        <ion-row fullwidth>
                            <ion-col size="4" *ngFor="let type of caseItem.types">
                                <div class="typeItem">{{infoService.getConversationType('',type)[translate.currentLang]}}</div>
                            </ion-col>
                        </ion-row>
                      </ion-item>

                      <!-- <ion-item lines="none" listCard>
                          <ion-label position="stacked">Avatar ID</ion-label>
                          <ion-input [(ngModel)]="caseItem.avatarName" (ionChange)="update('cases','avatarName')"></ion-input>
                      </ion-item>
                      <ion-item lines="none" listCard>
                          <ion-label position="stacked">Foto URL</ion-label>
                          <ion-input [(ngModel)]="caseItem.photo" (ionChange)="update('cases','photo')"></ion-input>
                      </ion-item> -->
                  </ion-col>
                  <ion-col size="4">
                      <ion-card pointer class="caseAvatar" (click)="selectAvatar($event)">
                        <ion-card-content backgroundImage noPadding *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}">
                        </ion-card-content>
                        <!-- <ion-card-content *ngIf="!caseItem.photo" flex center-ver center-hor>
                            <fa-icon [icon]="icon.get('faImage')" size="10x"></fa-icon>
                        </ion-card-content> -->
                        <div fullwidth center-ver center-hor class="btnImgChange">
                            <ion-button fill="solid" color="light" class="saveButton" noPointerEvents>
                                <span text-dark>
                                    <fa-icon [icon]="icon.get('faImage')"></fa-icon>
                                    Foto
                                </span>
                            </ion-button>
                            <ion-button fill="solid" color="light" class="saveButton" (click)="selectStreamingAvatar($event)">
                                <span text-dark>
                                    <fa-icon [icon]="icon.get('faVideo')"></fa-icon>
                                    Video
                                </span>
                            </ion-button>
                        </div>
                    </ion-card>

                  </ion-col>
              </ion-row>
              <ion-row>
                  <ion-col size="12">
                      
                      <ion-item listCard lines="none">
                          <ion-range [min]="1" [max]="100" [pin]="true"  color="primary" [(ngModel)]="caseItem.attitude" (ionChange)="update('cases','attitude')">
                              <ion-label style="font-size:14px" slot="start">Attitude</ion-label>
                              <ion-label style="font-size:18px" slot="end">{{caseItem.attitude}}</ion-label>
                          </ion-range>
                      </ion-item>
  
                      <ion-item listCard lines="none">
                          <ion-range [min]="1" [max]="99" [pin]="true"  color="primary" [(ngModel)]="caseItem.steadfastness" (ionChange)="update('cases','steadfastness')">
                              <ion-label style="font-size:14px" slot="start">Steadfastness</ion-label>
                              <ion-label style="font-size:18px" slot="end">{{caseItem.steadfastness}}</ion-label>
                          </ion-range>
                      </ion-item>
                      
                      <ion-item listCard lines="none">
                        <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.description" (ionChange)="update('cases','description')">
                          <div slot="label">Omschrijving</div>
                        </ion-textarea>
                      </ion-item>
  
                      <ion-item listCard lines="none">
                          <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.casus" (ionChange)="update('cases','casus')">
                            <div slot="label">Casus</div>
                          </ion-textarea>
                        </ion-item>
  
                      
                  </ion-col>
                      
              </ion-row>
  
              <!-- <div flex center-ver>
                <span class="spacer"></span>
                <ion-button color="danger" (click)="deleteCase(caseItem)" fill="solid">
                  <fa-icon [icon]="icon.get('faTrashAlt')" font-16></fa-icon>
                  Verwijderen
                </ion-button>
              </div> -->
              
            </ion-card-content>
          </ion-card>

          <!-- info item -->
          <ion-card basicPadding borderRadius24 fullwidth *ngIf="itemIsSelected('infoItem')">
            <ion-card-header>
              <ion-card-title flex center-ver>
                  <ion-input style="font-size:1.25rem" weight700 type="text" (ionChange)="update('infoItems','title')" [(ngModel)]="infoItem.title"></ion-input>
                  <span class="spacer"></span>
              </ion-card-title>
              <ion-card-content>
                <!-- <ion-row>
                  <ion-col size="8">
                    <ion-item lines="none" listCard>
                      <ion-label position="stacked">Image URL</ion-label>
                      <ion-input [(ngModel)]="infoItem.photo" (ionChange)="update('infoItems','photo')"></ion-input>
                    </ion-item>
                  </ion-col>
                </ion-row> -->
                <ion-row>
                  <ion-col size="12">
                    <ion-item listCard lines="none">
                      <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="infoItem.description" (ionChange)="update('infoItems','description')">
                        <div slot="label" font-20>Introductie</div>
                      </ion-textarea>
                    </ion-item>

                    <div *ngIf="infoItem.type!='video'" relative marginBottom [ngStyle]="{'height':infoItem.photo ? '500px' : '200px'}" class="infoItemImage">
                      <img *ngIf="infoItem.photo" [src]="infoItem.photo">
                      <div class="ImageUploadButton">
                        <ion-button class="saveButton" fill="solid" color="light" (click)="upload('infoItems','photo')">
                          <fa-icon style="margin-right:10px;" [icon]="icon.get('faImage')" font-20></fa-icon>
                          Upload afbeelding
                        </ion-button>
                      </div>
                      <fa-icon *ngIf="infoItem.photo" [icon]="icon.get('faTrashAlt')" class="ImageDeleteButton" font-24 (click)="infoItem.photo = '';update('infoItems','photo')"></fa-icon>
                    </div> 

                    <div *ngIf="infoItem.type=='video'" relative marginBottom [ngStyle]="{'height':infoItem.video_url ? '500px' : '200px'}" class="infoItemImage">
                      <video *ngIf="infoItem.video_url" style="width:100%;height:500px;" [controls]="true" [src]="media.videoUrl(infoItem.video_url)"></video>
                      <div class="ImageUploadButton">
                        <ion-button class="saveButton" fill="solid" color="light" (click)="uploadVideo('infoItems','video_url')">
                          <fa-icon style="margin-right:10px;" [icon]="icon.get('faImage')" font-20></fa-icon>
                          <span *ngIf="!media.percentageUploadingVideo||media.percentageUploadingVideo==100">Upload video</span>
                          <span flex center-ver *ngIf="media.percentageUploadingVideo&&media.percentageUploadingVideo!=100">
                            <span>Uploading video ({{media.percentageUploadingVideo}}%)</span>
                            <ion-spinner color="dark" titleIcon></ion-spinner> 
                          </span>
                        </ion-button>
                      </div>
                      <fa-icon *ngIf="infoItem.video_url" [icon]="icon.get('faTrashAlt')" class="ImageDeleteButton" font-24 (click)="infoItem.video_url = '';update('infoItems','video_url')"></fa-icon>
                    </div> 


                    <ion-item listCard lines="none" *ngIf="infoItem.type!='image_only'">
                      <ion-label font-20 position="stacked">Content</ion-label>
                      <quill-editor *ngIf="!showHtml" [(ngModel)]="infoItem.content" [modules]="configModules" (onEditorCreated)="showEditor()" (onBlur)="update('infoItems','content',true)"></quill-editor>
  
                      <ion-toolbar *ngIf="showHtml" style="padding-left:0px;--background: none">
                        <ion-buttons slot="start">
                          <ion-button (click)="showEditor()">
                            <fa-icon [icon]="icon.get('faArrowLeft')" style="margin-right:15px;" slot="start">keyboard_arrow_left</fa-icon>
                            gewone weergave
                          </ion-button>
                        </ion-buttons>
                      </ion-toolbar>
  
                      <ion-textarea *ngIf="showHtml" rows="4" labelPlacement="stacked" [autoGrow]="true" [(ngModel)]="infoItem.content" (ionChange)="update('infoItems','content',true)">
                        <div slot="label">Content</div>
                      </ion-textarea>
                    </ion-item>
  

                    <ion-item pointer lines="none" listCard class="ionItemTypes">
                      <ion-label position="stacked">Tags (alleen voor de trainer)</ion-label>
                      <ion-input [(ngModel)]="infoItem.tag">
                        <ion-button fill="solid" slot="end" [disabled]="!infoItem.tag" (click)="addTag('infoItem','infoItems')">
                          <fa-icon [icon]="icon.get('faPlus')"></fa-icon>
                        </ion-button>
                      </ion-input>
                      <ion-row fullwidth>
                          <ion-col size="4" *ngFor="let tag of infoItem.tags;let i = index">
                              <div class="typeItem" flex center-ver center-hor>
                                <span>{{tag}}</span>
                                <fa-icon [icon]="icon.get('faTimes')" trash titleIcon (click)="removeTag('infoItem','infoItems',i)"></fa-icon>
                              </div>
                          </ion-col>
                      </ion-row>
                    </ion-item>


                  </ion-col>
                </ion-row>
                  
                <!-- <div flex center-ver>
                  <span class="spacer"></span>
                  <ion-button color="danger" (click)="deleteInfoItem(infoItem)" fill="solid">
                    <fa-icon [icon]="icon.get('faTrashAlt')" font-16></fa-icon>
                    Verwijderen
                  </ion-button>
                </div> -->
              </ion-card-content>
            </ion-card-header>
          </ion-card>

          <!-- courses -->
          <ion-card basicPadding borderRadius24 fullwidth *ngIf="itemIsSelected('item')&&!inCourse">
            <!-- <div class="courseImage">
              <img [src]="item.photo" alt="">
            </div> -->
            <div style="padding:0 15px;">
                <ion-card-title flex center-ver>
                    <ion-input style="font-size:1.25rem" weight700 type="text" (ionChange)="update('courses','title')" [(ngModel)]="item.title"></ion-input>
                    <span class="spacer"></span>
                </ion-card-title>

                <div relative marginBottom [ngStyle]="{'height':item.photo ? '500px' : '200px'}" class="infoItemImage">
                  <img *ngIf="item.photo" [src]="item.photo">
                  <div class="ImageUploadButton">
                    <ion-button class="saveButton" fill="solid" color="light" (click)="uploadToCourse('photo')">
                      <fa-icon style="margin-right:10px;" [icon]="icon.get('faImage')" font-20></fa-icon>
                      Upload afbeelding
                    </ion-button>
                  </div>
                  <fa-icon *ngIf="item.photo" [icon]="icon.get('faTrashAlt')" class="ImageDeleteButton" font-24 (click)="item.photo = '';update('item','photo')"></fa-icon>
                </div> 

               <div>


                <ion-item listCard lines="none">
                  <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="item.description" (ionChange)="update('courses','description')">
                    <div slot="label">Introductie</div>
                  </ion-textarea>
                </ion-item>

                <ion-item pointer lines="none" listCard (click)="selectTypes('item',item.types)" class="ionItemTypes">
                  <ion-label position="stacked">Typen</ion-label>
                  <ion-row fullwidth>
                      <ion-col size="4" *ngFor="let type of item.types">
                          <div class="typeItem">{{infoService.getConversationType('',type)[translate.currentLang]}}</div>
                      </ion-col>
                  </ion-row>
                </ion-item>

                <ion-item lines="none" listCard>
                    <ion-label position="stacked">Prijs</ion-label>
                    <div flex center-ver fullwidth>

                      <ion-input type="number" [(ngModel)]="item.price" (ionChange)="update('courses','price')" style="max-width:60px;"></ion-input>
                      <div fullwidth class="spacer"></div>
                      <ion-select interface="popover" [(ngModel)]="item.currency" (ionChange)="update('courses','currency')">
                        <ion-select-option *ngFor="let cur of ['EUR (€)','USD ($)','GBP (£)','JPY (¥)']" [value]="cur">{{cur}}</ion-select-option>
                      </ion-select>
                    </div>
                </ion-item>

                <!-- <ion-item lines="none" listCard>
                  <ion-label position="stacked">Valuta</ion-label>
                </ion-item> -->
    

               </div>
               <span class="spacer"></span>
               <!-- <div flex>
                <span class="spacer"></span>
                <ion-button fill="outline" color="success" (click)="activateCourse()">
                  Publiceer
                </ion-button>
               </div> -->
            </div>
          </ion-card>
          <div *ngIf="itemIsSelected('item')&&!inCourse" class="reOrderList" fullwidth>
            
            <div flex center-ver fullwidth marginBottom marginTop>
              <h3 noMargin>Module Onderdelen</h3>
              <div class="spacer"></div>
              <!-- <ion-card basicPadding button (click)="addCourseItem()">
                <ion-card-title><fa-icon [icon]="icon.get('faPlus')"></fa-icon> Voeg onderdeel toe</ion-card-title>
              </ion-card> -->
            </div>
            <ion-reorder-group *ngIf="item?.id" [disabled]="false" (ionItemReorder)="handleReorderItems($any($event))">
              <ion-item *ngFor="let item of item.itemIds;let item_index=index" class="subItem" lines="none">
                <div fullwidth>
                  <div flex center-ver fullwidth style="padding:10px 5px;">
                    <ion-thumbnail slot="start">
                      <img [src]="getItem(item.id,item.type).photo" *ngIf="getItem(item.id,item.type).photo&&getItem(item.id,item.type).type!='video'" />
                      <img src="assets/img/alicia_background.webp" *ngIf="!getItem(item.id,item.type).photo&&getItem(item.id,item.type).type!='video'" />
                      <img src="assets/img/default_video_image.webp" *ngIf="getItem(item.id,item.type).type=='video'" />
                    </ion-thumbnail>
                    <div>
                      <ion-card-title>{{item_index+1}}. {{getItem(item.id,item.type).title}} </ion-card-title>
                      <ion-card-subtitle>{{item.type}}</ion-card-subtitle>
                    </div>
                    <div class="spacer"></div>
                    <ion-button slot="end" fill="clear" *ngIf="item.type=='practice'" (click)="addCaseToItem(item.id)">
                      <fa-icon [icon]="icon.get('faPlus')" font-16 ></fa-icon>
                    </ion-button>
                    <ion-button slot="end" fill="clear" (click)="editCourseCase(item_index,undefined,true)">
                      <fa-icon [icon]="icon.get('faPen')" font-16 ></fa-icon>
                    </ion-button>
                    <ion-button slot="end" fill="clear" (click)="removeItem(item_index)">
                      <fa-icon trash [icon]="icon.get('faTrashAlt')" font-16 ></fa-icon>
                    </ion-button>
                    <ion-reorder slot="end" color="secondary"></ion-reorder>
                  </div>
                  <div fullwidth>
                    <ion-row>
                      <ion-col size="4" *ngFor="let casus of item.caseIds;let casus_index=index;let first=first;let last=last">
                            <ion-card noPadding pointer fullheight>
                              <ion-card-content noPadding fullHeight>
                                  <div backgroundImage class="avatarImage" *ngIf="getItem(casus.id,casus.type).photo" [ngStyle]="{'background-image': 'url(' + getItem(casus.id,casus.type).photo + ')'}"></div>
                                  <div backgroundImage class="avatarImage" *ngIf="!getItem(casus.id,casus.type).photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                  <div flex center center-ver center-hor style="height:calc(100% - 250px)">
                                      <ion-card-header noPadding>
                                          <ion-card-title font-18 weight600>{{getItem(casus.id,casus.type).title}}</ion-card-title>
                                          <ion-card-subtitle align-left>{{getItem(casus.id,casus.type).description | maxLength : 80 : true}}</ion-card-subtitle>
                                      </ion-card-header>
                                  </div>
                                  <div flex>
                                    <ion-button slot="end" *ngIf="!first" fill="clear" (click)="move(item_index,-1,casus_index)">
                                      <fa-icon [icon]="icon.get('faArrowLeft')" font-18 ></fa-icon>
                                    </ion-button>
                                    <div class="spacer"></div>
                                    <ion-button slot="end" fill="clear" (click)="editCourseCase(item_index,casus_index)">
                                      <fa-icon [icon]="icon.get('faPen')" font-18 ></fa-icon>
                                    </ion-button>
                                    <ion-button slot="end" fill="clear" (click)="removeItem(item_index,casus_index)">
                                      <fa-icon trash [icon]="icon.get('faTrashAlt')" font-18 ></fa-icon>
                                    </ion-button>
                                    <ion-button slot="end" *ngIf="!last" fill="clear" (click)="move(item_index,1,casus_index)">
                                      <fa-icon [icon]="icon.get('faArrowRight')" font-18 ></fa-icon>
                                    </ion-button>
                                  </div>
                              </ion-card-content>
                            </ion-card>
        
                      </ion-col>
                    </ion-row>
  
                  </div>
                </div>
              </ion-item>
            </ion-reorder-group>
            
  
            <!-- <ion-grid *ngIf="item?.id && item.module_type=='practice'">
              <ion-row>
                <ion-col size="4" *ngFor="let item of item.itemIds;let item_index=index;let first=first;let last=last">
                      <ion-card noPadding pointer fullheight>
                        <ion-card-content noPadding fullHeight>
                            <div backgroundImage class="avatarImage" *ngIf="getItem(item.id,item.type).photo" [ngStyle]="{'background-image': 'url(' + getItem(item.id,item.type).photo + ')'}"></div>
                            <div backgroundImage class="avatarImage" *ngIf="!getItem(item.id,item.type).photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                            <div flex center center-ver center-hor style="height:calc(100% - 250px)">
                                <ion-card-header noPadding>
                                    <ion-card-title font-18 weight600>{{getItem(item.id,item.type).title}}</ion-card-title>
                                    <ion-card-subtitle>{{item.type}}</ion-card-subtitle>
                                </ion-card-header>
                            </div>
                            <div flex>
                              <ion-button slot="end" *ngIf="!first" fill="clear" (click)="move(item_index,-1)">
                                <fa-icon [icon]="icon.get('faArrowLeft')" font-18 ></fa-icon>
                              </ion-button>
                              <div class="spacer"></div>
                              <ion-button slot="end" fill="clear" (click)="editCourseCase(item_index)">
                                <fa-icon [icon]="icon.get('faPen')" font-18 ></fa-icon>
                              </ion-button>
                              <ion-button slot="end" fill="clear" (click)="removeItem(item_index)">
                                <fa-icon trash [icon]="icon.get('faTrashAlt')" font-18 ></fa-icon>
                              </ion-button>
                              <ion-button slot="end" *ngIf="!last" fill="clear" (click)="move(item_index,1)">
                                <fa-icon [icon]="icon.get('faArrowRight')" font-18 ></fa-icon>
                              </ion-button>
                            </div>
                        </ion-card-content>
                      </ion-card>
  
                </ion-col>
              </ion-row>
            </ion-grid> -->
            
          </div>

        </ion-row>


      </ion-col>

    </ion-row>






    <!-- <ion-row fullheight>
        <ion-col size="3">
          <ion-row noPadding noMargin fullheight>
            <ion-col noPadding class="SelectionPart" size="12">
              <div flex center-ver>
                <h3>Modules templates</h3>
                <span class="spacer"></span>
                <fa-icon [icon]="icon.get('faPlus')" pointer font-16 (click)="add()"></fa-icon>
              </div>
              <div class="selectColumn">
                <ion-card basicPadding pointer font16 weight700 tab *ngFor="let course of courses;let i = index" [ngClass]="{'activeTab':item.id==course.id}" (click)="select('item',course)">
                  {{course.title | capitalize}}
                </ion-card>
              </div>
            </ion-col>

            <ion-col noPadding class="SelectionPart" size="12">
              <div flex center-ver>
                <h3>Cases Templates</h3>
                <span class="spacer"></span>
                <ion-select #selectNewCase id="selectNewCase" interface="popover" toggleIcon="add" expandedIcon="add" [(ngModel)]="newCaseConversation" (ionChange)="newCase()">
                  <ion-select-option *ngFor="let cat of categories" [value]="cat.id">{{cat.title}}</ion-select-option>
                </ion-select>
              </div>
              <div class="selectColumn">
                <ion-card basicPadding pointer flex center-ver font16 weight700 tab *ngFor="let case of cases | filterKey : 'courseId' : 'empty' ;let i = index">
                  {{case.title | capitalize}}
                  <span class="spacer"></span>
                  <fa-icon [icon]="icon.get('faPen')" font-16 pointer (click)="editCase(case)"></fa-icon>
                </ion-card>
              </div>
            </ion-col>

            <ion-col noPadding class="SelectionPart" size="12">
              <div flex center-ver>
                <h3>Knowledge Templates</h3>
                <span class="spacer"></span>
                <fa-icon [icon]="icon.get('faPlus')" pointer font-16 (click)="newInfoItem()"></fa-icon>
              </div>
              <div class="selectColumn">
                <ion-card basicPadding pointer flex center-ver font16 weight700 tab *ngFor="let item of infoItems | filterKey : 'courseId' : 'empty' ;let i = index">
                  {{item.title | capitalize}}
                  <span class="spacer"></span>
                  <fa-icon [icon]="icon.get('faPen')" font-16 pointer (click)="editInfoItem(item)"></fa-icon>
                  <fa-icon [icon]="icon.get('faArrowRight')" font-16 pointer (click)="addInfoItem(item)"></fa-icon>
                </ion-card>
              </div>
            </ion-col>


          </ion-row>
        </ion-col>

      <ion-col size="9"  class="detailColumn">
        <ion-card basicPadding noMargin *ngIf="!item?.id&&!caseItem.id&&!infoItem.id">
          <ion-card-title>Selecteer een item</ion-card-title>
        </ion-card>
        
        <h3 *ngIf="item?.id && !caseItem.id && !infoItem.id">Module</h3>

        <ion-card noMargin basicPadding *ngIf="item?.id && !caseItem.id && !infoItem.id" flex>
          <div class="courseImage">
            <img [src]="item.photo" alt="">
          </div>
          <div class="courseDetails">
              <ion-card-title flex center-ver>
                  <ion-input style="font-size:1.25rem" weight700 type="text" (ionChange)="update('courses','title')" [(ngModel)]="item.title"></ion-input>
                  <span class="spacer"></span>
                  <ion-button fill="clear" color="secondary" (click)="editCourse()">
                    <fa-icon [icon]="icon.get('faPen')" font-20></fa-icon>
                  </ion-button>
                  <ion-button fill="clear" color="danger" (click)="deleteCourse()">
                    <fa-icon [icon]="icon.get('faTrashAlt')" trash font-20></fa-icon>
                  </ion-button>
              </ion-card-title>
             <div>
              <p [innerHTML]="item.description | maxLength : 200 : true"></p>
             </div>
             <span class="spacer"></span>
             <div flex>
              <div class="coursePrice">
                <span>{{helper.currencyChar(item.currency)}}</span> <span>{{item.price | number : '1.2-2'}}</span>
              </div>
              <span class="spacer"></span>
              <ion-button fill="outline" color="success" (click)="activateCourse()">
                Publiceer
              </ion-button>
             </div>
          </div>
        </ion-card>
        <div *ngIf="item?.id && !caseItem.id && !infoItem.id" class="reOrderList">
          
          <div flex center-ver fullwidth marginBottom marginTop>
            <h3 noMargin>Module Onderdelen</h3>
            <div class="spacer"></div>
            <ion-card basicPadding button (click)="addCourseItem()">
              <ion-card-title><fa-icon [icon]="icon.get('faPlus')"></fa-icon> Voeg onderdeel toe</ion-card-title>
            </ion-card>
          </div>
          <ion-reorder-group *ngIf="item?.id && item.module_type=='program'" [disabled]="false" (ionItemReorder)="handleReorderItems($any($event))">
            <ion-item *ngFor="let item of item.itemIds;let item_index=index" class="subItem" lines="none">
              <div fullwidth>
                <div flex center-ver fullwidth style="padding:10px 5px;">
                  <ion-thumbnail slot="start">
                    <img [src]="getItem(item.id,item.type).photo" />
                  </ion-thumbnail>
                  <div>
                    <ion-card-title>{{item_index+1}}. {{getItem(item.id,item.type).title}} </ion-card-title>
                    <ion-card-subtitle>{{item.type}}</ion-card-subtitle>
                  </div>
                  <div class="spacer"></div>
                  <ion-button slot="end" fill="clear" *ngIf="item.type=='practice'" (click)="addCaseToItem(item.id)">
                    <fa-icon [icon]="icon.get('faPlus')" font-16 ></fa-icon>
                  </ion-button>
                  <ion-button slot="end" fill="clear" (click)="editCourseCase(item_index)">
                    <fa-icon [icon]="icon.get('faPen')" font-16 ></fa-icon>
                  </ion-button>
                  <ion-button slot="end" fill="clear" (click)="removeItem(item_index)">
                    <fa-icon trash [icon]="icon.get('faTrashAlt')" font-16 ></fa-icon>
                  </ion-button>
                  <ion-reorder slot="end" color="secondary"></ion-reorder>
                </div>
                <div fullwidth>
                  <ion-row>
                    <ion-col size="4" *ngFor="let casus of item.caseIds;let casus_index=index;let first=first;let last=last">
                          <ion-card noPadding pointer fullheight>
                            <ion-card-content noPadding fullHeight>
                                <div backgroundImage class="avatarImage" *ngIf="getItem(casus.id,casus.type).photo" [ngStyle]="{'background-image': 'url(' + getItem(casus.id,casus.type).photo + ')'}"></div>
                                <div backgroundImage class="avatarImage" *ngIf="!getItem(casus.id,casus.type).photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                <div flex center center-ver center-hor style="height:calc(100% - 250px)">
                                    <ion-card-header noPadding>
                                        <ion-card-title font-18 weight600>{{getItem(casus.id,casus.type).title}}</ion-card-title>
                                        <ion-card-subtitle align-left>{{getItem(casus.id,casus.type).description | maxLength : 80 : true}}</ion-card-subtitle>
                                    </ion-card-header>
                                </div>
                                <div flex>
                                  <ion-button slot="end" *ngIf="!first" fill="clear" (click)="move(item_index,-1,casus_index)">
                                    <fa-icon [icon]="icon.get('faArrowLeft')" font-18 ></fa-icon>
                                  </ion-button>
                                  <div class="spacer"></div>
                                  <ion-button slot="end" fill="clear" (click)="editCourseCase(item_index,casus_index)">
                                    <fa-icon [icon]="icon.get('faPen')" font-18 ></fa-icon>
                                  </ion-button>
                                  <ion-button slot="end" fill="clear" (click)="removeItem(item_index,casus_index)">
                                    <fa-icon trash [icon]="icon.get('faTrashAlt')" font-18 ></fa-icon>
                                  </ion-button>
                                  <ion-button slot="end" *ngIf="!last" fill="clear" (click)="move(item_index,1,casus_index)">
                                    <fa-icon [icon]="icon.get('faArrowRight')" font-18 ></fa-icon>
                                  </ion-button>
                                </div>
                            </ion-card-content>
                          </ion-card>
      
                    </ion-col>
                  </ion-row>
                </div>
              </div>
            </ion-item>
          </ion-reorder-group>
          

          <ion-grid *ngIf="item?.id && item.module_type=='practice'">
            <ion-row>
              <ion-col size="4" *ngFor="let item of item.itemIds;let item_index=index;let first=first;let last=last">
                    <ion-card noPadding pointer fullheight>
                      <ion-card-content noPadding fullHeight>
                          <div backgroundImage class="avatarImage" *ngIf="getItem(item.id,item.type).photo" [ngStyle]="{'background-image': 'url(' + getItem(item.id,item.type).photo + ')'}"></div>
                          <div backgroundImage class="avatarImage" *ngIf="!getItem(item.id,item.type).photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                          <div flex center center-ver center-hor style="height:calc(100% - 250px)">
                              <ion-card-header noPadding>
                                  <ion-card-title font-18 weight600>{{getItem(item.id,item.type).title}}</ion-card-title>
                                  <ion-card-subtitle>{{item.type}}</ion-card-subtitle>
                              </ion-card-header>
                          </div>
                          <div flex>
                            <ion-button slot="end" *ngIf="!first" fill="clear" (click)="move(item_index,-1)">
                              <fa-icon [icon]="icon.get('faArrowLeft')" font-18 ></fa-icon>
                            </ion-button>
                            <div class="spacer"></div>
                            <ion-button slot="end" fill="clear" (click)="editCourseCase(item_index)">
                              <fa-icon [icon]="icon.get('faPen')" font-18 ></fa-icon>
                            </ion-button>
                            <ion-button slot="end" fill="clear" (click)="removeItem(item_index)">
                              <fa-icon trash [icon]="icon.get('faTrashAlt')" font-18 ></fa-icon>
                            </ion-button>
                            <ion-button slot="end" *ngIf="!last" fill="clear" (click)="move(item_index,1)">
                              <fa-icon [icon]="icon.get('faArrowRight')" font-18 ></fa-icon>
                            </ion-button>
                          </div>
                      </ion-card-content>
                    </ion-card>

              </ion-col>
            </ion-row>
          </ion-grid>
          
        </div>

        <ion-card basicPadding *ngIf="caseItem?.id">
          <ion-card-header>
            <ion-card-title flex center-ver>
                <ion-input style="font-size:1.25rem" weight700 type="text" (ionChange)="update('cases','title')" [(ngModel)]="caseItem.title"></ion-input>
                <span class="spacer"></span>
                <fa-icon font-24 pointer titleIcon [icon]="icon.get('faPen')" (click)="editCaseAll()"></fa-icon>
                <fa-icon font-24 pointer titleIcon [icon]="icon.get('faTimes')" (click)="closeCase()"></fa-icon>
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-row>
                <ion-col size="8">
                    <ion-item lines="none">
                        <ion-label position="stacked">Conversation Type</ion-label>
                        <ion-select interface="popover" [(ngModel)]="caseItem.conversation" (ionChange)="update('cases','conversation')">
                            <ion-select-option *ngFor="let cat of categories" [value]="cat.id">{{cat.title}}</ion-select-option>
                        </ion-select>
                    </ion-item>
        
                    <ion-item lines="none">
                        <ion-label position="stacked">Rol</ion-label>
                        <ion-input [(ngModel)]="caseItem.role" (ionChange)="update('cases','role')"></ion-input>
                    </ion-item>
                    <ion-item lines="none">
                        <ion-label position="stacked">Avatar ID</ion-label>
                        <ion-input [(ngModel)]="caseItem.avatarName" (ionChange)="update('cases','avatarName')"></ion-input>
                    </ion-item>
                    <ion-item lines="none">
                        <ion-label position="stacked">Foto URL</ion-label>
                        <ion-input [(ngModel)]="caseItem.photo" (ionChange)="update('cases','photo')"></ion-input>
                    </ion-item>
                </ion-col>
                <ion-col size="4">
                    <ion-card class="caseAvatar">
                        <ion-card-content backgroundImage noPadding *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}">
                        </ion-card-content>
                        <ion-card-content *ngIf="!caseItem.photo" flex center-ver center-hor>
                            <fa-icon [icon]="icon.get('faImage')" size="10x"></fa-icon>
                        </ion-card-content>
                    </ion-card>
                </ion-col>
            </ion-row>
            <ion-row>
                <ion-col size="12">
                    
                    <ion-item bgWhite lines="none">
                        <ion-range [min]="1" [max]="100" [pin]="true"  color="primary" [(ngModel)]="caseItem.attitude" (ionChange)="update('cases','attitude')">
                            <ion-label style="font-size:14px" slot="start">Attitude</ion-label>
                            <ion-label style="font-size:18px" slot="end">{{caseItem.attitude}}</ion-label>
                        </ion-range>
                    </ion-item>

                    <ion-item bgWhite lines="none">
                        <ion-range [min]="1" [max]="99" [pin]="true"  color="primary" [(ngModel)]="caseItem.steadfastness" (ionChange)="update('cases','steadfastness')">
                            <ion-label style="font-size:14px" slot="start">Steadfastness</ion-label>
                            <ion-label style="font-size:18px" slot="end">{{caseItem.steadfastness}}</ion-label>
                        </ion-range>
                    </ion-item>
                    
                    <ion-item bgWhite lines="none">
                      <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.description" (ionChange)="update('cases','description')">
                        <div slot="label">Omschrijving</div>
                      </ion-textarea>
                    </ion-item>

                    <ion-item bgWhite lines="none">
                        <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="caseItem.casus" (ionChange)="update('cases','casus')">
                          <div slot="label">Casus</div>
                        </ion-textarea>
                      </ion-item>

                    
                </ion-col>
                    
            </ion-row>

            <div flex center-ver>
              <span class="spacer"></span>
              <ion-button color="danger" (click)="deleteCase(caseItem)" fill="solid">
                <fa-icon [icon]="icon.get('faTrashAlt')" font-16></fa-icon>
                Verwijderen
              </ion-button>
            </div>
            
          </ion-card-content>
        </ion-card>


        <ion-card *ngIf="infoItem?.id">
          <ion-card-header>
            <ion-card-title flex center-ver>
                <ion-input style="font-size:1.25rem" weight700 type="text" (ionChange)="update('infoItems','title')" [(ngModel)]="infoItem.title"></ion-input>
                <span class="spacer"></span>
                <fa-icon font-24 pointer [icon]="icon.get('faTimes')" (click)="closeInfoItem()"></fa-icon>
            </ion-card-title>
            <ion-card-content>
              <ion-row>
                <ion-col size="8">
                  <ion-item lines="none">
                    <ion-label position="stacked">Information Type</ion-label>
                    <ion-select interface="popover" [(ngModel)]="infoItem.type" (ionChange)="update('infoItems','type')">
                        <ion-select-option value="text">Text</ion-select-option>
                        <ion-select-option value="video">Video</ion-select-option>
                        <ion-select-option value="audio">Audio</ion-select-option>
                        <ion-select-option value="image_only">Image only</ion-select-option>
                        <ion-select-option value="quiz">Quiz</ion-select-option>
                      </ion-select>
                  </ion-item>
                  <ion-item bgWhite lines="none">
                    <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="infoItem.description" (ionChange)="update('infoItems','description')">
                      <div slot="label">Description (for trainer only)</div>
                    </ion-textarea>
                  </ion-item>
                  <ion-item lines="none">
                    <ion-label position="stacked">Image URL</ion-label>
                    <ion-input [(ngModel)]="infoItem.photo" (ionChange)="update('infoItems','photo')"></ion-input>
                  </ion-item>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col size="12">
                  <ion-item bgWhite lines="none">
                    <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="infoItem.intro" (ionChange)="update('infoItems','intro')">
                      <div slot="label">Introductie (HTML)</div>
                      <ion-button fill="clear" style="font-size:16px;" color="dark" slot="end" (click)="editHtml('intro')">
                        <fa-icon slot="icon-only" [icon]="icon.get('faCode')" pointer></fa-icon>
                      </ion-button>
                    </ion-textarea>
                      

                  </ion-item>
                  <ion-item bgWhite lines="none" *ngIf="infoItem.type=='text'">
                    <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="infoItem.content" (ionChange)="update('infoItems','content')">
                      <div slot="label">Content (HTML)</div>
                      <ion-button fill="clear" style="font-size:16px;" color="dark" slot="end" (click)="editHtml('content')">
                        <fa-icon slot="icon-only" [icon]="icon.get('faCode')" pointer></fa-icon>
                      </ion-button>
                    </ion-textarea>
                  </ion-item>

                </ion-col>
              </ion-row>
                
              <div flex center-ver>
                <span class="spacer"></span>
                <ion-button color="danger" (click)="deleteInfoItem(infoItem)" fill="solid">
                  <fa-icon [icon]="icon.get('faTrashAlt')" font-16></fa-icon>
                  Verwijderen
                </ion-button>
              </div>
            </ion-card-content>
          </ion-card-header>
        </ion-card>

      </ion-col>
    </ion-row> -->
  </ion-grid>
</main>