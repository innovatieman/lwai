<app-header page="trainer"></app-header>
<main class="trainerPage">
    <ion-toolbar class="buttonBar" *ngIf="!media.smallDevice">
      <div style="width:100%" center-hor flex>
          <div style="max-width: 1350px;width:100%;padding:5px 15px 0px 15px">
              <ion-row >
                <ion-col size="2" noPadding>
                  <ion-card pointer center class="topButton notActive" (click)="trainerService.emptyBreadCrumbs();nav.go('trainer/dashboard')">
                      <ion-card-title>{{'dashboard.organisation' | translate}}</ion-card-title>
                  </ion-card>
                </ion-col>
                <ion-col size="2" noPadding>
                  <ion-card pointer center class="topButton" [ngClass]="{'isActive' : !(trainerService.breadCrumbs&&trainerService.breadCrumbs.length&&trainerService.breadCrumbs[0].type=='training'),'notActive': (trainerService.breadCrumbs&&trainerService.breadCrumbs.length&&trainerService.breadCrumbs[0].type=='training')}" (click)="trainerService.emptyBreadCrumbs();nav.go('trainer/cases')">
                      <ion-card-title>{{'standards.cases' | translate}}</ion-card-title>
                  </ion-card>
                </ion-col>
                <ion-col size="2" noPadding>
                  <ion-card pointer center class="topButton notActive" (click)="trainerService.emptyBreadCrumbs();nav.go('trainer/info-items')">
                      <ion-card-title>{{'buttons.knowledge' | translate}}</ion-card-title>
                  </ion-card>
                </ion-col>
                <ion-col size="2" noPadding>
                    <ion-card pointer center class="topButton notActive" (click)="trainerService.emptyBreadCrumbs();nav.go('trainer/modules')">
                        <ion-card-title>{{'standards.modules' | translate}}</ion-card-title>
                    </ion-card>
                </ion-col>
                <ion-col size="2" noPadding>
                    <ion-card pointer center class="topButton" [ngClass]="{'isActive' : (trainerService.breadCrumbs&&trainerService.breadCrumbs.length&&trainerService.breadCrumbs[0].type=='training'),'notActive': !(trainerService.breadCrumbs&&trainerService.breadCrumbs.length&&trainerService.breadCrumbs[0].type=='training')}" (click)="trainerService.emptyBreadCrumbs();nav.go('trainer/trainings')">
                        <ion-card-title>{{'standards.trainings' | translate}}</ion-card-title>
                    </ion-card>
                </ion-col>
                <ion-col size="2" noPadding>
                  <ion-card id="menu_trainings" pointer center class="topButton notActive" (click)="trainerService.emptyBreadCrumbs();nav.go('trainer/customers')">
                      <ion-card-title>{{'standards.customers' | translate}}</ion-card-title>
                  </ion-card>
                </ion-col>
                <!-- <ion-col size="2" noPadding *ngIf="!trainerService.caseItem.id">
                  <div flex fullwidth center-ver style="padding:10px">
                      <ion-searchbar (ionInput)="onSearchChanged()" [(ngModel)]="searchTerm" placeholder="Zoeken"  fullwidth noMargin noPadding></ion-searchbar>
                  </div>
                </ion-col> -->
              </ion-row>
          </div>
      </div>
    </ion-toolbar>
    <div *ngIf="media.smallDevice" class="buttonBarMobile">
      <app-menu-mobile (action)="useAction($event)" [pageParam]="setPageParam()"></app-menu-mobile>
      <app-menu-mobile [subMenu]="true" [options]="setOptionsParam()" (action)="useAction($event)"></app-menu-mobile>
      <input hidden #import_item type="file" accept=".alicialabs" (change)="selectImportFile($event)"/>
    </div>
    <div *ngIf="media.smallDevice" class="buttonBarMobileBackground"></div>

  <ion-grid>
    


    <ion-row style="height:calc(100% - 75px)" [ngStyle]="{'margin-top': media.smallDevice ? '60px' : '60px'}">

        <ion-col *ngIf="!media.smallDevice" [size]="media.smallDevice ? 12 : 3" class="selectColumn">

            <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" marginBottom *ngIf="trainerService.trainerInfo.logo">
                <div fullwidth style="height:100px">
                    <img [src]="trainerService.trainerInfo.logo" style="width:100%;height:100%;border-radius:16px;object-fit:contain;">
                </div> 
            </div>

            <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" *ngIf="!trainerService.caseItem?.id">
                <ion-searchbar [(ngModel)]="searchTerm" (ionClear)="onSearchChanged()" placeholder="Zoeken" (ionInput)="onSearchChanged()"></ion-searchbar>
            </div>

            <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px;text-align:center;" marginBottom *ngIf="!trainerService.trainerInfo.logo">
                <div fullwidth style="height:100px">
                    <div font-30 flex center-ver center-hor fullheight weight700 uppercase>{{trainerService.trainerInfo.name}}</div>
                </div> 
            </div>

            <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px">
                <ion-item detail="false" lines="none" button (click)="addCase()" class="itemButton" *ngIf="!trainerService.caseItem?.id" noMargin>
                    <div font-20 weight700>{{'cases.new_case' | translate}}</div>
                    <fa-icon font-24 slot="end" [icon]="icon.get('faPlus')"></fa-icon>
                </ion-item>         

                <ion-item detail="false" lines="none" button (click)="importCase()" class="itemButton" *ngIf="!trainerService.caseItem?.id" noMargin>
                    <div font-20 weight700>{{'cases.use_template' | translate}}</div>
                    <fa-icon font-24 slot="end" [icon]="icon.get('faCopy')"></fa-icon>
                </ion-item>   
                
                <!-- <ion-item detail="false" lines="none" button (click)="massUpdate()" class="itemButton" *ngIf="!trainerService.caseItem?.id" noMargin>
                    <div font-20 weight700>{{'cases.mass_update' | translate}} {{filteredCases.length}}</div>
                    <fa-icon font-24 slot="end" [icon]="icon.get('faSyncAlt')"></fa-icon>
                </ion-item>   -->
                


                
                <ion-item detail="false" lines="none" button (click)="importClick()" class="itemButton" *ngIf="!trainerService.caseItem?.id" noMargin >
                    <div font-20 weight700>{{'cases.import_case' | translate}}</div>
                    <fa-icon font-24 slot="end" [icon]="icon.get('faFileImport')"></fa-icon>
                </ion-item>
                <input hidden #import_item type="file" accept=".alicialabs" (change)="selectImportFile($event)"/>

                <!-- <ion-item detail="false" lines="none" button (click)="exportCases()" *ngIf="!trainerService.caseItem?.id" class="itemButton">
                    <div font-20 weight700>{{'cases.export_csv' | translate}}</div>
                    <fa-icon font-24 slot="end" [icon]="icon.get('faDownload')"></fa-icon>
                </ion-item> -->
                <ion-item detail="false" lines="none" button (click)="back()" class="itemButton" *ngIf="trainerService.caseItem?.id" noMargin>
                    <div font-20 weight700>{{'buttons.back' | translate}}</div>
                    <fa-icon font-24 slot="end" [icon]="icon.get('faArrowLeft')"></fa-icon>
                </ion-item>

                <ion-item detail="false" lines="none" button (click)="copyCase()" class="itemButton" *ngIf="trainerService.caseItem?.id" noMargin>
                    <div font-20 weight700>{{'cases.copy_case' | translate}}</div>
                    <fa-icon font-24 slot="end" [icon]="icon.get('faCopy')"></fa-icon>
                </ion-item>

                <ion-item detail="false" [disabled]="caseNotReady()" lines="none" button (click)="practice()" class="itemButton" *ngIf="trainerService.caseItem?.id" noMargin>
                    <div font-20 weight700>{{'cases.practice' | translate}}</div>
                    <fa-icon font-24 slot="end" [icon]="icon.get('faComments')"></fa-icon>
                </ion-item>

                <ion-item detail="false" lines="none" button (click)="exportItem(trainerService.caseItem)" class="itemButton" *ngIf="trainerService.caseItem?.id" noMargin >
                    <div font-20 weight700>{{'cases.export_case' | translate}}</div>
                    <fa-icon font-24 slot="end" [icon]="icon.get('faFileExport')"></fa-icon>
                </ion-item>

                <ion-item detail="false" lines="none" button (click)="exportVisibleItems()" class="itemButton" *ngIf="!trainerService.caseItem?.id" noMargin >
                    <div font-20 weight700>{{'cases.export_visible_cases' | translate}}</div>
                    <fa-icon font-24 slot="end" [icon]="icon.get('faFileExport')"></fa-icon>
                </ion-item>

                <ion-item detail="false" lines="none" button (click)="deleteCase()" class="itemButton" *ngIf="trainerService.caseItem?.id" noMargin>
                    <div font-20 weight700 text-danger>{{'cases.remove_case' | translate}}</div>
                    <fa-icon font-24 slot="end" text-danger [icon]="icon.get('faTrashAlt')"></fa-icon>
                </ion-item>
            </div>

            <div style="background:white;padding:10px 0px;border-radius:16px;margin-top:15px" marginBottom *ngIf="!trainerService.caseItem?.id&& trainerService.modules.length">
            
                <h2 font-20 weight700 style="margin:10px 0px;padding-left:15px">{{'cases.connected_modules' | translate}}</h2>
                <div>
                    <ion-item detail="false" pointer [ngClass]="{'selectedModule':trainerService.selectedModuleCases=='none'}" lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="(trainerService.selectedModuleCases== 'none' ? trainerService.selectedModuleCases = '' : trainerService.selectedModuleCases= 'none');onFiltersChanged();">
                        <ion-label>{{ 'cases.no_module' | translate }}</ion-label>
                        <fa-icon font-20 slot="end" style="color:white;" [icon]="icon.get('faTimes')" *ngIf="trainerService.selectedModuleCases== 'none'"></fa-icon>
                    </ion-item>
                </div>
                <div *ngFor="let module of trainerService.modules | sortBy: -1 : 'title'">
                    <ion-item detail="false" pointer [ngClass]="{'selectedModule':trainerService.selectedModuleCases==module.id}" lines="none" font-18 weight500 noMargin class="selectCaseItem" (click)="(trainerService.selectedModuleCases== module.id ? trainerService.selectedModuleCases = '' : trainerService.selectedModuleCases= module.id 
                    );onFiltersChanged();">
                        <!-- <ion-checkbox slot="start" [(ngModel)]="module.selected" noPointerEvents></ion-checkbox> -->
                        <ion-label>{{ module.title }}</ion-label>
                        <fa-icon font-20 slot="end" style="color:white;" [icon]="icon.get('faTimes')" *ngIf="trainerService.selectedModuleCases==module.id"></fa-icon>
                    </ion-item>
                </div>
            </div>

        </ion-col>

        <ion-content style="--background:none;height:calc((var(--vh) * 100) - 121px)">
            <ion-col [size]="media.smallDevice ? 12 : 9"  class="detailColumn">
                <div *ngIf="!trainerService.caseItem?.id">
                    <ion-row>
                        <!-- <ion-col [size]="helpers.cardSizeSmall" *ngFor="let caseItem of cases | caseFilter: currentFilterTypes.types : currentFilterTypes.subjectTypes : extraFilters.open_to_user | filterSearch : searchTerm : false : ['title']"> -->
                        <ion-col [size]="helpers.cardSizeSmall" *ngFor="let caseItem of visibleCases">
                            <ion-card noPadding pointer fullheight (contextmenu)="onRightClick($event,caseItem)">
                                <div class="shareButtonCase" *ngIf="caseItem.voice">
                                    <fa-icon [icon]="icon.get('faMicrophoneAlt')" font-22 style="color:#7A90B6"></fa-icon>
                                </div>
                                <ion-card-content noPadding fullHeight>
                                    <div backgroundImage class="avatarImage" *ngIf="caseItem.photo" [ngStyle]="{'background-image': 'url(' + caseItem.photo + ')'}"></div>
                                    <div backgroundImage class="avatarImage" *ngIf="!caseItem.photo" [ngStyle]="{'background-image': 'url(assets/img/default_avatar.png)'}"></div>
                                    <div flex center center-ver center-hor style="height:calc(100% - 275px)">
                                        <ion-card-header>
                                            <ion-card-title font-18 weight600>{{caseItem.title}}</ion-card-title>
                                            <ion-card-subtitle font-14 weight400>{{caseItem.user_info | maxLength : 60 : true}}</ion-card-subtitle>
                                        </ion-card-header>
                                    </div>
                                    <div center flex center-ver center-hor>
                                        <ion-button class="saveButton creditButton" style="border-radius:100%" [ngStyle]="{'background':levelService.levelColor(caseItem.level)}" fill="outline" size="small">
                                            <div>
                                                <div [ngStyle]="{'color':levelService.levelColorText(caseItem.level)}">{{caseItem.level}}</div>
                                                <div font-12 [ngStyle]="{'color':levelService.levelColorTextLevel(caseItem.level)}">{{'standards.level' | translate}}</div>
                                            </div>
                                        </ion-button>
                                        <ion-button class="saveButton cardButton" fill="outline" size="small" (click)="selectCasus(caseItem)">{{'cases.edit_case' | translate}}</ion-button>
                                    </div>
                                </ion-card-content>
                            </ion-card>

                            <!-- <ion-card class="headerCard">
                                <ion-card-header>
                                    <ion-card-title *ngIf="categoryInfo(conversationType.key)">{{ categoryInfo(conversationType.key).title }}</ion-card-title>
                                </ion-card-header>
                            </ion-card>
                            <ion-card basicPadding pointer font16 weight700 tab *ngFor="let casus of conversationType.value;let i = index" [ngClass]="{'activeTab':caseItem.id==casus.id}" (click)="selectCasus(casus)">
                                {{casus.title | capitalize}}
                            </ion-card> -->
                        </ion-col>
                        <ion-col [size]="helpers.cardSizeSmall" *ngIf="!visibleCases.length">
                            <ion-card noPadding pointer fullheight>
                                <ion-card-content noPadding fullHeight flex center-hor>
                                    <div flex center center-ver center-hor>
                                        <ion-card-header>
                                            <ion-card-title font-18 weight600>{{'cases.no_results' | translate}}</ion-card-title>
                                        </ion-card-header>
                                    </div>
                                </ion-card-content>
                            </ion-card>
                        </ion-col>
                    </ion-row>
                </div>
                
                <ion-row noPadding *ngIf="trainerService.caseItem?.id">
                    <ion-col size="12" noPadding *ngIf="trainerService.breadCrumbs?.length&&trainerService.breadCrumbs[0].type=='training'">
                        <ion-card basicPadding [ngStyle]="{'outline': 'solid 2px var(--ion-color-primary)'}">
                          <ion-card-header>
                              <ion-card-title flex center-ver>
                                  <span weight600 titleIcon>{{'trainings.editing_training' | translate}}: '{{trainerService.breadCrumbs[0].item.title}}'</span>
                              </ion-card-title>
                          </ion-card-header>
                        </ion-card>
                      </ion-col>

                    <ion-col [size]="media.smallDevice ? 12 : 12" noPadding>
                        <ion-card basicPadding *ngIf="trainerService.caseItem?.id" [ngStyle]="{'outline':caseReady('title') ? 'solid 2px var(--ion-color-primary)' : 'solid 2px var(--ion-color-warning)'}">
                            <ion-card-header>
                                <ion-card-title flex center-ver>
                                    <span weight600 titleIcon>{{'cases.title_and_info' | translate}}</span>
                                    <span class="spacer"></span>
                                    <fa-icon pointer titleIcon *ngIf="caseReady('title')" text-success font-24 [icon]="icon.get('faCheck')" (click)="modalService.showText(translate.instant(translate.instant('cases.all_fields_filled')),translate.instant('buttons.complete'))"></fa-icon>
                                    <fa-icon pointer titleIcon *ngIf="!caseReady('title')" text-warning font-24 [icon]="icon.get('faExclamationTriangle')" (click)="showFieldsStatus('title',$event)"></fa-icon>
                                    <fa-icon pointer titleIcon font-24 text-secondary (click)="trainerService.tooltip('case_title_user_info','cases.title_and_info')" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    <fa-icon pointer titleIcon *ngIf="media.smallDevice" font-24 [icon]="icon.get('faTimes')" (click)="back();reloadMenu()"></fa-icon>
                                </ion-card-title>
                            </ion-card-header>
                            <ion-card-content>
                                <ion-row noPadding>
                                    <ion-col [size]="media.smallDevice ? 12 : 12">
                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label position="floating">{{'cases.title' | translate}}</ion-label>
                                        <ion-input style="margin-left:10px" weight700 type="text" (ionChange)="update('title')" [(ngModel)]="trainerService.caseItem.title"></ion-input>
                                    </ion-item>
                                    </ion-col>
                                    <!-- <ion-col [size]="media.smallDevice ? 12 : 4">
                                    <ion-item detail="false" lines="none" listCard style="min-height:65px;--padding-top: 8px;">
                                        <ion-toggle [disabled]="(caseNotReady())" color="primary" [(ngModel)]="trainerService.caseItem.open_to_user" (ionChange)="update('open_to_user')">
                                            {{'cases.open_for_users' | translate}}
                                        </ion-toggle>
                                    </ion-item>
                                    </ion-col> -->
                                </ion-row>
                                    
                                <ion-item detail="false" lines="none" listCard>
                                    <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.user_info" (ionChange)="update('user_info')">
                                        <div slot="label">{{'cases.short_info' | translate}}</div>
                                        <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_user_info','cases.short_info')" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    </ion-textarea>
                                </ion-item>         

                                <ion-row noPadding *ngIf="trainerService.breadCrumbs?.length&&trainerService.breadCrumbs[0].type=='training'">
                                    <ion-col [size]="media.smallDevice ? 12 : 6">
                                    <ion-item pointer detail="false" style="height:60px" lines="none" listCard (click)="selectDate($event,'available_date')">
                                        <ion-label relative style="top:-8px" position="stacked">{{'trainings.available_date' | translate}}</ion-label>
                                        <ion-text relative weight500 font-16 style="top:-5px">
                                        {{trainerService.caseItem.available_date ? (trainerService.caseItem.available_date | date:'dd-MM-yyyy') : translate.instant('trainings.available_from_start')}}
                                        </ion-text>
                                        <fa-icon relative style="top:10px" *ngIf="trainerService.caseItem.available_date" slot="end" pointer titleIcon font-24 [icon]="icon.get('faTimes')" (click)="clearDate($event,'available_date')"></fa-icon>
                                        <fa-icon relative style="top:10px" slot="end" pointer titleIcon font-24 (click)="trainerService.tooltip('training_available_date','trainings.available_date',$event)" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    </ion-item>
                                    </ion-col>

                                    <ion-col [size]="media.smallDevice ? 12 : 6">
                                    <ion-item pointer detail="false" style="height:60px" lines="none" listCard [disabled]="trainerService.caseItem.status=='closed'" (click)="selectDate($event,'available_till')">
                                        <ion-label relative style="top:-8px" position="stacked">{{'trainings.available_till' | translate}}</ion-label>
                                        <ion-text relative weight500 font-16 style="top:-5px">
                                        {{trainerService.caseItem.available_till ? (trainerService.caseItem.available_till | date:'dd-MM-yyyy') : translate.instant('trainings.available_until_end')}}
                                        </ion-text>
                                        <fa-icon relative style="top:10px" *ngIf="trainerService.caseItem.available_till" slot="end" pointer titleIcon font-24 [icon]="icon.get('faTimes')" (click)="clearDate($event,'available_till')"></fa-icon>
                                        <fa-icon relative style="top:10px" slot="end" pointer titleIcon font-24 (click)="trainerService.tooltip('training_available_till','trainings.available_till',$event)" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    </ion-item>
                                    </ion-col>
                                </ion-row>
                            </ion-card-content>
                        </ion-card>
                    </ion-col>

                    <!-- <ion-col [size]="media.smallDevice ? 12 : 5" noPadding>
                        <ion-card basicPadding [ngStyle]="{'outline':caseReady('settings') ? 'solid 2px var(--ion-color-primary)' : 'solid 2px var(--ion-color-warning)'}">
                            <ion-card-header>
                                <ion-card-title flex center-ver>
                                    <span weight600>{{'cases.settings' | translate}}</span>
                                    <div class="spacer"></div>
                                    <span style="color:rgba(0,0,0,0.4);text-transform:none" font-14>({{trainerService.caseItem.id}})</span>
                                    <fa-icon pointer titleIcon *ngIf="caseReady('settings')" text-success font-24 [icon]="icon.get('faCheck')"></fa-icon>
                                    <fa-icon pointer titleIcon *ngIf="!caseReady('settings')" text-warning font-24 [icon]="icon.get('faExclamationTriangle')"></fa-icon>
                                </ion-card-title>
                            </ion-card-header>
                            <ion-card-content>
                                
                                <ion-item detail="false" lines="none" listCard>
                                    <ion-toggle color="primary" [disabled]="true" [(ngModel)]="trainerService.caseItem.translate">
                                        {{'cases.translated' | translate}}
                                    </ion-toggle>
                                    <fa-icon slot="end" pointer titleIcon font-24 [icon]="icon.get('faGlobe')" (click)="startTranslation()"></fa-icon>
                                </ion-item>

                                <ion-item detail="false" [disabled]="(caseNotReady() && !trainerService.caseItem.open_to_user)" lines="none" listCard>
                                    <ion-toggle color="primary" [(ngModel)]="trainerService.caseItem.open_to_user" (ionChange)="update('open_to_user')">
                                        {{'cases.open_for_users' | translate}}
                                    </ion-toggle>
                                </ion-item>

                                <ion-item detail="false" lines="none" listCard>
                                    <ion-toggle color="primary" [(ngModel)]="trainerService.caseItem.create_self" (ionChange)="update('create_self')">
                                        {{'cases.self_create_case' | translate}}
                                    </ion-toggle>
                                </ion-item>

                            </ion-card-content>
                        </ion-card>
                    </ion-col> -->
                </ion-row>

                <ion-row noPadding *ngIf="trainerService.caseItem?.id">
                    <ion-col [size]="media.smallDevice ? 12 : 12" noPadding>
                        <ion-card basicPadding [ngStyle]="{'outline':caseReady('basics') ? 'solid 2px var(--ion-color-primary)' : 'solid 2px var(--ion-color-warning)'}">
                        <ion-card-header (click)="showBasics=!showBasics">
                            <ion-card-title flex center-ver>
                                <span weight600>{{'cases.basics' | translate}}</span>
                                <span class="spacer"></span>
                                <fa-icon pointer titleIcon *ngIf="caseReady('basics')" text-success font-24 [icon]="icon.get('faCheck')" (click)="modalService.showText(translate.instant(translate.instant('cases.all_fields_filled')),translate.instant('buttons.complete'))"></fa-icon>
                                <fa-icon pointer titleIcon *ngIf="!caseReady('basics')" text-warning font-24 [icon]="icon.get('faExclamationTriangle')" (click)="showFieldsStatus('basics',$event)"></fa-icon>
                                <fa-icon pointer titleIcon font-24 text-secondary (click)="trainerService.tooltip('case_basics','cases.basics',$event)" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')" [ngStyle]="{'transform': showBasics ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>
                            </ion-card-title>
                        </ion-card-header>
                        <ion-card-content *ngIf="showBasics">
                            <ion-row>
                            <ion-col size="7">
                                <ion-row>
                                <ion-col size="12">
                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-label position="stacked">{{'cases.conversation_technique' | translate}}</ion-label>
                                        <ion-select interface="popover" [(ngModel)]="trainerService.caseItem.conversation" (ionChange)="update('conversation');changeCategory()">
                                            <ion-select-option *ngFor="let cat of categories | filterKey : '!id' : 'main'" [value]="cat.id">{{cat.title}}</ion-select-option>
                                        </ion-select>
                                        <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_conversationtype','cases.conversation_technique')" [icon]="icon.get('faInfoCircle')"></fa-icon>

                                    </ion-item>
                                </ion-col>
                                </ion-row>
                        

                                <ion-item detail="false" lines="none" listCard>
                                    <ion-label position="stacked">{{'cases.role' | translate}}</ion-label>
                                    <ion-input [(ngModel)]="trainerService.caseItem.role" (ionChange)="update('role')"></ion-input>
                                    <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_role','cases.role')" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                </ion-item>

                                <ion-item detail="false" lines="none" listCard>
                                    <ion-label position="stacked">{{'cases.free_question' | translate}}</ion-label>
                                    <ion-input [(ngModel)]="trainerService.caseItem.free_question" (ionChange)="update('free_question')"></ion-input>
                                    <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_free_input','cases.free_question')" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                </ion-item>

                                <ion-item detail="false" lines="none" listCard>
                                    <ion-label position="stacked">{{'standards.level' | translate}}</ion-label>
                                    <ion-select interface="popover" [(ngModel)]="trainerService.caseItem.level" (ionChange)="update('level')">
                                        <ion-select-option *ngFor="let level of [1,2,3,4,5]" [value]="level">{{level}}</ion-select-option>
                                    </ion-select>
                                    <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_level','standards.level')" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                </ion-item>

                                <!-- <ion-item detail="false" lines="none" listCard (click)="selectTypes(caseItem.types)" class="ionItemTypes"> -->
                                <ion-item detail="false" lines="none" listCard (click)="selectModules(trainerService.caseItem.modules)" class="ionItemTypes" fullwidth>
                                    <ion-label position="stacked" style="margin-bottom:10px">{{'cases.connected_modules' | translate}}</ion-label>
                                    <div style="min-height:40px">
                                        <span *ngFor="let module of trainerService.caseItem.modules;let i = index">
                                            <div class="typeItem" center-ver center-hor>
                                                <span>{{trainerService.getModule(module).title | uppercase}}</span>
                                            </div>
                                        </span>
                                    </div>
                                    <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_connected_modules','cases.connected_modules',$event)" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                </ion-item>
                            </ion-col>
                            <ion-col size="5">
                                <ion-card pointer class="caseAvatar" style="height:300px" (click)="selectAvatar($event)" [ngStyle]="{'border': trainerService.caseItem.photo ? '0' : 'solid 1px rgba(0,0,0,0.3)'}">
                                    <ion-card-content backgroundImage noPadding *ngIf="trainerService.caseItem.photo" [ngStyle]="{'background-image': 'url(' + trainerService.caseItem.photo + ')'}">
                                    </ion-card-content>
                                    <div>
                                        <fa-icon class="infoIconPhoto" pointer titleIcon font-24 (click)="trainerService.tooltip('case_photo','cases.photo',$event)" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    </div>
                                    <div fullwidth center-ver center-hor class="btnImgChange">
                                        <ion-button fill="solid" color="light" class="saveButton" noPointerEvents>
                                            <span text-dark>
                                                <fa-icon [icon]="icon.get('faImage')"></fa-icon>
                                                {{'cases.photo' | translate}}
                                            </span>
                                        </ion-button>
                                        <!-- <ion-button fill="solid" color="light" class="saveButton" (click)="selectStreamingAvatar($event)">
                                            <span text-dark>
                                                <fa-icon [icon]="icon.get('faVideo')"></fa-icon>
                                                {{'cases.video' | translate}}
                                            </span>
                                        </ion-button> -->
                                    </div>
                                    

                                </ion-card>
                            </ion-col>
                                    
                            </ion-row>

                            <ion-row>
                                <ion-col [size]="media.smallDevice ? 12 : 12">
                                    <ion-row noPadding>
                                        <ion-col noPadding [size]="media.smallDevice ? 12 : 8">
                                            <ion-item detail="false" lines="none" listCard>
                                                <ion-range noPadding [min]="1" [max]="100" [pin]="true"  color="primary" [(ngModel)]="trainerService.caseItem.attitude" (ionChange)="update('attitude')">
                                                    <ion-label style="font-size:14px" slot="start">{{'cases.attitude' | translate}}</ion-label>
                                                    <ion-label style="font-size:18px" slot="end">{{trainerService.caseItem.attitude}}</ion-label>
                                                </ion-range>
                                            </ion-item>
                                        </ion-col>
                                        <ion-col [size]="media.smallDevice ? 12 : 4" style="padding-left:20px">
                                            <ion-item detail="false" lines="none" listCard noMargin center style="top:-5px;">
                                                <ion-label style="font-size:18px" *ngIf="trainerService.caseItem?.attitude">{{infoService.getAttitude(trainerService.caseItem?.attitude)?.title}}</ion-label>
                                                <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_attitude','cases.attitude')" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                            </ion-item>
                                        </ion-col>
                                    </ion-row>
                                </ion-col>
                                <ion-col [size]="media.smallDevice ? 12 : 12">
                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-range noPadding [min]="1" [max]="99" [pin]="true"  color="primary" [(ngModel)]="trainerService.caseItem.steadfastness" (ionChange)="update('steadfastness')">
                                            <ion-label style="font-size:14px" slot="start">{{'cases.steadfastness' | translate}}</ion-label>
                                            <ion-label style="font-size:18px" slot="end">{{trainerService.caseItem.steadfastness}}</ion-label>
                                        </ion-range>
                                        <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_steadfastness','cases.steadfastness')" [icon]="icon.get('faInfoCircle')"></fa-icon>

                                    </ion-item>
                                </ion-col> 

                                <ion-col [size]="media.smallDevice ? 12 : 8" *ngIf="trainerService.isAdmin">
                                    <ion-item pointer detail="false" lines="none" listCard (click)="trainerService.voices.length ? selectVoice() : trainerService.loadVoices()" class="ionItemTypes" fullwidth>
                                        <ion-label position="stacked" style="margin-bottom:10px">{{'cases.select_voice' | translate}}</ion-label>
                                        <div style="min-height:40px">
                                            <span *ngIf="trainerService.caseItem.voice">
                                                {{trainerService.caseItem.voice}}
                                            </span>
                                            <span *ngIf="!trainerService.caseItem.voice" font-14 text-secondary italic>
                                                {{'cases.no_voice_selected' | translate}}
                                            </span>
                                            <fa-icon pointer titleIcon font-20 relative style="top:3px;" [icon]="icon.get('faTimes')" *ngIf="trainerService.caseItem.voice" (click)="clearVoice($event)"></fa-icon>
                                        </div>
                                        <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_voice','cases.select_voice',$event)" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    </ion-item>
                                </ion-col>

                                <ion-col [size]="media.smallDevice ? 12 : 4" *ngIf="trainerService.isAdmin">
                                    <ion-item detail="false" lines="none" listCard fullwidth>
                                        <ion-label position="stacked" >{{'cases.voice_on' | translate}}</ion-label>
                                        <ion-toggle labelPlacement="end" justify="start" style="margin:4px;" fullwidth [(ngModel)]="trainerService.caseItem.voice_on" (ionChange)="update('voice_on')" color="primary" weight600>
                                            <span *ngIf="trainerService.caseItem.voice_on">{{'buttons.on' | translate}}</span>
                                            <span *ngIf="!trainerService.caseItem.voice_on">{{'buttons.off' | translate}}</span>
                                        </ion-toggle>
                                        <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_voice_on','cases.user_choose_voice')" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    </ion-item>
                                </ion-col>

                            </ion-row>
                        </ion-card-content>
                        </ion-card>
                    </ion-col>

                </ion-row>

                <ion-row noPadding *ngIf="trainerService.caseItem?.id" >
                    <ion-col size="12">
                        <ion-card basicPadding [ngStyle]="{'outline': 'solid 2px var(--ion-color-primary)' }">
                            <ion-card-header (click)="showCasus=!showCasus">
                                <ion-card-title flex center-ver>
                                    <span weight600>{{'cases.case_content' | translate}}</span>
                                    <span class="spacer"></span>
                                    <ion-button class="saveButton" *ngIf="showCasus" color="warning" (click)="generateCasus($event,trainerService.caseItem)" fill="outline" titleIcon>{{'cases.generate' | translate}}</ion-button>
                                    <ion-button class="saveButton" *ngIf="showCasus&&!trainerService.caseItem.casus" fill="outline" (click)="editCasus($event)" titleIcon>{{'cases.write_yourself' | translate}}</ion-button>
                                    <ion-button class="saveButton" *ngIf="showCasus&&trainerService.caseItem.casus" fill="outline" (click)="editCasus($event)" titleIcon>{{'cases.change_content' | translate}}</ion-button>
                                    <fa-icon pointer titleIcon font-24 text-secondary (click)="trainerService.tooltip('case_extra_instructions','cases.case_content',$event)" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')"  [ngStyle]="{'transform': showCasus ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>
                                </ion-card-title>
                            </ion-card-header>
                            <ion-card-content *ngIf="showCasus">
                                <!-- <div marginBottom>
                                    Hier een kort uitleg over hoe de casus werkt. 
                                </div>  -->
                                <div basicPadding borderRadius24 backgroundGlobal [innerHTML]="trainerService.caseItem.casus ? (trainerService.caseItem.casus | sanitizeHtml) : (translate.instant('cases.no_case_yet') | sanitizeHtml)"></div> 

                            </ion-card-content>
                        </ion-card>
                    </ion-col>
                </ion-row>

                <ion-row noPadding *ngIf="trainerService.caseItem?.id && trainerService.isTrainerPro && trainerService.caseItem.conversation!='expert'" >
                    <ion-col size="12">
                        <ion-card basicPadding [ngStyle]="{'outline': 'solid 2px var(--ion-color-primary)' }">
                            <ion-card-header (click)="showKnowledge=!showKnowledge">
                                <ion-card-title flex center-ver>
                                    <span weight600>{{'cases.case_knowledge' | translate}}</span>
                                    <span class="spacer"></span>
                                    <fa-icon pointer titleIcon font-24 text-secondary (click)="trainerService.tooltip('case_extra_knowledge','dashboard.knowledge',$event)" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')"  [ngStyle]="{'transform': showKnowledge ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>
                                </ion-card-title>
                            </ion-card-header>
                            <ion-card-content *ngIf="showKnowledge">

                                <div font-18 fullwidth basicPadding borderRadius24 borderPrimary flex center-ver>
                                    <div weight700 style="min-width:200px;">{{'dashboard.knowledge' | translate}}:</div>
                                    <ion-select fullwidth font-18 marginLeft [interfaceOptions]="{'cssClass': 'mycomponent-wider-popover'}" fullwidth interface="popover" [(ngModel)]="trainerService.caseItem.extra_knowledge" (ionChange)="update('extra_knowledge')">
                                        <ion-select-option [value]="''">{{'cases.no_extra_knowledge' | translate}}</ion-select-option>
                                        <ion-select-option *ngFor="let item of trainerService.trainerInfo.knowledgeItems | filterKey : '!type' : 'book'" [value]="item.id">{{item.title | translate}}</ion-select-option>
                                    </ion-select>
                                </div>

                            </ion-card-content>
                        </ion-card>
                    </ion-col>
                </ion-row>

                <ion-row noPadding *ngIf="trainerService.caseItem?.id && trainerService.isTrainerPro && (trainerService.caseItem.conversation=='expert' || trainerService.caseItem.conversation=='examinator')" >
                    <ion-col size="12">
                        <ion-card basicPadding [ngStyle]="{'outline': 'solid 2px var(--ion-color-primary)' }">
                            <ion-card-header (click)="showKnowledge=!showKnowledge">
                                <ion-card-title flex center-ver>
                                    <span weight600>{{'cases.case_expertise_knowledge' | translate}}</span>
                                    <span class="spacer"></span>
                                    <fa-icon pointer titleIcon font-24 text-secondary (click)="trainerService.tooltip('add_knowledge_expert_text','cases.case_expertise_knowledge',$event)" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')"  [ngStyle]="{'transform': showKnowledge ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>
                                </ion-card-title>
                            </ion-card-header>
                            <ion-card-content *ngIf="showKnowledge">

                                <div font-18 fullwidth basicPadding borderRadius24 borderPrimary flex center-ver>
                                    <div weight700 style="min-width:200px;">{{'dashboard.knowledge' | translate}}:</div>
                                    <ion-select fullwidth font-18 marginLeft [interfaceOptions]="{'cssClass': 'mycomponent-wider-popover'}" fullwidth interface="popover" [(ngModel)]="trainerService.caseItem.extra_knowledge" (ionChange)="newExpertise()">
                                        <ion-select-option [value]="''">{{'cases.no_extra_knowledge' | translate}}</ion-select-option>
                                        <ion-select-option *ngFor="let item of trainerService.trainerInfo.knowledgeItems | filterKey : 'type' : 'book'" [value]="item.id">{{item.title | translate}}</ion-select-option>
                                    </ion-select>
                                </div>

                            </ion-card-content>
                        </ion-card>
                    </ion-col>
                </ion-row>
                
                <ion-row noPadding *ngIf="trainerService.caseItem?.id">
                    <ion-col size="12">
                        <ion-card basicPadding [ngStyle]="{'outline':'solid 2px var(--ion-color-primary)'}">
                            <ion-card-header (click)="showUserOptions=!showUserOptions">
                                <ion-card-title flex center-ver>
                                    <span weight600>{{'cases.user_options' | translate}}</span>
                                    <span class="spacer"></span>
                                    <fa-icon pointer titleIcon font-24 text-secondary (click)="trainerService.tooltip('case_user_input_options','cases.user_options',$event)" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')"  [ngStyle]="{'transform': showUserOptions ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>
                                </ion-card-title>
                            </ion-card-header>
                            <ion-card-content *ngIf="showUserOptions">

                                <ion-item detail="false" noBackground lines="none" listCard fullwidth>
                                    <ion-label position="stacked" ></ion-label>
                                    <ion-toggle labelPlacement="end" justify="start" noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.openingMessage" (ionChange)="update('editable_by_user')" color="primary" weight600>
                                        <span *ngIf="trainerService.caseItem.editable_by_user.openingMessage">{{'case_options.editable_openingMessage_statement_true' | translate}}</span>
                                        <span *ngIf="!trainerService.caseItem.editable_by_user.openingMessage">{{'case_options.editable_openingMessage_statement_false' | translate}}</span>
                                    </ion-toggle>
                                    <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_opening_message','cases.opening_message')" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                </ion-item>

                                <ion-item detail="false" lines="none" listCard>
                                    <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.openingMessage" (ionChange)="update('openingMessage')">
                                        <div slot="label">{{'cases.opening_message' | translate}}</div>
                                    </ion-textarea>
                                </ion-item>  

                                <ion-item detail="false" noBackground lines="none" listCard fullwidth>
                                    <ion-label position="stacked" ></ion-label>
                                    <ion-toggle labelPlacement="end" justify="start" noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.goals.free" (ionChange)="update('editable_by_user')" color="primary" weight600>
                                        <span *ngIf="trainerService.caseItem.editable_by_user.goals.free">{{'case_options.editable_goal_free_statement_true' | translate}}</span>
                                        <span *ngIf="!trainerService.caseItem.editable_by_user.goals.free">{{'case_options.editable_goal_free_statement_false' | translate}}</span>
                                    </ion-toggle>
                                    <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_goal','cases.goal_conversation')" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                </ion-item>

                                <ion-item detail="false" lines="none" listCard>
                                    <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.goalsItems.free" (ionChange)="update('goalsItems')">
                                        <div slot="label">{{'cases.goal_conversation' | translate}}</div>

                                    </ion-textarea>
                                </ion-item>  

                                <ion-item detail="false" noBackground lines="none" listCard fullwidth [disabled]="!trainerService.caseItem.voice">
                                    <ion-label position="stacked" ></ion-label>
                                    <ion-toggle labelPlacement="end" justify="start" noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.voice" (ionChange)="update('editable_by_user')" color="primary" weight600>
                                        <span *ngIf="trainerService.caseItem.editable_by_user.voice">{{'case_options.editable_voice_statement_true' | translate}}</span>
                                        <span *ngIf="!trainerService.caseItem.editable_by_user.voice">{{'case_options.editable_voice_statement_false' | translate}}</span>
                                    </ion-toggle>
                                    <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('user_case_voice','cases.voice')" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                </ion-item>



                                <ion-item detail="false" noBackground lines="none" listCard fullwidth>
                                    <ion-label position="stacked" ></ion-label>
                                    <ion-toggle labelPlacement="end" justify="start" noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.free_answer" (ionChange)="update('editable_by_user')" color="primary" weight600>
                                        <span *ngIf="trainerService.caseItem.editable_by_user.free_answer">{{'case_options.editable_free_answer_statement_true' | translate}}</span>
                                        <span *ngIf="!trainerService.caseItem.editable_by_user.free_answer">{{'case_options.editable_free_answer_statement_false' | translate}}</span>
                                    </ion-toggle>
                                    <fa-icon pointer slot="end" titleIcon font-24 (click)="trainerService.tooltip('case_free_input','cases.free_question')" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    
                                </ion-item>

                                <div>
                                    
                                    <ion-item [disabled]="!trainerService.caseItem.editable_by_user.free_answer" detail="false" lines="none" listCard>
                                        <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.free_question" (ionChange)="update('free_question')">
                                        <div slot="label">{{'cases.free_question' | translate}}</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-item [disabled]="!trainerService.caseItem.editable_by_user.free_answer" detail="false" lines="none" listCard>
                                        <ion-textarea rows="1" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.free_question2" (ionChange)="update('free_question2')">
                                        <div slot="label">{{'cases.free_question' | translate}} 2</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-item [disabled]="!trainerService.caseItem.editable_by_user.free_answer" detail="false" lines="none" listCard>
                                        <ion-textarea rows="1" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.free_question3" (ionChange)="update('free_question3')">
                                        <div slot="label">{{'cases.free_question' | translate}} 3</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-item [disabled]="!trainerService.caseItem.editable_by_user.free_answer" detail="false" lines="none" listCard>
                                        <ion-textarea rows="1" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.free_question4" (ionChange)="update('free_question4')">
                                        <div slot="label">{{'cases.free_question' | translate}} 4</div>
                                        </ion-textarea>
                                    </ion-item>  
                                </div>
                                
                            </ion-card-content>
                        </ion-card>
                    </ion-col>
                </ion-row>

                <ion-row noPadding *ngIf="trainerService.caseItem?.id">
                    <ion-col size="12">
                        <ion-card basicPadding [ngStyle]="{'outline':'solid 2px var(--ion-color-primary)'}">
                            <ion-card-header (click)="showUserhelp=!showUserhelp">
                                <ion-card-title flex center-ver>
                                    <span weight600>{{'cases.user_help' | translate}}</span>
                                    <span class="spacer"></span>
                                    <fa-icon pointer titleIcon font-24 text-secondary (click)="trainerService.tooltip('case_user_help_options','cases.user_help',$event)" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')"  [ngStyle]="{'transform': showUserhelp ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>
                                </ion-card-title>
                            </ion-card-header>
                            <ion-card-content *ngIf="showUserhelp">
                                
                                <ion-item detail="false" lines="none" listCard fullwidth>
                                    <ion-label position="stacked" ></ion-label>
                                    <ion-toggle noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.agents.choices" (ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_choices' | translate}}</ion-toggle>
                                    <ion-toggle noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.agents.facts" (ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_facts' | translate}}</ion-toggle>
                                    <ion-toggle noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.agents.background" (ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_background' | translate}}</ion-toggle>
                                    <ion-toggle noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.agents.undo" (ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_undo' | translate}}</ion-toggle>
                                </ion-item>

                            </ion-card-content>

                        </ion-card>
                    </ion-col>
                </ion-row>

                <ion-row noPadding *ngIf="trainerService.caseItem?.id">
                    <ion-col size="12">
                        <ion-card basicPadding [ngStyle]="{'outline':'solid 2px var(--ion-color-primary)'}">
                            <ion-card-header (click)="showUserHide=!showUserHide">
                                <ion-card-title flex center-ver>
                                    <span weight600>{{'cases.user_hide' | translate}}</span>
                                    <span class="spacer"></span>
                                    <fa-icon pointer titleIcon font-24 text-secondary (click)="trainerService.tooltip('case_user_hide_options','cases.user_hide',$event)" [icon]="icon.get('faInfoCircle')"></fa-icon>
                                    <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')"  [ngStyle]="{'transform': showUserHide ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>
 
                                </ion-card-title>
                            </ion-card-header>
                                <ion-card-content *ngIf="showUserHide">

                                <ion-item detail="false" lines="none" listCard fullwidth>
                                    <ion-label position="stacked" ></ion-label>
                                    <ion-toggle noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.hide.attitude" (ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_attitude' | translate}}</ion-toggle>
                                    <ion-toggle noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.hide.feedback" (ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_feedback' | translate}}</ion-toggle>
                                    <ion-toggle noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.hide.feedbackCipher" (ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_feedback_cipher' | translate}}</ion-toggle>
                                    <ion-toggle noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.hide.phases" (ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_phases' | translate}}</ion-toggle>
                                    <ion-toggle noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.hide.goal" (ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_goal' | translate}}</ion-toggle>
                                    <ion-toggle noMargin fullwidth [(ngModel)]="trainerService.caseItem.editable_by_user.hide.evaluation" (ionChange)="update('editable_by_user')"  color="primary">{{'case_options.agents_evaluation' | translate}}</ion-toggle>
                                </ion-item>

                            </ion-card-content>

                        </ion-card>
                    </ion-col>
                </ion-row>

                <!-- <ion-row noPadding *ngIf="trainerService.caseItem?.id">
                    <ion-col size="12">
                    <ion-card basicPadding [ngStyle]="{'outline':caseReady('input') ? 'solid 2px var(--ion-color-primary)' : 'solid 2px var(--ion-color-warning)'}">
                            <ion-card-header (click)="showUserInput=!showUserInput">
                                <ion-card-title flex center-ver>
                                    <span weight600>{{'cases.user_input' | translate}}</span>
                                    <span class="spacer"></span>
                                    <fa-icon pointer titleIcon *ngIf="caseReady('input')" text-success font-24 [icon]="icon.get('faCheck')"></fa-icon>
                                    <fa-icon pointer titleIcon *ngIf="!caseReady('input')" text-warning font-24 [icon]="icon.get('faExclamationTriangle')"></fa-icon>
                                    <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')"  [ngStyle]="{'transform': showUserInput ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>

                                </ion-card-title>
                            </ion-card-header>
                            <ion-card-content *ngIf="showUserInput">

                                <ion-item detail="false" lines="none" listCard>
                                    <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.openingMessage" (ionChange)="update('openingMessage')">
                                    <div slot="label">{{'cases.opening_message' | translate}}</div>
                                    </ion-textarea>
                                </ion-item>  

                                <ion-item detail="false" lines="none" listCard>
                                    <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.goalsItems.free" (ionChange)="update('goalsItems')">
                                    <div slot="label">{{'cases.goal_conversation' | translate}}</div>
                                    </ion-textarea>
                                </ion-item>  

                                <ion-card-title *ngIf="trainerService.caseItem.editable_by_user.free_answer" flex center-ver marginTop marginBottom (click)="showUserInputMore=!showUserInputMore">
                                    <span weight600>{{'cases.free_questions' | translate}}</span>
                                    <span class="spacer"></span>
                                    <fa-icon pointer titleIcon font-24 [icon]="icon.get('faChevronDown')" [ngStyle]="{'transform': showUserInputMore ? 'rotate(180deg)' : 'rotate(0deg)'}"></fa-icon>
                                </ion-card-title>

                                <div *ngIf="showUserInputMore && trainerService.caseItem.editable_by_user.free_answer">
                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-textarea rows="4" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.free_question" (ionChange)="update('free_question')">
                                        <div slot="label">{{'cases.free_question' | translate}}</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-textarea rows="1" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.free_question2" (ionChange)="update('free_question2')">
                                        <div slot="label">{{'cases.free_question' | translate}} 2</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-textarea rows="1" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.free_question3" (ionChange)="update('free_question3')">
                                        <div slot="label">{{'cases.free_question' | translate}} 3</div>
                                        </ion-textarea>
                                    </ion-item>  

                                    <ion-item detail="false" lines="none" listCard>
                                        <ion-textarea rows="1" labelPlacement="floating" [autoGrow]="true" [(ngModel)]="trainerService.caseItem.free_question4" (ionChange)="update('free_question4')">
                                        <div slot="label">{{'cases.free_question' | translate}} 4</div>
                                        </ion-textarea>
                                    </ion-item>  
                                </div>

                                
                            </ion-card-content>
                        </ion-card>
                    </ion-col>
                </ion-row> -->

            
            </ion-col>
            <ion-infinite-scroll (ionInfinite)="loadMore($event)">
                <ion-infinite-scroll-content></ion-infinite-scroll-content>
            </ion-infinite-scroll>
        </ion-content>
    </ion-row>


  </ion-grid>
</main>